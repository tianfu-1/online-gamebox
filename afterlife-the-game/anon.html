/** @type {import("../typings/phaser")} */ var $ca2834f16a956c4f$export$5c5cddbd5caf0d99;
(function(BuildLevel) {
    BuildLevel[BuildLevel["Dev"] = 1] = "Dev";
    BuildLevel[BuildLevel["Prod"] = 2] = "Prod";
})($ca2834f16a956c4f$export$5c5cddbd5caf0d99 || ($ca2834f16a956c4f$export$5c5cddbd5caf0d99 = {}));
const $ca2834f16a956c4f$export$29cd7b75162a9425 = {
    GameVersion: "web1.3.1",
    BuildLevel: 2,
    AnalyticsEnabled: false
};


const $15b72a9ad2952278$export$842dc6aa1981869f = {
    ENDSCREEN: "./assets/endTexts/",
    AUDIO: "./assets/audio/",
    BUTTONS: "./assets/buttons/",
    FONTS: "./assets/fonts/",
    ANIMATIONS: "./assets/animations/",
    PHYSICS: "./assets/physics/",
    LOAD: "./assets/load/",
    MENU: "./assets/0menu/",
    FLY: "./assets/1fly/",
    PROTECT: "./assets/2protect/",
    ALAN: "./assets/3alan/",
    JUMPSCARE: "./assets/4jumpscare/",
    COMEDIAN: "./assets/5comedian/",
    PARTY: "./assets/6party/",
    DRESSUP: "./assets/8dressup/",
    COLLECT: "./assets/9candycollect/",
    SORT: "./assets/10sortcandy/",
    GHOSTBUSTERS: "./assets/11ghostbusters/",
    HEAVENHELL: "./assets/12heavenorhell/"
};
const $15b72a9ad2952278$export$fadd21211b40c08a = {
    REGISTRY: {
        ADBLOCKENABLED: "adblockEnabled",
        SKIPUSED: "skipUsed",
        JUMPSCARE_ATTEMPTS: "jumpscareAttempts",
        GHOSTBUSTERS_ATTEMPTED: "ghostbustersAttempted",
        HELL_COMPLETED: "hellCompleted",
        GAME_COMPLETED: "gameCompleted"
    },
    GAMESTATE: {
        START: "START",
        PLAYING: "PLAYING",
        WIN: "WIN",
        LOSE: "LOSE",
        LOADNEXTLEVEL: "LOAD"
    },
    SCENES: {
        LOAD: "LOAD",
        PROGRESSIVE_LOAD: "PROGRESSIVE_LOAD",
        SOUNDTRACK: "SOUNDTRACK",
        MENU: "MENU",
        FLY: "FLY",
        ALAN: "ALAN",
        PROTECT: "PROTECT",
        JUMPSCARE: "JUMPSCARE",
        COMEDIAN: "COMEDIAN",
        PARTY: "PARTY",
        DRESSUP: "DRESSUP",
        COLLECT: "COLLECT",
        SORT: "SORT",
        GHOSTBUSTERS: "GHOSTBUSTERS",
        HEAVENHELL: "HEAVENHELL",
        CREDITS: "CREDITS"
    },
    STORAGE_KEYS: {
        PROGRESS: "game_progress",
        DRESSUP_COSTUME: "dressup_costume"
    },
    AUDIO: {
        SOUNDTRACK: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "soundtrack.mp3",
        SOUNDTRACK_SHORT: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "soundtrackShort.mp3",
        EERIE: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "eerie.mp3",
        GRAB: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "paperGrab.mp3",
        BOUNCE: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "bounce.mp3",
        SCARE1: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "scare1.mp3",
        SCARE2: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "scare2.mp3",
        PARTY_MUSIC: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "partyMusic.mp3",
        WINK: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "wink.mp3",
        CLICK: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "btnClick.mp3",
        WIN: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "win.mp3",
        LOSE: $15b72a9ad2952278$export$842dc6aa1981869f.AUDIO + "lose.mp3"
    },
    BUTTONS: {
        TRYAGAIN: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "button.png",
        SKIP: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "ad-button.png",
        SPINNER: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "spinner.png",
        PURPLE: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "purple.png",
        RED: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "red.png",
        SOUND_ON: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "sound-on.png",
        SOUND_OFF: $15b72a9ad2952278$export$842dc6aa1981869f.BUTTONS + "sound-off.png"
    },
    FONT: {
        ATLAS: $15b72a9ad2952278$export$842dc6aa1981869f.FONTS + "LTGFont.png",
        XML: $15b72a9ad2952278$export$842dc6aa1981869f.FONTS + "LTGFont.xml"
    },
    ANIMATIONS: {
        CANDY_IDLE: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "CandyAnim.json",
        CANDY_DIE: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "CandyDie.json",
        SCARYARM_BACK: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "scaryArmBack.json",
        SCARYARM_FRONT: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "scaryArmFront.json",
        GHOST_IDLE: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "ghostIdle.json",
        GHOST_DIE: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "ghostDie.json",
        GRANNY_HAND1: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "granny_hand1.json",
        GRANNY_HAND2: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "granny_hand2.json",
        GRANNYDIE_HAND1: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "grannyDie_hand1.json",
        GRANNYDIE_HAND2: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "grannyDie_hand2.json",
        GRANNYDIE_BODY: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "grannyDie_body.json",
        WIN_IMAGE_POPUP: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "winImagePopup.json",
        NOTE_DEATH: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "noteDeath.json",
        BLUE_LIGHT: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "bluelight.json",
        GREEN_LIGHT: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "greenlight.json",
        PINK_LIGHT: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "pinklight.json",
        COMEDIAN_HAND_1: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "comedianHand.json",
        COMEDIAN_HAND_2: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "comedianHand2.json",
        FLY_WIN: $15b72a9ad2952278$export$842dc6aa1981869f.ANIMATIONS + "flyWin.json"
    },
    PHYSICS: {
        FLY_SHAPES: $15b72a9ad2952278$export$842dc6aa1981869f.PHYSICS + "ghost_shape.json",
        HEAVENHELL_SHAPES: $15b72a9ad2952278$export$842dc6aa1981869f.PHYSICS + "heavenhell_shapes.json"
    },
    MENU: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.MENU + "background.png",
        OVERLAY: $15b72a9ad2952278$export$842dc6aa1981869f.MENU + "overlay.png",
        PLAY_BUTTON: $15b72a9ad2952278$export$842dc6aa1981869f.MENU + "playButton.png",
        STAR_PARTICLE: $15b72a9ad2952278$export$842dc6aa1981869f.MENU + "particle.png"
    },
    FLY: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "ozadje-modr.png",
        HOLD_TEXT: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "hold.png",
        GRADIENT: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "gradient.png",
        WHITE_SQUARE: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "white_square.jpg",
        START_GRASS: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "grass_start.png",
        GRASS_1: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "grass1.png",
        GRASS_2: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "grass2.png",
        FOUNTAIN: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "fountain.png",
        LIGHT: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "light-2.png",
        MOON: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "moon.png",
        SPIDER_1: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "spider-1.png",
        SPIDER_2: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "spider-2.png",
        SPIDER_3: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "spider-3.png",
        SPIDER_LINE: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "crta.png",
        TWIG: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "twig.png",
        GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "duhc.png",
        WIN_IMAGE: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "win.png",
        WIN_GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.FLY + "win_ghost.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "fly.png"
    },
    ALAN: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "background.png",
        CLOUDS: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "clouds.png",
        PLANT: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "plant.png",
        TABLE: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "table.png",
        WINDOWS: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "windows.png",
        ALAN: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "alan.png",
        ALAN_SADMOUTH: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "sad-mouth.png",
        ALAN_SADDERMOUTH: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "sadder-mouth.png",
        PAPER_1: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper1.png",
        PAPER_2: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper2.png",
        PAPER_3: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper3.png",
        PAPER_4: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper4.png",
        PAPER_5: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper5.png",
        PAPER_6: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper6.png",
        PAPER_7: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "paper7.png",
        LEAF: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "leaf.png",
        MUG: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "mug.png",
        NAPIS: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "napis.png",
        PEN: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "pen.png",
        PENCIL: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "pencil.png",
        RUBBER: $15b72a9ad2952278$export$842dc6aa1981869f.ALAN + "rubber.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "alan.png"
    },
    PROTECT: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "bg.png",
        DRAG_TEXT: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "drag.png",
        WIN_SCREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "protect.png",
        LADY: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "lady.png",
        HAND_1: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "h1.png",
        HAND_2: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "h2.png",
        AXE: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "axe.png",
        KNIFE: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "hey-orange.png",
        NINJA: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "nunja.png",
        POOP: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "poop.png",
        PORCUPINE: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "porcupine.png",
        YARN: $15b72a9ad2952278$export$842dc6aa1981869f.PROTECT + "yarn.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "protect.png"
    },
    JUMPSCARE: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "background.png",
        WALLPAPER: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "epic-poster.png",
        CHAIR: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "chair.png",
        TABLE: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "table.png",
        TV_PLAY: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "tvPlay.png",
        TV_SCARE: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "tvScare.png",
        CLICK_TEXT: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "click.png",
        FAST_TEXT: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "fast.png",
        JACK: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "jackaboy.png",
        NORMAL_EYES: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "jack-normal-eyes.png",
        SCARED_EYES: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "jack-shit-pantso.png",
        ARM_1: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "arm.png",
        ARM_2: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "arm-2.png",
        BAR: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "bar-brez-crtice.png",
        BAR_LINE: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "crtica-za-bar.png",
        BUTTON: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "button.png",
        BUTTON_PRESSED: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "button-presed.png",
        SCARE_SCREEN: $15b72a9ad2952278$export$842dc6aa1981869f.JUMPSCARE + "jumpscare.png"
    },
    COMEDIAN: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "background.png",
        MIC: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "mic.png",
        JOKE_1_QUESTION: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "5-2.png",
        JOKE_1_ANSWER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "5-1.png",
        JOKE_1_ANSWER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "5-3.png",
        JOKE_1_ANSWER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "5-4.png",
        JOKE_2_QUESTION: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "1-2.png",
        JOKE_2_ANSWER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "1-1.png",
        JOKE_2_ANSWER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "1-3.png",
        JOKE_2_ANSWER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "1-4.png",
        JOKE_3_QUESTION: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "2-3.png",
        JOKE_3_ANSWER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "2-4.png",
        JOKE_3_ANSWER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "2-1.png",
        JOKE_3_ANSWER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "2-2.png",
        JOKE_4_QUESTION: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "3-2.png",
        JOKE_4_ANSWER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "3-4.png",
        JOKE_4_ANSWER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "3-3.png",
        JOKE_4_ANSWER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "3-1.png",
        JOKE_5_QUESTION: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "4-3.png",
        JOKE_5_ANSWER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "4-4.png",
        JOKE_5_ANSWER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "4-2.png",
        JOKE_5_ANSWER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "4-1.png",
        WIN_BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/background.png",
        GHOST_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-1.png",
        GHOST_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-2.png",
        GHOST_3: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-3.png",
        GHOST_4: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-4.png",
        GHOST_5: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-5.png",
        GHOST_6: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-6.png",
        GHOST_7: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-7.png",
        GHOST_8: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/duhc-8.png",
        HANDS_1: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/hands.png",
        HANDS_2: $15b72a9ad2952278$export$842dc6aa1981869f.COMEDIAN + "win-anim/hands2.png",
        LOSEIMAGE: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "comedian-1.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "comedian-2.png"
    },
    PARTY: {
        BACKGROUND_BACK: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ozadje-zadi.png",
        BACKGROUND_FRONT: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ozadje-spredi.png",
        GRAVE: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "grave.png",
        MARTINI: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "martini.png",
        BATS: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "netopirji.png",
        LUNA: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ozdaje-moon.png",
        GHOST_1_BODY: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ghost-1-body.png",
        GHOST_2_BODY: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ghost-2-body.png",
        GHOST_3_BODY: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ghost-3-body.png",
        GHOST_4_BODY: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "ghost-4-body.png",
        DOT_BLUE: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "blue-dot.png",
        DOT_GREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "green-dot.png",
        DOT_PINK: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "pink-dot.png",
        END_BLUE: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "blue-something.png",
        END_GREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "green-something.png",
        END_PINK: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "pink-something.png",
        LIGHT_BLUE: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "blue-light.png",
        LIGHT_GREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "green-light.png",
        LIGHT_PINK: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "pink-light.png",
        LINE_BLUE: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "blue-line.png",
        LINE_GREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "green-line.png",
        LINE_PINK: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "pink-line.png",
        WIN_SCREEN: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "party.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "party.png"
    },
    JSONPARTY: {
        MUSIC: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "music.json",
        FFT: $15b72a9ad2952278$export$842dc6aa1981869f.PARTY + "fft.json"
    },
    DRESSUP: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "ozadje.png",
        GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "ghost.png",
        FABULOUS_BUTTON: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "fabulousButton.png",
        BOY_1: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "boy-1.png",
        BOY_2: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "boy-2.png",
        BOY_3: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "boy-3.png",
        DPOOL_1: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "deadpool-1.png",
        DPOOL_2: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "deadpool-2.png",
        DPOOL_3: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "deadpool-3.png",
        DINO_1: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "dinosaur-1.png",
        DINO_2: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "dinosaur-2.png",
        DINO_3: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "dinosaur-3.png",
        WITCH_1: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "whitch-1.png",
        WITCH_2: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "witch-2.png",
        WITCH_3: $15b72a9ad2952278$export$842dc6aa1981869f.DRESSUP + "witch-3.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "halloween-dress-up.png"
    },
    COLLECT: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "bg.png",
        CANDY_1: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "candy1.png",
        CANDY_2: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "candy2.png",
        CANDY_3: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "candy3.png",
        CANDY_4: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "candy4.png",
        CANDY_5: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "candy5.png",
        PLAYER_0: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "homan.png",
        PLAYER_1: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "raaaaaawr.png",
        PLAYER_2: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "dead-pooly.png",
        PLAYER_3: $15b72a9ad2952278$export$842dc6aa1981869f.COLLECT + "its-a-witch.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "haloween-collect.png"
    },
    SORT: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "ozadje.png",
        SORT_TEXT: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "sort.png",
        PUMPKIN_BACK: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "pumpkin_1.png",
        PUMPKIN_FRONT: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "pumpkin-ozadje.png",
        TRASH_BACK: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "trash.png",
        TRASH_FRONT: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "trash-front.png",
        GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "ghost.png",
        CANDY_1: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "bombombom-3.png",
        CANDY_2: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "bonbon.png",
        CANDY_3: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "chocoloto.png",
        CANDY_4: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "loleh.png",
        CANDY_5: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "nom.png",
        BROCCOLI: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "brocololo.png",
        MEAT: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "meat.png",
        RAZOR: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "razor.png",
        TOOTHBRUSH: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "tootho.png",
        WIN_BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "endbg.png",
        WIN_GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.SORT + "sort-ghost.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "sortCandy.png" //TODO: fix so it is without wood background
    },
    GHOSTBUSTERS: {
        BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "ozadje.png",
        START_GRADIENT: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "gradient.png",
        LEVEL: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "polje.png",
        CANNON: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "shooter.png",
        BALL: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "krogla.png",
        LASER: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "laser.png",
        SPINNER: $15b72a9ad2952278$export$842dc6aa1981869f.GHOSTBUSTERS + "swirly.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "ghostbusters.png"
    },
    HEAVENHELL: {
        HEAVEN_BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "heaven-ozadje.png",
        HELL_BACKGROUND: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "hell-ozadje.png",
        START_CLOUD: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "startCloud.png",
        START_GHOST: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "ghostie.png",
        GHOST_SIDE: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "ghost-side.png",
        SIGN_HEAVEN: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "heaven_sign.png",
        SIGN_HELL: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "hell-sign.png",
        //Hell
        EVIL_DUCK: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "duck-devil.png",
        NORMAL_DUCK: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "suck-a-duck.png",
        //Heaven
        SWING: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "bar.png",
        CLICKER: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "clicker.png",
        ROAD: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "road.png",
        ROAD_FIRE: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "road-of-fire.png",
        STAIRS_START: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "staircaseStart.png",
        STAIRS_MID: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "stairs.png",
        STAIRS_END: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "stairsEnd.png",
        CLOUD_1: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak1.png",
        CLOUD_2: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak2.png",
        CLOUD_3: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak3.png",
        CLOUD_4: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak4.png",
        CLOUD_5: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak5.png",
        CLOUD_7: $15b72a9ad2952278$export$842dc6aa1981869f.HEAVENHELL + "oblak7.png",
        END: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "hell.png"
    },
    CREDITS: {
        HELL: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "credits-hell.png",
        HEAVEN: $15b72a9ad2952278$export$842dc6aa1981869f.ENDSCREEN + "credits-heaven.png"
    }
};


var $fe78b3dd3e9b168c$export$5c5cddbd5caf0d99;
(function(BuildLevel) {
    BuildLevel[BuildLevel["Dev"] = 1] = "Dev";
    BuildLevel[BuildLevel["Prod"] = 2] = "Prod";
})($fe78b3dd3e9b168c$export$5c5cddbd5caf0d99 || ($fe78b3dd3e9b168c$export$5c5cddbd5caf0d99 = {}));
const $fe78b3dd3e9b168c$export$29cd7b75162a9425 = {
    GameVersion: "web1.3.1",
    BuildLevel: 2,
    AnalyticsEnabled: false
};


class $853b94ecf165ba5a$export$9e165481be275d2d {
    static Debug(...args) {
        this.Log(args);
    }
    static Log(args, logLevel = (0, $fe78b3dd3e9b168c$export$5c5cddbd5caf0d99).Dev) {
        if ((0, $fe78b3dd3e9b168c$export$29cd7b75162a9425).BuildLevel > logLevel) return;
        console.log(...args);
    }
}



const $a04efaba6a5d950c$export$30b7662faa307ee = {
    AdblockEnabled: "Ads:Adblock:Enabled",
    AdblockDisabled: "Ads:Adblock:Disabled",
    LocalStorageEnabled: "General:LocalStorage:Enabled",
    LocalStorageDisabled: "General:LocalStorage:Disabled",
    ConfigsLoadOnTime: "Configs:Load:OnTime",
    ConfigsLoadDelayed: "Configs:Load:Delayed",
    ConfigsLoadTimeout: "Configs:Load:Timeout",
    AdsRewardedCompleted: "Ads:Rewarded:Completed",
    AdsRewardedFailed: "Ads:Rewarded:Failed",
    LoadLoadingTime: "Load:Loading:Time"
};
class $a04efaba6a5d950c$export$ca681bfeb2cf0fca extends Phaser.Plugins.BasePlugin {
    constructor(pluginManager){
        super(pluginManager);
    }
    initialize() {
        if (this.analyticsDisabled()) {
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Analytics are disabled.");
            return;
        }
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Initializing analytics");
        // gameanalytics.GameAnalytics.configureBuild(Config.GameVersion);
        const gK = "0e2c1ed3ff77fc8d1a7dcd778f6801ca";
        const sK = "20de031cbd535c2c8d5a6161ed9eb231f28533a0";
    // gameanalytics.GameAnalytics.initialize(gK, sK);
    // gameanalytics.GameAnalytics.setEnabledVerboseLog(true);
    }
    setAdblockStatus(adblockEnabled) {
        this.addDesignEvent(adblockEnabled ? $a04efaba6a5d950c$export$30b7662faa307ee.AdblockEnabled : $a04efaba6a5d950c$export$30b7662faa307ee.AdblockDisabled);
    }
    setLocalStorageSupported(localStorageSupported) {
        this.addDesignEvent(localStorageSupported ? $a04efaba6a5d950c$export$30b7662faa307ee.LocalStorageEnabled : $a04efaba6a5d950c$export$30b7662faa307ee.LocalStorageDisabled);
    }
    addRewardedAdFinishedEvent(completedSuccessfully) {
        this.addDesignEvent(completedSuccessfully ? $a04efaba6a5d950c$export$30b7662faa307ee.AdsRewardedCompleted : $a04efaba6a5d950c$export$30b7662faa307ee.AdsRewardedFailed);
    }
    addGameStartEvent(sceneName) {
    //this.addProgressionEvent(gameanalytics.EGAProgressionStatus.Start, sceneName);
    }
    addGameWinEvent(sceneName) {
    //this.addProgressionEvent(gameanalytics.EGAProgressionStatus.Complete, sceneName);
    }
    addGameLoseEvent(sceneName) {
    //this.addProgressionEvent(gameanalytics.EGAProgressionStatus.Fail, sceneName);
    }
    addFinalScoreEvent(sceneName, score) {
        this.addDesignEventWithValue(sceneName + ":FinalScore", Math.round(score));
    }
    addProgressionEvent(event, sceneName) {
        if (this.analyticsDisabled()) return;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Adding gameanalytics progression event: " + event + ", scene name: " + sceneName);
    // gameanalytics.GameAnalytics.addProgressionEvent(event, sceneName);
    }
    addDesignEvent(designEvent) {
        if (this.analyticsDisabled()) return;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Adding gameanalytics design event: " + designEvent);
    // gameanalytics.GameAnalytics.addDesignEvent(designEvent);
    }
    addDesignEventWithValue(designEvent, eventValue) {
        if (this.analyticsDisabled()) return;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Adding gameanalytics design event: " + designEvent + " with value: " + eventValue);
    // gameanalytics.GameAnalytics.addDesignEvent(designEvent, eventValue);
    }
    analyticsDisabled() {
        return !(0, $ca2834f16a956c4f$export$29cd7b75162a9425).AnalyticsEnabled;
    }
}



class $1bb8838b0c7bd3a3$export$50427b92ba00a41 extends Phaser.Scene {
    constructor(){
        super({
            key: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.LOAD,
            active: true,
            pack: {
                files: [
                    {
                        type: "image",
                        key: "loadBG",
                        url: "./assets/load/background.png"
                    },
                    {
                        type: "image",
                        key: "loadLogo",
                        url: "./assets/load/logo.png"
                    }
                ]
            }
        });
        this.loadStartTime = 0;
    }
    init() {
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("CAUTION: DEV BUILD ENABLED!");
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Local storage supported: " + this.storagePlugin.isLocalStorageSupported());
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Audio enabled: " + this.audioPlugin.isAudioEnabled());
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.ADBLOCKENABLED, false);
        PokiSDK.init().then(()=>{
            // successfully initialized
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("PokiSDK initialized");
        }).catch(()=>{
            this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.ADBLOCKENABLED, true);
            // initialized but the user has an adblock
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("PokiSDK initialization fail: Adblock enabled");
        });
        if ((0, $ca2834f16a956c4f$export$29cd7b75162a9425).BuildLevel < (0, $ca2834f16a956c4f$export$5c5cddbd5caf0d99).Prod) PokiSDK.setDebug(true);
        var _0x4e87 = [
            "LnBva2kuY29t",
            "bG9jYWxob3N0",
            "139KObtWR",
            "6505XySddN",
            "1187125jopCbV",
            "913662FnvCIe",
            "740825sNyBkZ",
            "459327dmigPF",
            "335606FqHNeg",
            "770186hYUBAW",
            "some",
            "top",
            "aHR0cHM6Ly9wb2tpLmNvbS9zaXRlbG9jaw==",
            "location",
            "length",
            "href"
        ];
        var _0x3b7c = function(_0x286367, _0x417686) {
            _0x286367 = _0x286367 - 0x154;
            var _0x4e87dc = _0x4e87[_0x286367];
            return _0x4e87dc;
        };
        (function(_0x5930ec, _0x5bbb0f) {
            var _0x5734eb = _0x3b7c;
            while(true)try {
                var _0x35a8d1 = parseInt(_0x5734eb(0x15d)) + parseInt(_0x5734eb(0x15c)) + -parseInt(_0x5734eb(0x15e)) + parseInt(_0x5734eb(0x159)) * parseInt(_0x5734eb(0x158)) + -parseInt(_0x5734eb(0x15a)) + -parseInt(_0x5734eb(0x15f)) + parseInt(_0x5734eb(0x15b));
                if (_0x35a8d1 === _0x5bbb0f) break;
                else _0x5930ec["push"](_0x5930ec["shift"]());
            } catch (_0x1fa599) {
                _0x5930ec["push"](_0x5930ec["shift"]());
            }
        })(_0x4e87, 0xb1064), !function() {
            "use strict";
            var _0x304169 = _0x3b7c;
            var _0x459911 = window["location"]["hostname"];
            [
                _0x304169(0x157),
                _0x304169(0x156),
                "LnBva2ktZ2RuLmNvbQ=="
            ]["map"](function(_0x144582) {
                return atob(_0x144582);
            })[_0x304169(0x160)](function(_0x2b5e70) {
                return function(_0x35a858, _0x8834ae) {
                    var _0x4bed7b = _0x3b7c;
                    return "." === _0x8834ae["charAt"](0x0) ? -1 !== _0x35a858["indexOf"](_0x8834ae, _0x35a858[_0x4bed7b(0x154)] - _0x8834ae[_0x4bed7b(0x154)]) : _0x8834ae === _0x35a858;
                }(_0x459911, _0x2b5e70);
            }) ||true|| (window[_0x304169(0x163)][_0x304169(0x155)] = atob(_0x304169(0x162)), window[_0x304169(0x161)][_0x304169(0x163)] !== window[_0x304169(0x163)] && (window[_0x304169(0x161)][_0x304169(0x163)] = window[_0x304169(0x163)]));
        }();
        this.initPlugins();
    }
    initPlugins() {
        this.analyticsPlugin.initialize();
    }
    //@ts-ignore
    //Loads all images for given scene (parameter: CONST.SCENENAME)
    loadSceneImages(scene) {
        for(let prop in scene)this.load.image(scene[prop], scene[prop]);
    }
    loadStartSceneImages() {
        this.loadSceneImages((0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS);
        this.loadSceneImages((0, $15b72a9ad2952278$export$fadd21211b40c08a).MENU);
    }
    loadStartAudio() {
        this.load.audio((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SOUNDTRACK_SHORT, (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SOUNDTRACK_SHORT);
        this.load.audio((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.EERIE, (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.EERIE);
    }
    loadFonts() {
        this.load.bitmapFont((0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.ATLAS, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.ATLAS, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.XML);
    }
    preload() {
        this.loadStartTime = this.time.now;
        this.add.image(0, -32, "loadBG").setOrigin(0, 0).setScale(0.6824);
        this.add.image(426.5, 195, "loadLogo").setScale(0.7);
        this.loadStartSceneImages();
        this.loadFonts();
        this.loadStartAudio();
        //create loading bar
        let loadingBar = this.add.graphics({
            fillStyle: {
                color: 0x48aec7 //white
            }
        }).setDepth(1);
        this.add.graphics().fillStyle(0xffffff, 0.5).fillRect(150, this.game.renderer.height / 2 + 90, this.game.renderer.width - 300, 50);
        PokiSDK.gameLoadingStart();
        this.load.on("progress", (percent)=>{
            PokiSDK.gameLoadingProgress({
                percentageDone: percent
            });
            loadingBar.fillRect(150, this.game.renderer.height / 2 + 90, (this.game.renderer.width - 300) * percent, 50);
        });
        this.load.on("complete", ()=>{
            PokiSDK.gameLoadingFinished();
            var loadTime = this.time.now - this.loadStartTime;
            this.analyticsPlugin.addDesignEventWithValue((0, $a04efaba6a5d950c$export$30b7662faa307ee).LoadLoadingTime, loadTime);
        });
        this.hidePreloadScreen();
    }
    create() {
        const adblockEnabled = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.ADBLOCKENABLED);
        this.analyticsPlugin.setAdblockStatus(adblockEnabled);
        this.analyticsPlugin.setLocalStorageSupported(this.storagePlugin.isLocalStorageSupported());
        this.scene.launch((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK);
        this.scene.launch((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROGRESSIVE_LOAD);
        this.scene.start((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.MENU);
    }
    hidePreloadScreen() {
        var preload = document.getElementById("preloadDiv");
        preload.style.display = "none";
        var canvas = document.getElementsByTagName("canvas")[0];
        canvas.style.zIndex = 1;
    }
}



class $34c0e17191e03c56$export$2e2bcd8739ae039 extends Phaser.GameObjects.Container {
    constructor(scene, x, y, bgTexture, buttonText, onClick, fontSize = 40){
        super(scene, x, y);
        //create bg, create text
        this.bgImage = this.scene.add.image(0, 0, bgTexture);
        let text = this.scene.add.bitmapText(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.ATLAS, buttonText, fontSize).setOrigin(0.5, 0.35);
        this.add([
            this.bgImage,
            text
        ]);
        scene.add.existing(this);
        this.setDepth(3);
        this.bgImage.on("pointerup", ()=>{
            onClick();
        });
        this.bgImage.on("pointerover", ()=>{
            this.animateButton(true);
        });
        this.bgImage.on("pointerout", ()=>{
            this.animateButton(false);
        });
        this.overrideInteractive(true);
    }
    animateButton(animIn) {
        if (this.buttonTween) this.buttonTween.stop();
        this.buttonTween = this.scene.tweens.add({
            targets: this,
            scaleX: animIn ? 1.05 : 1,
            scaleY: animIn ? 1.05 : 1,
            ease: "Quad.easeInOut",
            duration: 75,
            repeat: 0,
            yoyo: false
        });
    }
    overrideInteractive(interactive) {
        if (interactive) this.bgImage.setInteractive({
            useHandCursor: true,
            pixelPerfect: true
        });
        else this.bgImage.disableInteractive();
    }
}



class $30cfeaa254875b8b$export$fe1abc4519a61930 extends Phaser.Scene {
    constructor(){
        super({
            key: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.MENU
        });
        this.firstScene = (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.FLY;
        this.gameCompleted = false;
    }
    init() {
        this.resetRegistry();
        this.gameCompleted = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.GAME_COMPLETED);
    }
    resetRegistry() {
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.SKIPUSED, false);
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.JUMPSCARE_ATTEMPTS, 1);
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.GHOSTBUSTERS_ATTEMPTED, false);
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.HELL_COMPLETED, true);
    }
    preload() {}
    create() {
        this.createParticles();
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).MENU.BACKGROUND).setOrigin(0, 0).setDepth(0);
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).MENU.OVERLAY).setOrigin(0, 0).setDepth(2);
        let canContinue = this.canContinueGame();
        let playButton = new (0, $34c0e17191e03c56$export$2e2bcd8739ae039)(this, this.game.renderer.width / 2, canContinue ? 370 : 400, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.RED, "PLAY", ()=>{
            this.startGame();
        });
        if (canContinue) {
            let continueButton = new (0, $34c0e17191e03c56$export$2e2bcd8739ae039)(this, this.game.renderer.width / 2, 430, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.PURPLE, "CONTINUE", ()=>{
                this.continueGame();
            }, 30);
        }
        if (!this.gameCompleted) {
            var soundtrackScene = this.scene.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK);
            soundtrackScene.pause();
        }
    }
    createParticles() {
        var particles = this.add.particles((0, $15b72a9ad2952278$export$fadd21211b40c08a).MENU.STAR_PARTICLE).setDepth(1);
        var particleConfig = {
            active: true,
            visible: true,
            on: false,
            radial: true,
            frequency: 500,
            gravityY: 0,
            timeScale: 1,
            maxParticles: 300,
            blendMode: 0,
            lifespan: 10000,
            alpha: {
                start: 0,
                end: 1,
                ease: "Quad.easeOut"
            },
            scale: {
                start: 1,
                end: 0,
                ease: "Linear"
            },
            quantity: {
                ease: "Linear",
                min: 0,
                max: 10
            },
            emitZone: {
                source: new Phaser.Geom.Rectangle(-600, -300, 1200, 480),
                type: "random"
            },
            speed: {
                ease: "Linear",
                min: 0,
                max: 27
            },
            x: 400,
            y: 300
        };
        this.starParticles = particles.createEmitter(particleConfig);
        this.starParticles.start();
        this.starParticles.explode(50, 400, 300);
        this.starParticles.flow(500, 7);
    }
    startGame() {
        this.scene.start(this.firstScene);
        this.startSoundtrack();
    }
    continueGame() {
        let progressScene = this.storagePlugin.getItem((0, $15b72a9ad2952278$export$fadd21211b40c08a).STORAGE_KEYS.PROGRESS);
        this.scene.start(progressScene);
        this.startSoundtrack();
    }
    canContinueGame() {
        //progress is saved and its not the credits scene
        let progress = this.storagePlugin.getItem((0, $15b72a9ad2952278$export$fadd21211b40c08a).STORAGE_KEYS.PROGRESS);
        return progress && progress != (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.CREDITS;
    }
    startSoundtrack() {
        if (!this.gameCompleted) {
            var soundtrackScene = this.scene.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK);
            soundtrackScene.play();
            soundtrackScene.FadeSoundtrack(1, 1000);
            soundtrackScene.FadeOutEerie();
        }
    }
}




class $7e3af3e6538b9494$export$ec537e24d5ef2139 extends Phaser.Scene {
    constructor(){
        super({
            key: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK
        });
    }
    init() {
        this.startVolume = 1;
        this.targetVolume = 1;
        this.timer = 1000;
        this.timerEerie = 0;
        this.timeToChangeVolume = 1000;
        this.isFading = false;
        this.isFadingEerie = false;
    }
    preload() {}
    FadeSoundtrack(targetVolume, timeToChange) {
        this.startVolume = this.music.volume;
        this.targetVolume = targetVolume;
        this.timeToChangeVolume = timeToChange;
        this.timer = 0;
        this.isFading = true;
    }
    FadeOutEerie() {
        this.isFadingEerie = true;
    }
    play() {
        this.music.play();
        this.music.setSeek(87);
    }
    pause() {
        this.music.pause();
    }
    create() {
        this.music = this.sound.add((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SOUNDTRACK_SHORT, {
            loop: true,
            mute: false,
            volume: 0
        });
        this.music.setVolume(0);
        this.music.pause();
        this.creepySound = this.sound.add((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.EERIE, {
            loop: true,
            mute: false,
            volume: 1
        });
        this.creepySound.play();
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK, this);
    }
    update(time, delta) {
        this.fadeVolume(delta);
        this.fadeEerie(delta);
    }
    fadeVolume(delta) {
        if (!this.isFading) return;
        this.timer += delta;
        if (this.timer > this.timeToChangeVolume) {
            this.music.setVolume(this.targetVolume);
            this.isFading = false;
            return;
        }
        this.music.setVolume(Phaser.Math.Linear(this.startVolume, this.targetVolume, this.timer / this.timeToChangeVolume));
    }
    fadeEerie(delta) {
        if (!this.isFadingEerie) return;
        this.timer += delta;
        if (this.timer > 1000) {
            this.creepySound.setVolume(0);
            this.creepySound.stop();
            this.isFadingEerie = false;
            return;
        }
        this.creepySound.setVolume(Phaser.Math.Linear(1, 0, this.timer / 1000));
    }
    //Called when actual soundtrack is loaded
    switchMusic() {
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Music switched!");
        var newMusic = this.sound.add((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SOUNDTRACK, {
            loop: true,
            mute: false,
            seek: this.music.seek
        });
        newMusic.play();
        if (this.music.isPaused) newMusic.pause();
        newMusic.setSeek(this.music.seek);
        newMusic.setVolume(this.music.volume);
        this.music.stop();
        this.music = newMusic;
    }
}




class $8c2a354ad3c87809$export$2e2bcd8739ae039 extends Phaser.GameObjects.Image {
    constructor(scene, x, y, audioPlugin){
        super(scene, x, y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SOUND_ON);
        this.audioPlugin = audioPlugin;
        this.setInteractive({
            useHandCursor: true
        });
        this.on("pointerup", this.handleClick);
        this.updateTexture();
        this.setScale(0.7);
        this.scene.add.existing(this);
    }
    handleClick() {
        if (this.scene.rewardedBreakRequested) return;
        this.audioPlugin.toggleAudioEnabled();
        this.updateTexture();
    }
    updateTexture() {
        this.setTexture(this.audioPlugin.isAudioEnabled() ? (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SOUND_ON : (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SOUND_OFF);
    }
}





class $10435e2275358e18$export$ae09207a2c1c4714 {
    constructor(image, animationJson, animFPS = 60){
        this.animTimer = 0;
        this.isAnimating = false;
        this.loop = false;
        this.playbackSpeed = 1;
        this.xOffset = 0;
        this.yOffset = 0;
        this.angleOffset = 0;
        this.scaleMultiplierX = 1;
        this.scaleMultiplierY = 1;
        this.xOverride = 0;
        this.yOverride = 0;
        this.finishCallback = ()=>{};
        this.image = image;
        this.animationJson = animationJson;
        this.animFPS = animFPS;
        this.resetAnimTimer();
        this.isAnimating = false;
        this.duration = 1000 * animationJson.frames.length / animFPS;
    }
    resetAnimTimer() {
        this.animTimer = this.playbackSpeed < 0 ? this.duration : 0;
    }
    setLoop(loop) {
        this.loop = loop;
        return this;
    }
    setPlaybackSpeed(speed) {
        this.playbackSpeed = speed;
        this.resetAnimTimer();
        return this;
    }
    setOffset(x, y) {
        this.xOffset = x;
        this.yOffset = y;
        return this;
    }
    setAngleOffset(angle) {
        this.angleOffset = angle;
        return this;
    }
    setScaleMultiplier(scaleMultiplierX, scaleMultiplierY = 0) {
        this.scaleMultiplierX = scaleMultiplierX;
        this.scaleMultiplierY = scaleMultiplierY === 0 ? scaleMultiplierX : scaleMultiplierY;
        return this;
    }
    setDepth(depth) {
        this.image.setDepth(depth);
        return this;
    }
    setScrollFactor(x, y) {
        this.image.setScrollFactor(x, y);
        return this;
    }
    setDraggable(input) {
        this.image.setInteractive({
            useHandCursor: true
        });
        input.setDraggable(this.image);
        return this;
    }
    setPositionOverride(x, y, overrideY = true) {
        this.xOverride = x;
        if (overrideY) this.yOverride = y;
        return this;
    }
    setAnimFinishCallback(callback) {
        this.finishCallback = callback;
        return this;
    }
    setImageOrigin(x, y) {
        this.image.setOrigin(x, y);
        return this;
    }
    setImageInteractive() {
        this.image.setInteractive();
        return this;
    }
    GetPositionOverride() {
        return {
            x: this.xOverride,
            y: this.yOverride
        };
    }
    GetOffset() {
        return {
            x: this.xOffset,
            y: this.yOffset
        };
    }
    GetImage() {
        return this.image;
    }
    update(delta) {
        if (this.isAnimating) {
            this.positionImageOnAnimation(this.animTimer);
            this.updateTimer(delta);
        }
    }
    updateTimer(delta) {
        this.animTimer += delta * this.playbackSpeed;
        if (this.isAnimationFinished()) {
            if (this.loop) this.resetAnimTimer();
            else {
                this.isAnimating = false;
                this.finishCallback();
            }
        }
    }
    isAnimationFinished() {
        return this.playbackSpeed > 0 && this.animTimer >= this.duration || this.playbackSpeed < 0 && this.animTimer <= 0;
    }
    start() {
        this.isAnimating = true;
        return this;
    }
    pause() {
        this.isAnimating = false;
        return this;
    }
    stop() {
        this.resetAnimTimer();
        this.isAnimating = false;
        return this;
    }
    setAnimation(animationJson) {
        this.animationJson = animationJson;
        this.resetAnimTimer();
        this.duration = 1000 * animationJson.frames.length / this.animFPS;
        return this;
    }
    setImagePosition(animationTime) {
        this.positionImageOnAnimation(animationTime);
        return this;
    }
    IsAnimating() {
        return this.isAnimating;
    }
    positionImageOnAnimation(timer) {
        //Get frame
        var frameIndex = Math.floor(timer * (this.animFPS / 1000));
        if (frameIndex >= this.animationJson.frames.length) frameIndex = this.animationJson.frames.length - 1;
        var frame = this.animationJson.frames[frameIndex];
        //position image to frame
        this.image.setPosition(frame.x + this.xOffset + this.xOverride, frame.y + this.yOffset + this.yOverride).setScale(parseFloat(frame.scaleX) * this.scaleMultiplierX, parseFloat(frame.scaleY) * this.scaleMultiplierY).setAngle(parseFloat(frame.angle) + this.angleOffset);
    }
}


class $7bc149abaca018eb$export$a95ae84b8ab23d68 extends Phaser.Scene {
    constructor(options){
        super({
            key: options.sceneName
        });
        this.rewardedBreakRequested = false;
        this.sceneName = options.sceneName;
        this.nextScene = options.nextScene;
        this.duration = options.duration;
        this.showCountdown = typeof options.showCountdown === "undefined" ? true : options.showCountdown;
        this.startScreenColor = options.startScreenColor;
        this.startText = options.startText;
        this.startTextYOrigin = typeof options.startTextYOrigin === "undefined" ? 0.25 : options.startTextYOrigin;
        this.startTextColor = options.startTextColor;
        this.startTextSize = typeof options.startTextSize === "undefined" ? 150 : options.startTextSize;
        this.failImage = !!options.endScreen ? options.endScreen : "";
        this.timeToStart = typeof options.timeToStart === "undefined" ? 1000 : options.timeToStart; //options.timeToStart;
        this.buttonPositions = options.endButtons;
        this.targetFPS = !!options.targetFPS ? options.targetFPS : 60;
        this.waitingToLoad = false;
    }
    init() {
        this.animations = [];
        this.progressiveLoadScene = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROGRESSIVE_LOAD);
        this.rewardedBreakRequested = false;
        this._init();
    }
    preload() {
        this._preload();
    }
    create() {
        this.saveProgress();
        this.createStartUI();
        this.createGameplayUI();
        this.createLoseUI();
        this.createLoadUI();
        var loaded = this.areAllAssetsLoaded();
        if (loaded) this._create();
        else this.waitingToLoad = true;
        if ((0, $ca2834f16a956c4f$export$29cd7b75162a9425).BuildLevel < (0, $ca2834f16a956c4f$export$5c5cddbd5caf0d99).Prod) this.skipKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P);
        this.changeGameState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.START);
        this.audioPlugin.beforeCommercialBreak();
        PokiSDK.commercialBreak().then(()=>{
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("End of commercial break");
            this.audioPlugin.afterCommercialBreak();
            if (loaded) this.createStartTimer();
            else {
                this.createWaitingUI();
                this.waitingToLoad = true;
            }
            this.onCommercialEnded();
        });
    }
    saveProgress() {
        this.storagePlugin.setItem((0, $15b72a9ad2952278$export$fadd21211b40c08a).STORAGE_KEYS.PROGRESS, this.sceneName);
    }
    //For first minigame only
    createWaitingUI() {
        var spinner = this.add.image(this.game.renderer.width / 2, this.game.renderer.height - 50, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SPINNER).setDepth(1002).setTint(this.startTextColor).setVisible(true);
        this.tweens.add({
            targets: spinner,
            angle: "+=360",
            duration: 1000,
            ease: "Linear",
            repeat: -1
        });
    }
    createStartUI() {
        var startBackground = this.add.graphics({
            fillStyle: {
                color: this.startScreenColor
            }
        }).fillRect(0, 0, this.game.renderer.width, this.game.renderer.height).setDepth(1000).setVisible(false);
        /* var startText = this.add
                .text(this.game.renderer.width / 2,
                        this.game.renderer.height/2,
                        this.startText,
                        { fontSize: "120px", color: this.startTextColor})
                .setOrigin(0.5)
                .setDepth(1001)
                .setVisible(false);
        */ this.startTextObject = this.add.bitmapText(this.game.renderer.width / 2, this.game.renderer.height / 2, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.ATLAS, this.startText, this.startTextSize).setOrigin(0.5, this.startTextYOrigin).setDepth(1001).setVisible(false).setTint(this.startTextColor).setCenterAlign();
        this.startUI = this.add.group([
            startBackground,
            this.startTextObject
        ], {
            active: false
        });
        this.startUI.getChildren().forEach((child)=>{
            child.setScrollFactor(0);
        });
    }
    createGameplayUI() {
        //Generate progressBar
        this.progressBar = this.add.graphics({
            fillStyle: {
                color: 0x151515,
                alpha: this.showCountdown ? 0.7 : 0
            }
        }).fillRect(0, 0, this.game.renderer.width, 14).setDepth(100).setVisible(false);
        this.progressBarBackground = this.add.graphics({
            fillStyle: {
                color: 0x292929,
                alpha: this.showCountdown ? 0.30 : 0
            }
        }).fillRect(0, 0, this.game.renderer.width, 14).setDepth(99).setVisible(false);
        this.gameplayUI = this.add.group([
            this.progressBar,
            this.progressBarBackground
        ], {
            active: false
        });
        this.gameplayUI.getChildren().forEach((child)=>{
            child.setScrollFactor(0);
        });
    }
    createLoseUI() {
        var elements = [];
        if (this.failImage != "") {
            let loseImage = this.add.image(0, 0, this.failImage).setOrigin(0, 0).setDepth(1002).setVisible(false);
            elements.push(loseImage);
        }
        let skipEnabled = typeof this.buttonPositions.skipEnabled === "undefined" ? true : this.buttonPositions.skipEnabled;
        let angle = typeof this.buttonPositions.rotation === "undefined" ? 0 : this.buttonPositions.rotation;
        if (!skipEnabled || this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.ADBLOCKENABLED) || this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.SKIPUSED)) {
            let normalNoSkipButton = this.addButton(this.buttonPositions.normalNoSkip.x, this.buttonPositions.normalNoSkip.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.TRYAGAIN, this.buttonPositions.normalNoSkip.scale, ()=>{
                this.restartGame();
            });
            normalNoSkipButton.setAngle(angle);
            elements.push(normalNoSkipButton);
        } else {
            let normalWithSkipButton = this.addButton(this.buttonPositions.normalWithSkip.x, this.buttonPositions.normalWithSkip.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.TRYAGAIN, this.buttonPositions.normalWithSkip.scale, ()=>{
                this.restartGame();
            });
            normalWithSkipButton.setAngle(angle);
            elements.push(normalWithSkipButton);
            let skipButton = this.addButton(this.buttonPositions.skip.x, this.buttonPositions.skip.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SKIP, this.buttonPositions.skip.scale, ()=>{
                this.skipLevel();
            });
            skipButton.setAngle(angle);
            elements.push(skipButton);
        }
        let soundButton = new (0, $8c2a354ad3c87809$export$2e2bcd8739ae039)(this, this.game.renderer.width - 10, this.game.renderer.height - 10, this.audioPlugin).setOrigin(1, 1).setDepth(1003).setVisible(false);
        elements.push(soundButton);
        this.loseUI = this.add.group(elements, {
            active: false
        });
        this.loseUI.getChildren().forEach((child)=>{
            child.setScrollFactor(0);
        });
    }
    createLoadUI() {
        var ns = this.scene.get(this.nextScene);
        var loadBackground = this.add.graphics({
            fillStyle: {
                color: ns.startScreenColor
            }
        }).fillRect(0, 0, this.game.renderer.width, this.game.renderer.height).setDepth(1000).setVisible(false);
        var loadText = this.add.bitmapText(this.game.renderer.width / 2, this.game.renderer.height / 2, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FONT.ATLAS, ns.startText, 150).setOrigin(0.5, ns.startTextYOrigin).setDepth(1001).setVisible(false).setTint(ns.startTextColor).setCenterAlign();
        var spinner = this.add.image(this.game.renderer.width / 2, this.game.renderer.height - 50, (0, $15b72a9ad2952278$export$fadd21211b40c08a).BUTTONS.SPINNER).setDepth(1002).setTint(ns.startTextColor).setVisible(false);
        this.tweens.add({
            targets: spinner,
            angle: "+=360",
            duration: 1000,
            ease: "Linear",
            repeat: -1
        });
        this.loadUI = this.add.group([
            loadBackground,
            loadText,
            spinner
        ], {
            active: false
        });
        this.loadUI.getChildren().forEach((child)=>{
            child.setScrollFactor(0);
        });
    }
    addButton(x, y, key, scale, onClick) {
        let button = this.add.image(x, y, key).setScale(scale, scale).setVisible(false).setDepth(1003).setInteractive({
            useHandCursor: true
        });
        button.on("pointerup", onClick, this);
        return button;
    }
    changeGameState(newState) {
        var isNewStateValid = true;
        if (newState === this.currentState) {
            isNewStateValid = false;
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Cant switch to same state! Current state: " + this.currentState);
        }
        //Handle state enter and check if new state is valid
        switch(newState){
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.START:
                this.setChildrenVisible(this.startUI, true);
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING:
                PokiSDK.gameplayStart();
                this.setChildrenVisible(this.gameplayUI, true);
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOSE:
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.WIN:
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOADNEXTLEVEL:
                this.setChildrenVisible(this.loadUI, true);
                break;
            default:
                (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Can't switch to invalid state: " + newState);
                isNewStateValid = false;
                break;
        }
        if (!isNewStateValid) return;
        //Handle state exit
        switch(this.currentState){
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.START:
                this.setChildrenVisible(this.startUI, false);
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING:
                PokiSDK.gameplayStop();
                this.setChildrenVisible(this.gameplayUI, false);
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOSE:
                this.setChildrenVisible(this.loseUI, false);
                break;
            case (0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.WIN:
                break;
        }
        this.currentState = newState;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Minigame state changed to: " + this.currentState);
    }
    showLoseUI(show) {
        this.setChildrenVisible(this.loseUI, show);
    }
    setChildrenVisible(group, visible) {
        //@ts-ignore
        group.getChildren().forEach((child)=>{
            child.setVisible(visible);
        });
    }
    update(time, delta) {
        if ((0, $ca2834f16a956c4f$export$29cd7b75162a9425).BuildLevel < (0, $ca2834f16a956c4f$export$5c5cddbd5caf0d99).Prod) {
            if (Phaser.Input.Keyboard.JustDown(this.skipKey)) {
                (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Skip level pressed");
                this.clearTimers();
                this.winGame();
            }
        }
        //For first minigame only
        if (this.waitingToLoad) {
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Waiting to load...");
            if (this.areAllAssetsLoaded()) {
                this.waitingToLoad = false;
                this.restartGame();
            }
            return;
        }
        if (this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) this.updateGameplayTimer();
        if (this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOADNEXTLEVEL)) {
            if (this.areAllAssetsLoaded(this.nextScene)) this.loadNextScene();
        }
        this._update(time, delta);
        this.updateAnimations(delta);
    }
    updateGameplayTimer() {
        if (!this.gameplayTimer) return;
        //update progress bar
        this.progressBar.setX(-this.game.renderer.width * this.gameplayTimer.getProgress()).setVisible(true);
    }
    updateAnimations(delta) {
        this.animations.forEach((anim)=>{
            anim.update(delta);
        });
    }
    createStartTimer() {
        this.startTimer = this.time.addEvent({
            delay: this.timeToStart,
            callback: this.startGame,
            callbackScope: this
        });
    }
    startGame() {
        this.changeGameState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING);
        this.clearTimers();
        this.gameplayTimer = this.time.addEvent({
            delay: this.duration,
            callback: this.triggerTimeout,
            callbackScope: this
        });
        this.onGameStarted();
        this.analyticsPlugin.addGameStartEvent(this.sceneName);
    }
    onGameStarted() {}
    onCommercialEnded() {}
    triggerTimeout() {
        this.clearTimers();
        this._timeout();
    }
    clearTimers() {
        if (this.startTimer) {
            this.startTimer.paused = true;
            this.startTimer.remove();
        }
        if (this.gameplayTimer) {
            this.gameplayTimer.paused = true;
            this.gameplayTimer.remove();
        }
        if (this.winGameTimer) {
            this.winGameTimer.paused = true;
            this.winGameTimer.remove();
        }
    }
    //winGame, load next level after delay
    winGame(animationDelay = 0) {
        if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
        this.changeGameState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.WIN);
        this.clearTimers();
        this.winGameTimer = this.time.addEvent({
            delay: animationDelay,
            callback: this.handleWinGame,
            callbackScope: this
        });
        this.analyticsPlugin.addGameWinEvent(this.sceneName);
        this.playWinAudio();
    }
    //Win animation ended
    handleWinGame() {
        PokiSDK.happyTime(0.5);
        this._afterWin();
        this.loadNextScene();
    }
    loadNextScene() {
        if (this.areAllAssetsLoaded(this.nextScene)) {
            this.scene.stop(this.sceneName);
            this.scene.start(this.nextScene);
        } else this.changeGameState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOADNEXTLEVEL);
    }
    loseGame(animationDelay = 0) {
        if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
        this.changeGameState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.LOSE);
        this.clearTimers();
        this.winGameTimer = this.time.addEvent({
            delay: animationDelay,
            callback: this.handleLoseGame,
            callbackScope: this
        });
        this.analyticsPlugin.addGameLoseEvent(this.sceneName);
        this.playLoseAudio();
    }
    //Lose animation ended
    handleLoseGame() {
        this.showLoseUI(true);
        this._afterLoss();
    }
    restartGame() {
        if (this.rewardedBreakRequested) return;
        this.scene.stop(this.sceneName);
        this.scene.start(this.sceneName);
    }
    skipLevel() {
        if (this.rewardedBreakRequested) return;
        this.rewardedBreakRequested = true;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("skip level pressed");
        this.audioPlugin.beforeCommercialBreak();
        PokiSDK.rewardedBreak().then((adCompleted)=>{
            this.audioPlugin.afterCommercialBreak();
            this.analyticsPlugin.addRewardedAdFinishedEvent(adCompleted);
            //skip level if ad completed!
            if (adCompleted) this.loadNextScene();
            else this.rewardedBreakRequested = false;
        });
    }
    addBackgroundImage(imageKey) {
        return this.add.image(0, 0, imageKey).setDepth(0).setOrigin(0, 0);
    }
    isCurrentState(state) {
        return this.currentState === state;
    }
    changeGameplayTimerDuration(change) {
        if (!this.gameplayTimer) return;
        this.gameplayTimer.elapsed -= change;
    }
    addAnimation(imageKey, jsonKey, fps = 60) {
        let image = this.add.image(0, 0, imageKey).setScale(0, 0);
        let json = this.cache.json.get(jsonKey);
        var animation = new (0, $10435e2275358e18$export$ae09207a2c1c4714)(image, json, fps);
        this.animations.push(animation);
        return animation;
    }
    getUnityY(phaserY) {
        return 4.5 - phaserY * 9 / 480;
    }
    getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    getDetune() {
        return this.getRandomInt(-200, 200);
    }
    areAllAssetsLoaded(scene = this.sceneName) {
        return this.progressiveLoadScene.isSceneLoaded(scene);
    }
    smoothMoveObject(gameObject, targetX, targetY, durationMs) {
        this.tweens.add({
            targets: gameObject,
            x: targetX,
            y: targetY,
            ease: "Cubic",
            duration: durationMs,
            repeat: 0,
            yoyo: false
        });
    }
    fadeSoundtrack(targetVolume, timeToChange) {
        this.scene.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK).FadeSoundtrack(targetVolume, timeToChange);
    }
    playWinAudio() {
        this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.WIN, {
            detune: this.getDetune(),
            volume: 1.0
        });
    }
    playLoseAudio() {
        this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.LOSE, {
            detune: this.getDetune(),
            volume: 0.4
        });
    }
}


class $7f6434558235e63d$export$def92445f4ee0fe0 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.DRESSUP,
            duration: 20000,
            showCountdown: false,
            startScreenColor: 0x4B97FF,
            startText: "DRESS\nUP!",
            startTextColor: 0x323232,
            startTextYOrigin: 0.35,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COLLECT,
            endButtons: {
                skipEnabled: false,
                rotation: -10,
                normalNoSkip: {
                    x: 565,
                    y: 327,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 386,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 386,
                    scale: 1.30
                }
            }
        });
        //Images
        //values
        this.clothesConfigs = [
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.BOY_1,
                startPos: {
                    x: 482,
                    y: 56
                },
                dressedPos: {
                    x: 295,
                    y: 177
                },
                type: 0,
                costumeSet: 0,
                scale: 1.02,
                depth: 21
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.BOY_2,
                startPos: {
                    x: 519,
                    y: 165
                },
                dressedPos: {
                    x: 295,
                    y: 258
                },
                type: 1,
                costumeSet: 0,
                scale: 1.02,
                depth: 21
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.BOY_3,
                startPos: {
                    x: 726,
                    y: 174
                },
                dressedPos: {
                    x: 282,
                    y: 312
                },
                type: 2,
                costumeSet: 0,
                scale: 1.02,
                depth: 21
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DPOOL_1,
                startPos: {
                    x: 586,
                    y: 66
                },
                dressedPos: {
                    x: 297.5,
                    y: 184.5
                },
                type: 0,
                costumeSet: 2,
                scale: 1.02,
                depth: 22
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DPOOL_2,
                startPos: {
                    x: 516,
                    y: 218
                },
                dressedPos: {
                    x: 296,
                    y: 257.5
                },
                type: 1,
                costumeSet: 2,
                scale: 1.02,
                depth: 22
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DPOOL_3,
                startPos: {
                    x: 725,
                    y: 216
                },
                dressedPos: {
                    x: 283,
                    y: 313
                },
                type: 2,
                costumeSet: 2,
                scale: 1.02,
                depth: 22
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DINO_1,
                startPos: {
                    x: 671,
                    y: 54
                },
                dressedPos: {
                    x: 282.5,
                    y: 169.5
                },
                type: 0,
                costumeSet: 1,
                scale: 1.02,
                depth: 23
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DINO_2,
                startPos: {
                    x: 506,
                    y: 267
                },
                dressedPos: {
                    x: 281,
                    y: 259
                },
                type: 1,
                costumeSet: 1,
                scale: 1.02,
                depth: 23
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.DINO_3,
                startPos: {
                    x: 720,
                    y: 265
                },
                dressedPos: {
                    x: 279,
                    y: 313
                },
                type: 2,
                costumeSet: 1,
                scale: 1.02,
                depth: 23
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.WITCH_1,
                startPos: {
                    x: 755,
                    y: 62
                },
                dressedPos: {
                    x: 294,
                    y: 119
                },
                type: 0,
                costumeSet: 3,
                scale: 1.02,
                depth: 24
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.WITCH_2,
                startPos: {
                    x: 519,
                    y: 317
                },
                dressedPos: {
                    x: 295,
                    y: 258
                },
                type: 1,
                costumeSet: 3,
                scale: 1.02,
                depth: 24
            },
            {
                imageName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.WITCH_3,
                startPos: {
                    x: 722,
                    y: 313
                },
                dressedPos: {
                    x: 282,
                    y: 311
                },
                type: 2,
                costumeSet: 3,
                scale: 1.02,
                depth: 24
            }
        ];
        this.dressedPositions = [
            {
                type: 0,
                x: 300,
                y: 187
            },
            {
                type: 1,
                x: 299,
                y: 262
            },
            {
                type: 2,
                x: 295,
                y: 320
            }
        ];
        this.maxDropDistance = 80;
        //logic vars
        this.clothes = [];
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.clothes = [];
        this.dressedClothes = Array.apply(null, Array(3)).map(function() {});
    }
    _preload() {}
    _create() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.BACKGROUND);
        this.add.image(283, 234, (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.GHOST).setDepth(1);
        this.createFinishButton();
        this.createClothes();
    }
    createFinishButton() {
        let finishButton = this.add.image(625, 431, (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP.FABULOUS_BUTTON).setDepth(50).setInteractive({
            useHandCursor: true
        });
        finishButton.on("pointerup", ()=>{
            this.checkForWin();
        });
    }
    checkForWin() {
        var selectedSet = -1;
        var win = true;
        for(var i = 0; i < this.dressedClothes.length; i++){
            if (this.dressedClothes[i] == null) {
                win = false;
                break;
            }
            if (selectedSet === -1) selectedSet = this.dressedClothes[i].config.costumeSet;
            if (this.dressedClothes[i].config.costumeSet !== selectedSet) {
                win = false;
                break;
            }
        }
        if (win) this.triggerWin(selectedSet);
        else this.triggerLose();
    }
    createClothes() {
        this.clothesConfigs.forEach((clothesConfig)=>{
            //Spawn clothes at startPos
            let cloth = this.add.image(clothesConfig.startPos.x, clothesConfig.startPos.y, clothesConfig.imageName).setInteractive({
                useHandCursor: true
            }).setScale(clothesConfig.scale, clothesConfig.scale).setDepth(clothesConfig.depth);
            cloth.config = clothesConfig;
            cloth.isDressed = false;
            cloth.setDressed = (dressed)=>{
                cloth.isDressed = dressed;
                if (cloth.isDressed) {
                    //Move to dressed position
                    this.smoothMoveObject(cloth, cloth.config.dressedPos.x, cloth.config.dressedPos.y, 200);
                    //cloth.x = cloth.config.dressedPos.x;
                    //cloth.y = cloth.config.dressedPos.y;
                    cloth.setDepth(9 + cloth.config.type);
                } else {
                    //Move to start position
                    this.smoothMoveObject(cloth, cloth.config.startPos.x, cloth.config.startPos.y, 400);
                    //cloth.x = cloth.config.startPos.x;
                    //cloth.y = cloth.config.startPos.y;
                    cloth.setDepth(cloth.config.depth);
                }
            };
            cloth.dress = ()=>{
                cloth.setDressed(true);
                if (this.dressedClothes[cloth.config.type]) this.dressedClothes[cloth.config.type].setDressed(false);
                this.dressedClothes[cloth.config.type] = cloth;
            };
            this.input.setDraggable(cloth);
        });
        this.input.on("dragstart", function(pointer, gameObject) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            if (gameObject.isDressed) return;
            this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB, {
                detune: this.getDetune()
            });
        }, this);
        this.input.on("drag", function(pointer, gameObject, dragX, dragY) {
            if (gameObject.isDressed) return;
            gameObject.x = dragX;
            gameObject.y = dragY;
        });
        this.input.on("dragend", function(pointer, gameObject, dropped) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            if (gameObject.isDressed) return;
            if (this.canDress(gameObject)) {
                gameObject.dress();
                this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.BOUNCE, {
                    detune: this.getDetune()
                });
            } else {
                gameObject.setDressed(false);
                this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB, {
                    detune: this.getDetune()
                });
            }
        }, this);
    }
    canDress(gameObject) {
        for (let pos of this.dressedPositions){
            if (pos.type == gameObject.config.type) return Phaser.Math.Distance.Between(pos.x, pos.y, gameObject.x, gameObject.y) <= this.maxDropDistance;
        }
        return false;
    }
    _update(time, delta) {}
    _timeout() {
    //Ignore timeout!
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.loseGame();
    }
    triggerWin(selectedSet) {
        this.storagePlugin.setItem((0, $15b72a9ad2952278$export$fadd21211b40c08a).STORAGE_KEYS.DRESSUP_COSTUME, selectedSet);
        this.winGame();
    }
}




class $ad922659170600fa$export$3b0026e04cdf636f extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    //Debug utility for logging physics rectangles
    //private rectInfo = {}; 
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COLLECT,
            duration: 36000,
            showCountdown: true,
            startScreenColor: 0x52E736,
            startText: "COLLECT!",
            startTextColor: 0x323232,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SORT,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 386,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 386,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 386,
                    scale: 1.30
                }
            }
        });
        //Images
        //values
        this.worldColliders = [
            //Top left
            {
                x: 66.5,
                y: 74.5,
                width: 75,
                height: 85
            },
            {
                x: 132,
                y: 34.5,
                width: 44,
                height: 27
            },
            {
                x: 252,
                y: 46,
                width: 154,
                height: 50
            },
            {
                x: 387.5,
                y: 68.5,
                width: 85,
                height: 123
            },
            {
                x: 295.5,
                y: 142,
                width: 311,
                height: 16
            },
            {
                x: 444,
                y: 69,
                width: 16,
                height: 132
            },
            {
                x: 502.5,
                y: 57.5,
                width: 57,
                height: 45
            },
            {
                x: 136.5,
                y: 100.5,
                width: 61,
                height: -17
            },
            {
                x: 158.5,
                y: 120,
                width: 29,
                height: -22
            },
            //Bottom left
            {
                x: 127,
                y: 415,
                width: 116,
                height: 102
            },
            {
                x: 94,
                y: 344.5,
                width: 40,
                height: 25
            },
            {
                x: 268,
                y: 296,
                width: 88,
                height: 120
            },
            {
                x: 232.5,
                y: 433,
                width: 77,
                height: 66
            },
            {
                x: 356,
                y: 348.5,
                width: 46,
                height: 259
            },
            {
                x: 214.5,
                y: 381.5,
                width: 59,
                height: 21
            },
            //right
            {
                x: 729,
                y: 242.5,
                width: 176,
                height: 197
            },
            {
                x: 450.5,
                y: 174.5,
                width: 29,
                height: 37
            },
            //lake
            {
                x: 497,
                y: 368.5,
                width: 42,
                height: 65
            },
            {
                x: 540.5,
                y: 363,
                width: 39,
                height: 40
            },
            {
                x: 587,
                y: 353.5,
                width: 50,
                height: 43
            }
        ];
        this.costumes = [
            {
                costumeSet: 0,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.PLAYER_0
            },
            {
                costumeSet: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.PLAYER_1
            },
            {
                costumeSet: 2,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.PLAYER_2
            },
            {
                costumeSet: 3,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.PLAYER_3
            }
        ];
        this.candies = [
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.CANDY_5,
                spawnPosition: new Phaser.Math.Vector2(746, 418),
                scaleOverride: 0.30,
                angleOverride: 33
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.CANDY_4,
                spawnPosition: new Phaser.Math.Vector2(76, 153),
                scaleOverride: 0.457,
                angleOverride: 0
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.CANDY_2,
                spawnPosition: new Phaser.Math.Vector2(743, 73),
                scaleOverride: 0.69,
                angleOverride: -44
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.CANDY_1,
                spawnPosition: new Phaser.Math.Vector2(136, 295),
                scaleOverride: 0.597,
                angleOverride: 33
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.CANDY_3,
                spawnPosition: new Phaser.Math.Vector2(580, 253),
                scaleOverride: 0.34,
                angleOverride: 0
            }
        ];
        this.playerSpawnPosition = {
            x: 51,
            y: 183
        };
        this.moveForce = 0.03;
        this.candyCollectDistance = 75;
        this.currentCandy = -1;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.player = null;
        this.currentCandy = -1;
        this.candyObject = null;
    }
    _preload() {}
    _create() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT.BACKGROUND);
        this.initPhysics();
        this.spawnPlayer();
        this.spawnNextCandy();
    }
    initPhysics() {
        //Add world bounds and table
        this.matter.world.setBounds(0, 0, this.game.renderer.width, this.game.renderer.height);
        this.worldColliders.forEach((worldCol)=>{
            this.matter.add.rectangle(worldCol.x, worldCol.y, worldCol.width, worldCol.height, {
                isStatic: true
            });
        });
    }
    spawnPlayer() {
        var player = this.matter.add.image(this.playerSpawnPosition.x, this.playerSpawnPosition.y, this.costumes[0].image, null, {
            chamfer: {
                radius: 55
            },
            ignoreGravity: true,
            frictionAir: 0,
            friction: 0
        }).setDepth(10).setScale(0.375);
        player.setTexture(this.getCostumeImageKey()); //HACK pt.2: apply correct texture now that hitbox is initialized
        player.isTouching = false;
        player.update = (delta)=>{
            var pointer = this.input.activePointer.position;
            var moveVector = new Phaser.Math.Vector2(pointer.x - player.x, pointer.y - player.y);
            player.rotateToPointer(moveVector);
            player.move(delta, moveVector);
        };
        player.rotateToPointer = (moveVector)=>{
            player.setRotation(moveVector.angle() + +Math.PI / 2);
        };
        player.move = (delta, moveVector)=>{
            if (!player.isTouching) return;
            player.applyForce(moveVector.normalize().scale(delta / 1000 * this.moveForce));
        };
        this.player = player;
        this.input.on("pointerdown", function(pointer) {
            this.player.isTouching = true;
        //Debug utility for logging physics rectangles
        //this.rectInfo.startX = pointer.x;
        //this.rectInfo.startY = pointer.y;
        }, this);
        this.input.on("pointerup", function(pointer) {
            this.player.isTouching = false;
        //Debug utility for logging physics rectangles
        // var center = {x: this.rectInfo.startX + (pointer.x - this.rectInfo.startX)/2, 
        //                 y: this.rectInfo.startY + (pointer.y - this.rectInfo.startY)/2,
        //                 width: (pointer.x - this.rectInfo.startX),
        //                 height: (pointer.y - this.rectInfo.startY)};
        // console.log("{x: " + center.x + ", y: " + center.y + ", width: " + center.width + ", height: " + center.height + "},");
        }, this);
    }
    getCostumeImageKey() {
        var costumeSet = this.storagePlugin.getItem((0, $15b72a9ad2952278$export$fadd21211b40c08a).STORAGE_KEYS.DRESSUP_COSTUME);
        if (!costumeSet) costumeSet = 0;
        return this.costumes.find((c)=>c.costumeSet == costumeSet).image;
    }
    spawnNextCandy() {
        this.currentCandy++;
        if (this.currentCandy >= this.candies.length) {
            this.triggerWin();
            return;
        }
        var candyConfig = this.candies[this.currentCandy];
        var candy = this.addAnimation(candyConfig.image, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.CANDY_DIE, 60).setOffset(-76, -153).setPositionOverride(candyConfig.spawnPosition.x, candyConfig.spawnPosition.y).setScaleMultiplier(candyConfig.scaleOverride).setAngleOffset(candyConfig.angleOverride).setDepth(90).setLoop(false).setPlaybackSpeed(-1).setAnimFinishCallback(()=>{
            //Set up idle animation after start animation is done
            candy.setAnimation(this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.CANDY_IDLE)).setLoop(true).setPlaybackSpeed(1).start();
        }).start();
        candy.isActive = true;
        candy.onUpdate = (delta)=>{
            if (!candy.isActive) return;
            candy.checkDistanceToPlayer();
        };
        candy.checkDistanceToPlayer = ()=>{
            var distance = Phaser.Math.Distance.Between(candy.image.x, candy.image.y, this.player.x, this.player.y);
            //Deactivate candy and spawn new candy
            if (distance <= this.candyCollectDistance) {
                candy.isActive = false;
                candy.setAnimation(this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.CANDY_DIE)).setPlaybackSpeed(1).setLoop(false).setAnimFinishCallback(()=>{
                    candy.image.setVisible(false);
                });
                this.spawnNextCandy();
                this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.WINK, {
                    detune: this.getDetune(),
                    volume: 10.0
                });
            }
        };
        this.candyObject = candy;
    }
    _update(time, delta) {
        this.player.update(delta);
        this.candyObject.onUpdate(delta);
    }
    _timeout() {
        this.triggerLose();
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.loseGame();
    }
    triggerWin() {
        //trigger win after 1 second and load next scene
        this.winGame(1500);
    }
}




class $44d3b3a49b52c719$export$8a08663797ad7362 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SORT,
            duration: 14000,
            showCountdown: true,
            startScreenColor: 0xFF9090,
            startText: "SORT!",
            startTextColor: 0x323232,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.GHOSTBUSTERS,
            endButtons: {
                normalNoSkip: {
                    x: 688,
                    y: 293,
                    scale: 1.25
                },
                normalWithSkip: {
                    x: 688,
                    y: 293,
                    scale: 1.25
                },
                skip: {
                    x: 688,
                    y: 395,
                    scale: 1.25
                }
            }
        });
        //values
        this.itemConfig = [
            //Yellow candy
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.CANDY_1,
                startX: 525,
                startY: 68,
                startAngle: 0,
                isTrash: false,
                trash: {
                    x: 538,
                    y: 246,
                    scale: 0.83,
                    angle: -93,
                    depth: 10
                },
                pumpkin: {
                    x: 212,
                    y: 222,
                    scale: 1.0,
                    angle: 28,
                    depth: 10
                }
            },
            //purple candy
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.CANDY_2,
                startX: 99,
                startY: 107,
                startAngle: 0,
                isTrash: false,
                trash: {
                    x: 669,
                    y: 207,
                    scale: 0.91,
                    angle: 29,
                    depth: 10
                },
                pumpkin: {
                    x: 181,
                    y: 293,
                    scale: 0.85,
                    angle: -118,
                    depth: 10
                }
            },
            //Chocolate
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.CANDY_3,
                startX: 750,
                startY: 71,
                startAngle: -44.2,
                isTrash: false,
                trash: {
                    x: 591,
                    y: 289,
                    scale: 1,
                    angle: -110,
                    depth: 10
                },
                pumpkin: {
                    x: 338,
                    y: 269,
                    scale: 1,
                    angle: -103,
                    depth: 10
                }
            },
            //Lollipop
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.CANDY_4,
                startX: 796,
                startY: 241,
                startAngle: 1,
                isTrash: false,
                trash: {
                    x: 658,
                    y: 255,
                    scale: 1,
                    angle: -153,
                    depth: 10
                },
                pumpkin: {
                    x: 257.5,
                    y: 266.6,
                    scale: 1,
                    angle: -164,
                    depth: 10
                }
            },
            //nom
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.CANDY_5,
                startX: 438,
                startY: 161,
                startAngle: 0,
                isTrash: false,
                trash: {
                    x: 582,
                    y: 200,
                    scale: 0.91,
                    angle: -12,
                    depth: 10
                },
                pumpkin: {
                    x: 286,
                    y: 215,
                    scale: 0.92,
                    angle: 7,
                    depth: 10
                }
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.RAZOR,
                startX: 59,
                startY: 238,
                startAngle: 0,
                isTrash: true,
                trash: {
                    x: 560,
                    y: 216,
                    scale: 1,
                    angle: -44,
                    depth: 10
                },
                pumpkin: {
                    x: 224,
                    y: 294,
                    scale: 0.76,
                    angle: 174,
                    depth: 10
                }
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.MEAT,
                startX: 84,
                startY: 350,
                startAngle: 16,
                isTrash: true,
                trash: {
                    x: 580,
                    y: 273,
                    scale: 0.76,
                    angle: -43,
                    depth: 10
                },
                pumpkin: {
                    x: 202,
                    y: 250,
                    scale: 0.81,
                    angle: 9,
                    depth: 10
                }
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.TOOTHBRUSH,
                startX: 327,
                startY: 73,
                startAngle: -26,
                isTrash: true,
                trash: {
                    x: 706,
                    y: 269,
                    scale: 1,
                    angle: 46,
                    depth: 10
                },
                pumpkin: {
                    x: 258,
                    y: 246,
                    scale: 1,
                    angle: -5,
                    depth: 10
                }
            },
            {
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.BROCCOLI,
                startX: 780,
                startY: 341,
                startAngle: 0,
                isTrash: true,
                trash: {
                    x: 660,
                    y: 263,
                    scale: 1,
                    angle: 47,
                    depth: 10
                },
                pumpkin: {
                    x: 321,
                    y: 265,
                    scale: 1,
                    angle: -87,
                    depth: 10
                }
            }
        ];
        this.basketPosition = {
            x: 260,
            y: 250
        };
        this.trashPosition = {
            x: 615,
            y: 253
        };
        this.maxCupDistance = 110;
        this.dragDepth = 101;
        this.idleDepth = 50;
        //logic vars
        this.items = [];
        this.itemDepth = 10;
        this.sortedItemsCount = 0;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.items = [];
        this.itemDepth = 10;
        this.sortedItemsCount = 0;
    }
    _preload() {}
    _create() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.BACKGROUND);
        this.add.image(426.5, 431, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.SORT_TEXT).setDepth(1);
        this.spawnGhost();
        this.addBins();
        this.spawnItems();
    }
    spawnGhost() {
        this.ghost = this.add.image(731, 485, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.GHOST).setDepth(200).setScale(0.93);
    }
    addBins() {
        this.add.image(this.basketPosition.x, this.basketPosition.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.PUMPKIN_BACK).setDepth(1);
        this.add.image(this.basketPosition.x, this.basketPosition.y + 50, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.PUMPKIN_FRONT).setDepth(100);
        this.add.image(this.trashPosition.x, this.trashPosition.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.TRASH_BACK).setDepth(1);
        this.add.image(this.trashPosition.x, this.trashPosition.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.TRASH_FRONT).setDepth(100);
    }
    spawnItems() {
        this.itemConfig.forEach((config)=>{
            var item = this.add.image(config.startX, config.startY, config.image).setDepth(50).setAngle(config.startAngle).setInteractive(this.input.makePixelPerfect());
            this.input.setDraggable(item);
            this.items.push({
                key: config.image,
                image: item,
                isTrash: config.isTrash,
                config: config,
                sortedCorrectly: false,
                putInCup: (item, depth, isBasket)=>{
                    //Disable draggable
                    this.input.disable(item.image);
                    //Override tint for razor
                    if (!isBasket && item.key === (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.RAZOR) item.image.setTint(0xCACACA);
                    //Animate
                    var targetTransform = isBasket ? item.config.pumpkin : item.config.trash;
                    this.tweens.add({
                        targets: item.image,
                        x: targetTransform.x,
                        y: targetTransform.y,
                        scaleX: targetTransform.scale,
                        scaleY: targetTransform.scale,
                        angle: targetTransform.angle,
                        ease: "Cubic",
                        duration: 200,
                        repeat: 0,
                        yoyo: false,
                        onComplete: ()=>{
                            item.image.setDepth(targetTransform.depth);
                        }
                    });
                }
            });
        });
        this.input.on("dragstart", function(pointer, gameObject) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            gameObject.setDepth(this.dragDepth);
            //this.children.bringToTop(gameObject);
            this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB, {
                detune: this.getDetune()
            });
        }, this);
        this.input.on("drag", function(pointer, gameObject, dragX, dragY) {
            gameObject.x = dragX;
            gameObject.y = dragY;
        });
        this.input.on("dragend", function(pointer, gameObject, dropped) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            gameObject.setDepth(this.idleDepth);
            this.PutInCup(gameObject);
            this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB, {
                detune: this.getDetune()
            });
        }, this);
    }
    PutInCup(gameObject) {
        var isInBasket = this.isItemInCup(true, gameObject);
        var isInTrash = this.isItemInCup(false, gameObject);
        if (!(isInBasket || isInTrash)) return;
        this.items.forEach((item)=>{
            if (item.key === gameObject.texture.key) {
                this.itemDepth++;
                this.sortedItemsCount++;
                item.sortedCorrectly = item.isTrash === isInTrash;
                item.putInCup(item, this.itemDepth, isInBasket);
                this.CheckForWin();
                return;
            }
        });
    }
    isItemInCup(basket, gameObject) {
        var distanceToCup = Phaser.Math.Distance.Between(gameObject.x, gameObject.y, basket ? this.basketPosition.x : this.trashPosition.x, basket ? this.basketPosition.y : this.trashPosition.y);
        return distanceToCup <= this.maxCupDistance;
    }
    CheckForWin() {
        var solved = true;
        for (let item of this.items)if (!item.sortedCorrectly) {
            solved = false;
            break;
        }
        if (solved) this.triggerWin();
        else if (this.sortedItemsCount === this.items.length) //All sorted but not correct solution -> trigger loss
        this.triggerLose(500);
    }
    _update(time, delta) {
        this.ghost.x = Phaser.Math.Interpolation.SmoothStep(0.1, this.ghost.x, this.input.activePointer.x);
    }
    _timeout() {
        this.triggerLose(0);
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose(delay) {
        this.loseGame(delay);
    }
    triggerWin() {
        var winGhost = this.add.image(238, 685, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.WIN_GHOST).setDepth(502);
        this.time.delayedCall(400, ()=>{
            this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT.WIN_BACKGROUND).setOrigin(0, 0).setDepth(500);
        }, null, this);
        this.tweens.add({
            targets: winGhost,
            x: 230.8,
            y: 244.8,
            ease: "Sine.easeOut",
            duration: 1700,
            delay: 500,
            repeat: 0,
            yoyo: false
        });
        this.winGame(3000);
    }
}




class $941584daeca322cb$export$bafad7fa9befd557 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.JUMPSCARE,
            duration: 16000,
            showCountdown: true,
            startScreenColor: 0xFF4DE7,
            startText: "PLAY!",
            startTextColor: 0x323232,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COMEDIAN,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 421,
                    scale: 1.0
                },
                normalWithSkip: {
                    x: 314.5,
                    y: 421,
                    scale: 1.0
                },
                skip: {
                    x: 538.5,
                    y: 421,
                    scale: 1.0
                }
            }
        });
        //values
        this.barClickMovement = 21.33;
        this.actualLevelTime = 8000;
        this.gameStarted = false;
        this.barYSpeed = 133.33;
        this.onGameStarted = ()=>{
            this.gameplayTimer.timeScale = 0;
        };
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.bar = null;
        this.jack = null;
        this.gameStarted = false;
        this.barYSpeed = 133.33;
    }
    _preload() {}
    _create() {
        this.calculateBarYSpeed();
        this.createBackground();
        this.createJack();
        this.createText();
        this.createButton();
        this.createBar();
    }
    calculateBarYSpeed() {
        var attempts = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.JUMPSCARE_ATTEMPTS);
        if (!attempts) attempts = 1;
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.JUMPSCARE_ATTEMPTS, attempts + 1);
        //Slow down bar based on attempts
        this.barYSpeed -= 35.3 * Math.log(attempts);
    }
    createBackground() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.BACKGROUND);
        this.add.image(184, 111, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.WALLPAPER).setDepth(1);
        this.add.image(581, 306, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.TABLE).setDepth(2);
        this.add.image(347, 248, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.CHAIR).setDepth(3);
    }
    createJack() {
        var jack = {
            body: this.add.image(367, 207, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.JACK).setDepth(4),
            hands: {
                first: [
                    this.add.image(386, 213, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_1).setDepth(5),
                    this.add.image(383, 188, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_2).setDepth(3)
                ],
                second: [
                    this.add.image(386, 195, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_1).setDepth(5).setAngle(-27),
                    this.add.image(383, 210, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_2).setDepth(3).setAngle(22)
                ]
            },
            firstHandsVisible: true,
            normalFace: this.add.image(356, 141, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.NORMAL_EYES).setDepth(6),
            scaredFace: this.add.image(356, 143.5, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.SCARED_EYES).setDepth(6).setVisible(false),
            playTV: this.add.image(468, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.TV_PLAY).setOrigin(0).setDepth(6),
            scareTV: this.add.image(468, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.TV_SCARE).setOrigin(0).setDepth(6).setVisible(false),
            onButtonPress: ()=>{
                jack.firstHandsVisible = !jack.firstHandsVisible;
                jack.hands.first.forEach((hand)=>{
                    hand.setVisible(jack.firstHandsVisible);
                });
                jack.hands.second.forEach((hand)=>{
                    hand.setVisible(!jack.firstHandsVisible);
                });
            },
            animateScared: ()=>{
                jack.normalFace.setVisible(false);
                jack.scaredFace.setVisible(true);
                jack.playTV.setVisible(false);
                jack.scareTV.setVisible(true);
                jack.hands.first.forEach((hand)=>{
                    hand.setVisible(false);
                });
                jack.hands.second.forEach((hand)=>{
                    hand.setVisible(false);
                });
                this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_1, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.SCARYARM_FRONT).setImageOrigin(0.02733, 0.1334).setDepth(5).setLoop(true).start();
                this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.ARM_2, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.SCARYARM_BACK).setImageOrigin(0.0205, 0.8977).setDepth(3).setLoop(true).start();
            }
        };
        jack.onButtonPress();
        this.jack = jack;
    }
    createText() {
        this.clickText = this.add.image(155, 452, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.CLICK_TEXT).setDepth(2);
        this.fastText = this.add.image(157, 457, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.FAST_TEXT).setDepth(2).setVisible(false);
    }
    createButton() {
        this.button = this.add.image(157, 336, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.BUTTON).setInteractive(this.input.makePixelPerfect()).setDepth(5).setAlpha(1);
        this.buttonPressed = this.add.image(157, 344, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.BUTTON_PRESSED).setDepth(5).setAlpha(0);
        this.button.on("pointerdown", function(pointer, gameObject) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            this.customStartGame();
            this.button.setAlpha(0);
            this.buttonPressed.setAlpha(1);
            this.jack.onButtonPress();
            this.bar.onButtonPress();
            this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.CLICK, {
                detune: this.getDetune()
            });
        }, this);
        this.input.on("pointerup", function(pointer, gameObject, dropped) {
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            this.button.setAlpha(1);
            this.buttonPressed.setAlpha(0);
            this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.CLICK, {
                detune: this.getDetune()
            });
        }, this);
    }
    createBar() {
        var bar = {
            background: this.add.image(40, 327, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.BAR).setDepth(6),
            clicker: this.add.image(41, 439, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.BAR_LINE).setDepth(8),
            limits: {
                bottom: 438,
                top: 212
            },
            onUpdate: (delta)=>{
                if (this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.WIN)) return;
                bar.clicker.y += this.barYSpeed * delta / 1000;
                if (bar.clicker.y > bar.limits.bottom) bar.clicker.y = bar.limits.bottom;
            },
            onButtonPress: ()=>{
                bar.clicker.y -= this.barClickMovement;
                if (bar.clicker.y < bar.limits.top) {
                    bar.clicker.y = bar.limits.top;
                    this.triggerWin();
                }
            }
        };
        this.bar = bar;
    }
    _update(time, delta) {
        this.bar.onUpdate(delta);
    }
    customStartGame() {
        if (this.gameStarted) return;
        this.gameStarted = true;
        this.gameplayTimer.timeScale = 1;
        //Trigger timeout sooner
        this.time.delayedCall(this.actualLevelTime, ()=>{
            this._timeout();
        }, null, this);
        //Trigger switch text
        this.time.delayedCall(this.actualLevelTime - 5000, ()=>{
            this.switchText();
        }, null, this);
    }
    switchText() {
        this.clickText.setVisible(false);
        this.fastText.setVisible(true);
    }
    _timeout() {
        this.triggerLose();
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
        this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SCARE2, {
            volume: 0.5
        });
        var scareImage = this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE.SCARE_SCREEN).setOrigin(0).setDepth(200);
        this.cameras.main.shake(1000, 0.03);
        this.loseGame(1000);
    }
    triggerWin() {
        this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SCARE1, {
            volume: 0.35
        });
        this.winGame(2000);
        this.jack.animateScared();
    }
}




class $a18eea013500063a$export$57a2705f35084abc extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.GHOSTBUSTERS,
            duration: 20000,
            showCountdown: false,
            startScreenColor: 0x1A1A1A,
            startText: "BUST\nOUT!",
            startTextColor: 0xFFFFFF,
            startTextYOrigin: 0.35,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.HEAVENHELL,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 365,
                    scale: 1.25
                },
                normalWithSkip: {
                    x: 283,
                    y: 365,
                    scale: 1.25
                },
                skip: {
                    x: 570,
                    y: 365,
                    scale: 1.25
                }
            }
        });
        //values
        this.worldColliders = [
            //Bottom left
            {
                x: 424,
                y: 230,
                width: 162,
                height: 144
            },
            {
                x: 434.5,
                y: 313,
                width: 533,
                height: 18
            },
            {
                x: 643,
                y: 394,
                width: 114,
                height: 16
            },
            {
                x: 430.5,
                y: 396,
                width: 113,
                height: 16
            },
            {
                x: 206.5,
                y: 394.5,
                width: 101,
                height: 9
            },
            {
                x: 534,
                y: 7,
                width: 548,
                height: 12
            },
            {
                x: 829,
                y: 244.5,
                width: 46,
                height: 467
            },
            {
                x: 162.5,
                y: 354.5,
                width: 11,
                height: 63
            },
            {
                x: 164,
                y: 151,
                width: 6,
                height: 300
            },
            {
                x: 245.5,
                y: 119.5,
                width: 7,
                height: 233
            },
            {
                x: 24.5,
                y: 269.5,
                width: 43,
                height: 413
            }
        ];
        this.spikeColliders = [
            {
                x: 57.5,
                y: 271.5,
                width: 21,
                height: 401
            },
            {
                x: 145.5,
                y: 197,
                width: 13,
                height: 382
            },
            {
                x: 260,
                y: 115.5,
                width: 16,
                height: 199
            },
            {
                x: 257,
                y: 222,
                width: 10,
                height: 14
            },
            {
                x: 147,
                y: 392.5,
                width: 8,
                height: 7
            }
        ];
        this.winZones = [
            {
                x: 203.5,
                y: 24.5,
                width: 67,
                height: 43
            }
        ];
        this.moveSensitivity = 0.1;
        this.spinnerRotationSpeed = -85;
        this.laserSwitchFrequency = 1200;
        this.cannonConfig = {
            interval: 1300,
            topStartPosition: {
                x: 829,
                y: 353.3
            },
            topEndPosition: 179,
            bottomStartPosition: {
                x: 829,
                y: 440.8
            },
            bottomEndPosition: 86,
            ballSpeed: -4.2
        };
        this.hasGradient = false;
        this.pointerOffset = null;
        this.balls = [];
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.ghost = null;
        this.spinner = null;
        this.hasGradient = false;
        this.balls = [];
        this.pointerOffset = null;
    }
    _preload() {}
    _create() {
        this.initPhysics();
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.BACKGROUND);
        this.add.image(96, 33, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.DRAG_TEXT).setTint(0x87878E).setScale(0.32).setDepth(1);
        this.createLevel();
        this.spawnGhost();
        this.createStartGradient();
    }
    initPhysics() {
        this.matter.world.setBounds(0, 0, this.game.renderer.width, this.game.renderer.height);
        this.worldColliders.forEach((worldCol)=>{
            this.matter.add.rectangle(worldCol.x, worldCol.y, worldCol.width, worldCol.height, {
                isStatic: true
            });
        });
        this.spikeColliders.forEach((spikeCol)=>{
            this.matter.add.rectangle(spikeCol.x, spikeCol.y, spikeCol.width, spikeCol.height, {
                label: "killer",
                isStatic: true
            });
        });
        this.winZones.forEach((winZone)=>{
            this.matter.add.rectangle(winZone.x, winZone.y, winZone.width, winZone.height, {
                label: "winZone",
                isStatic: true
            });
        });
        this.collisionPlayer = 2; //this.matter.world.nextCategory();
        this.matter.world.on("collisionstart", function(event, bodyA, bodyB) {
            if (bodyA.label === "player" || bodyB.label === "player") {
                if (bodyA.label === "killer" || bodyB.label === "killer") this.ghost.die();
                if (bodyA.label === "winZone" || bodyB.label === "winZone") this.ghost.win();
            }
        }, this);
    }
    createLevel() {
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.LEVEL).setOrigin(0).setDepth(5);
        this.spawnSpinner(656.3, 157.3);
        this.spawnCannon(866.3, 396);
        this.spawnLaser(473.4, 84, this.laserSwitchFrequency, this.laserSwitchFrequency, true);
        this.spawnLaser(409.5, 84, this.laserSwitchFrequency, this.laserSwitchFrequency, false);
        this.spawnLaser(344.9, 84, this.laserSwitchFrequency, this.laserSwitchFrequency, true);
    }
    spawnSpinner(x, y) {
        var spinner = this.matter.add.image(x, y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.SPINNER).setDepth(9);
        var Bodies = Phaser.Physics.Matter.Matter.Bodies;
        var rectA = Bodies.rectangle(x, y, 15, 270, {
            label: "killer"
        });
        var rectB = Bodies.rectangle(x, y, 270, 15, {
            label: "killer"
        });
        var compoundBody = Phaser.Physics.Matter.Matter.Body.create({
            parts: [
                rectA,
                rectB
            ]
        });
        compoundBody.isStatic = true;
        spinner.setExistingBody(compoundBody);
        spinner.onUpdate = (delta)=>{
            spinner.setAngle(spinner.angle + this.spinnerRotationSpeed * delta / 1000);
        };
        this.spinner = spinner;
    }
    spawnCannon(x, y) {
        var cannon = this.add.image(x, y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.CANNON).setDepth(16);
        cannon.nextSpawnOnTop = true;
        cannon.spawnNextBall = ()=>{
            this.spawnBall(cannon.nextSpawnOnTop ? this.cannonConfig.topStartPosition : this.cannonConfig.bottomStartPosition, this.cannonConfig.ballSpeed, cannon.nextSpawnOnTop ? this.cannonConfig.topEndPosition : this.cannonConfig.bottomEndPosition);
            this.time.delayedCall(this.cannonConfig.interval, ()=>{
                cannon.nextSpawnOnTop = !cannon.nextSpawnOnTop;
                cannon.spawnNextBall();
            }, null, this);
        };
        cannon.spawnNextBall();
    }
    spawnBall(position, xVelocity, targetX) {
        var ball = this.matter.add.image(position.x, position.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.BALL, null, {
            chamfer: {
                radius: 13
            },
            label: "killer",
            ignoreGravity: true,
            frictionAir: 0,
            friction: 0
        }).setDepth(15);
        var Bodies = Phaser.Physics.Matter.Matter.Bodies;
        var rectA = Bodies.rectangle(position.x, position.y, 28, 28, {
            label: "killer",
            chamfer: {
                radius: 16
            }
        });
        var compoundBody = Phaser.Physics.Matter.Matter.Body.create({
            parts: [
                rectA
            ]
        });
        ball.setExistingBody(compoundBody);
        ball.setIgnoreGravity(true);
        ball.setFrictionAir(0);
        ball.setCollidesWith([
            this.collisionPlayer
        ]);
        ball.onUpdate = (delta)=>{
            ball.setVelocity(xVelocity, 0);
            if (ball.x <= targetX) {
                ball.setVisible(false);
                ball.setCollidesWith([]);
                this.balls.shift();
                ball.destroy();
            }
        };
        this.balls.push(ball);
    }
    spawnLaser(x, y, switchFrequency, startDelay, activeOnStart) {
        var laser = this.matter.add.image(x, y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.LASER).setDepth(5);
        this.add.image(x, y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.LASER).setDepth(4).setAlpha(0.1).setBlendMode(Phaser.BlendModes.ERASE).setScale(0.5, 1);
        var Bodies = Phaser.Physics.Matter.Matter.Bodies;
        var rectA = Bodies.rectangle(x, y, 7, 140, {
            label: "killer"
        });
        var compoundBody = Phaser.Physics.Matter.Matter.Body.create({
            parts: [
                rectA
            ]
        });
        compoundBody.isStatic = true;
        laser.setExistingBody(compoundBody);
        laser.logic = {
            timeToSwitch: switchFrequency,
            delay: startDelay,
            active: activeOnStart,
            switchLasers: ()=>{
                laser.logic.active = !laser.logic.active;
                laser.setVisible(laser.logic.active);
                laser.setCollidesWith(laser.logic.active ? [
                    this.collisionPlayer
                ] : []);
                this.time.delayedCall(laser.logic.timeToSwitch, ()=>{
                    laser.logic.switchLasers();
                }, null, this);
            }
        };
        this.time.delayedCall(startDelay, laser.logic.switchLasers(), null, this);
        laser.setCollidesWith([]);
        laser.setVisible(false);
    }
    spawnGhost() {
        var ghost = {
            anim: this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GHOST_IDLE).setDepth(10).setImageInteractive().setOffset(-38, -29).setPositionOverride(38, 29).setScaleMultiplier(0.70).setLoop(true).start(),
            body: this.matter.add.image(38, 29, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST, null, {
                chamfer: {
                    radius: 55
                },
                label: "player",
                ignoreGravity: true,
                frictionAir: 0.25,
                friction: 0
            }).setCollisionCategory(this.collisionPlayer).setScale(0.22).setVisible(false),
            isDragging: false,
            isAlive: true,
            onUpdate: (delta)=>{
                ghost.anim.setPositionOverride(ghost.body.x, ghost.body.y);
                ghost.body.setAngle(0);
                if (!ghost.isAlive || !ghost.isDragging) return;
                var velocity = {
                    x: this.input.activePointer.x + this.pointerOffset.x - ghost.anim.GetPositionOverride().x,
                    y: this.input.activePointer.y + this.pointerOffset.y - ghost.anim.GetPositionOverride().y
                };
                ghost.body.setVelocity(velocity.x * this.moveSensitivity, velocity.y * this.moveSensitivity, delta);
            },
            die: ()=>{
                this.triggerLose();
                ghost.isAlive = false;
                ghost.anim.setAnimation(this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GHOST_DIE)).setPlaybackSpeed(1).setLoop(false).setAnimFinishCallback(()=>{
                    ghost.anim.GetImage().setVisible(false);
                });
            },
            win: ()=>{
                ghost.isAlive = false;
                ghost.anim.stop();
                this.tweens.add({
                    targets: ghost.anim.GetImage(),
                    alpha: 0,
                    y: "-=100",
                    ease: "Quad.easeIn",
                    duration: 1000,
                    repeat: 0,
                    yoyo: false
                });
                this.triggerWin();
            }
        };
        this.input.on("pointerdown", function(pointer) {
            if (this.hasGradient) this.gradient.fadeOut();
            this.pointerOffset = {
                x: ghost.anim.GetPositionOverride().x - pointer.x,
                y: ghost.anim.GetPositionOverride().y - pointer.y
            };
            this.ghost.isDragging = true;
        }, this);
        this.input.on("pointerup", function(pointer) {
            this.ghost.isDragging = false;
        }, this);
        this.ghost = ghost;
    }
    createStartGradient() {
        var alreadyAttempted = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.GHOSTBUSTERS_ATTEMPTED);
        this.hasGradient = !alreadyAttempted;
        if (alreadyAttempted) return;
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.GHOSTBUSTERS_ATTEMPTED, true);
        var gradient = this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.START_GRADIENT).setOrigin(0).setDepth(100);
        gradient.canFade = true;
        gradient.fadeOut = ()=>{
            if (!gradient.canFade) return;
            gradient.canFade = false;
            this.tweens.add({
                targets: gradient,
                alpha: 0,
                ease: "Linear",
                duration: 1000,
                repeat: 0,
                yoyo: false
            });
        };
        this.gradient = gradient;
    }
    _update(time, delta) {
        this.ghost.onUpdate(delta);
        this.spinner.onUpdate(delta);
        this.balls.forEach((ball)=>ball.onUpdate(delta));
    }
    _timeout() {}
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.loseGame(1500);
    }
    triggerWin() {
        //trigger win after 1 second and load next scene
        this.winGame(1000);
    }
}




class $522ac35d4a1007ad$export$18428d7a835c750a extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROTECT,
            duration: 10000,
            showCountdown: false,
            startScreenColor: 0x493500,
            startText: "PROTECT!",
            startTextColor: 0xFFFFFF,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.ALAN,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 417,
                    scale: 1.2
                },
                normalWithSkip: {
                    x: 284.5,
                    y: 417,
                    scale: 1.2
                },
                skip: {
                    x: 547,
                    y: 417,
                    scale: 1.2
                }
            }
        });
        //Images
        //values
        this.moveSensitivity = 0.1;
        this.enemyConfig = [
            {
                spawnPos: {
                    x: -172,
                    y: 65
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.AXE,
                rotationSpeed: 540,
                moveSpeed: 240,
                scale: 1,
                colliderW: 50,
                colliderH: 150,
                chamferRadius: 16
            },
            {
                spawnPos: {
                    x: 957,
                    y: 57
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.KNIFE,
                rotationSpeed: 540,
                moveSpeed: 240,
                scale: 1,
                colliderW: 90,
                colliderH: 90,
                chamferRadius: 45
            },
            {
                spawnPos: {
                    x: -131,
                    y: 300
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.NINJA,
                rotationSpeed: 0,
                moveSpeed: 240,
                scale: 1,
                colliderW: 130,
                colliderH: 200,
                chamferRadius: 0
            },
            {
                spawnPos: {
                    x: 1058,
                    y: 121
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.POOP,
                rotationSpeed: 360,
                moveSpeed: 240,
                scale: 1,
                colliderW: 140,
                colliderH: 140,
                chamferRadius: 70
            },
            {
                spawnPos: {
                    x: 1009,
                    y: 295
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.PORCUPINE,
                rotationSpeed: 0,
                moveSpeed: 240,
                scale: 1,
                colliderW: 100,
                colliderH: 75,
                chamferRadius: 0
            },
            {
                spawnPos: {
                    x: 691,
                    y: 607
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.KNIFE,
                rotationSpeed: -540,
                moveSpeed: 240,
                scale: 1,
                colliderW: 90,
                colliderH: 90,
                chamferRadius: 45
            },
            {
                spawnPos: {
                    x: 151,
                    y: 621
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.POOP,
                rotationSpeed: 360,
                moveSpeed: 240,
                scale: 1,
                colliderW: 140,
                colliderH: 140,
                chamferRadius: 70
            },
            {
                spawnPos: {
                    x: 1026,
                    y: 580
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.AXE,
                rotationSpeed: -540,
                moveSpeed: 240,
                scale: 1,
                colliderW: 50,
                colliderH: 150,
                chamferRadius: 16
            },
            {
                spawnPos: {
                    x: 1249,
                    y: 417
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.NINJA,
                rotationSpeed: 0,
                moveSpeed: 240,
                scale: -1,
                colliderW: 130,
                colliderH: 200,
                chamferRadius: 0
            },
            {
                spawnPos: {
                    x: -342,
                    y: 19
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.POOP,
                rotationSpeed: 360,
                moveSpeed: 240,
                scale: 1,
                colliderW: 140,
                colliderH: 140,
                chamferRadius: 70
            },
            {
                spawnPos: {
                    x: -168,
                    y: 469
                },
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.PORCUPINE,
                rotationSpeed: 0,
                moveSpeed: 240,
                scale: -1,
                colliderW: 100,
                colliderH: 75,
                chamferRadius: 0
            }
        ];
        this.enemySpawning = {
            startDelay: 1000,
            spawnInterval: {
                min: 600,
                max: 1200
            }
        };
        this.enemyTargetPos = {
            x: 422,
            y: 146
        };
        this.enemyActivationTimer = 0;
        this.nextEnemySpawnTime = 0;
        this.activatedEnemiesCount = 0;
        this.canActivateEnemies = false;
        this.enemies = [];
        this.killedEnemiesCount = 0;
        this.spawnedEnemiesCount = 0;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.ghost = null;
        this.lady = null;
        this.enemies = [];
        this.killedEnemiesCount = 0;
        this.spawnedEnemiesCount = 0;
        this.enemyActivationTimer = 0;
        this.nextEnemySpawnTime = this.enemySpawning.startDelay;
        this.activatedEnemiesCount = 0;
        this.canActivateEnemies = false;
    }
    _preload() {}
    _create() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.BACKGROUND).setDepth(1);
        this.add.image(409, 240, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.BACKGROUND).setDepth(0);
        this.add.image(700, 55, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.DRAG_TEXT).setScale(0.84).setDepth(1).setTint(0x09343A);
        this.initPhysics();
        this.spawnLady();
        this.spawnGhost();
        this.spawnEnemies();
    }
    initPhysics() {
        //this.matter.world.setBounds(0, 0, this.game.renderer.width, this.game.renderer.height);
        this.collisionPlayer = 2; //this.matter.world.nextCategory();
        this.collisionKiller = 4; //this.matter.world.nextCategory();
        this.collisionLady = 8; //this.matter.world.nextCategory();
        this.matter.world.on("collisionstart", function(event, bodyA, bodyB) {
            if (bodyA.label.startsWith("killer") || bodyB.label.startsWith("killer")) {
                var killer = bodyA.label.startsWith("killer") ? bodyA : bodyB;
                if (bodyA.label === "player" || bodyB.label === "player") this.killEnemyWithLabel(killer.label);
                if (bodyA.label === "lady" || bodyB.label === "lady") {
                    this.deactivateEnemyWithLabel(killer.label);
                    this.lady.kill();
                }
            }
        }, this);
    }
    killEnemyWithLabel(label) {
        //Enemies are labeled like "killer1", "killer2" because for some reason phaser doesnt give me any other information except label -.-
        for (let enemy of this.enemies)if (enemy.isLabelEqual(label)) {
            enemy.kill();
            return;
        }
    }
    deactivateEnemyWithLabel(label) {
        //Enemies are labeled like "killer1", "killer2" because for some reason phaser doesnt give me any other information except label -.-
        for (let enemy of this.enemies)if (enemy.isLabelEqual(label)) {
            enemy.deactivate();
            return;
        }
    }
    spawnLady() {
        this.add.image(300, 204, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.YARN).setDepth(5);
        var lady = this.matter.add.image(412, 161, (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS.BALL, null, {
            label: "lady",
            isStatic: true
        }).setScale(1.5, 3).setVisible(false).setCollisionCategory(this.collisionLady);
        lady.bodyAnim = this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.LADY, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_BODY).setLoop(false).setImagePosition(0).setDepth(3); //this.add.image(402, 161, CONST.PROTECT.LADY).setDepth(3);
        lady.hand1 = this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.HAND_1, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNY_HAND1).setImageOrigin(0.0355, 0.889).setDepth(10).setLoop(true).start(); // this.add.image(449, 186, CONST.PROTECT.HAND_1).setOrigin(0.0355, 0.889).setDepth(10);
        lady.hand2 = this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.HAND_2, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNY_HAND2).setImageOrigin(0.933, 0.9564).setDepth(10).setLoop(true).start(); // this.add.image(381, 188, CONST.PROTECT.HAND_2).setOrigin(0.933, 0.9564).setDepth(10);
        lady.kill = ()=>{
            lady.bodyAnim.start();
            lady.hand1.setAnimation(this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_HAND1)).setLoop(false);
            lady.hand2.setAnimation(this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_HAND2)).setLoop(false);
            //Animate death
            this.triggerLose();
        };
        this.lady = lady;
    }
    spawnGhost() {
        //Ghost: is draggable,
        //has collision group (like in ghostbusters) 
        // can collide with enemies -> turns them around!
        // game starts when player starts dragging the ghost
        var ghost = {
            anim: this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GHOST_IDLE).setDepth(10).setImageInteractive().setOffset(-38, -29).setPositionOverride(695, 153).setScaleMultiplier(2).setLoop(true).start(),
            body: this.matter.add.image(695, 153, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST, null, {
                chamfer: {
                    radius: 55
                },
                label: "player",
                ignoreGravity: true,
                frictionAir: 0.25,
                friction: 0
            }).setCollisionCategory(this.collisionPlayer).setCollidesWith([
                this.collisionKiller
            ]).setScale(0.5).setVisible(false),
            isDragging: false,
            isAlive: true,
            onUpdate: (delta)=>{
                ghost.anim.setPositionOverride(ghost.body.x, ghost.body.y);
                ghost.body.setAngle(0);
                if (!ghost.isAlive || !ghost.isDragging) return;
                var velocity = {
                    x: this.input.activePointer.x - ghost.anim.GetPositionOverride().x,
                    y: this.input.activePointer.y - ghost.anim.GetPositionOverride().y
                };
                ghost.body.setVelocity(velocity.x * this.moveSensitivity, velocity.y * this.moveSensitivity);
            }
        };
        ghost.anim.GetImage().on("pointerdown", function(pointer) {
            this.canActivateEnemies = true;
            this.ghost.isDragging = true;
        }, this);
        this.input.on("pointerup", function(pointer) {
            this.ghost.isDragging = false;
        }, this);
        this.ghost = ghost;
    }
    spawnEnemies() {
        this.enemyConfig.forEach((config)=>{
            this.spawnedEnemiesCount++;
            this.spawnEnemy(config);
        });
        this.enemies = this.shuffle(this.enemies);
    }
    spawnEnemy(config) {
        //Should be called from update -> takes the config and spawns enemy on correct time
        //Has movement speed and target location (lady)
        //Collides with player and lady
        //if lady -> kill her and lose
        //if ghost -> turn around
        var enemyLabel = "killer" + this.spawnedEnemiesCount;
        var enemy = this.matter.add.image(config.spawnPos.x, config.spawnPos.y, config.image, null, {
            chamfer: {
                radius: 13
            },
            label: enemyLabel,
            ignoreGravity: true,
            frictionAir: 0,
            friction: 0
        }).setScale(config.scale, 1).setDepth(15);
        var Bodies = Phaser.Physics.Matter.Matter.Bodies;
        var rectA = Bodies.rectangle(config.spawnPos.x, config.spawnPos.y, config.colliderW, config.colliderH, {
            label: enemyLabel,
            chamfer: {
                radius: config.chamferRadius
            }
        });
        var compoundBody = Phaser.Physics.Matter.Matter.Body.create({
            parts: [
                rectA
            ]
        });
        enemy.label = enemyLabel;
        enemy.setExistingBody(compoundBody);
        enemy.setIgnoreGravity(true);
        enemy.setFrictionAir(1);
        enemy.setCollisionCategory(this.collisionKiller);
        enemy.setCollidesWith([
            this.collisionPlayer,
            this.collisionLady
        ]);
        enemy.isActive = false;
        enemy.wasKilled = false;
        enemy.moveVector = new Phaser.Math.Vector2(-config.spawnPos.x + this.enemyTargetPos.x, -config.spawnPos.y + this.enemyTargetPos.y).normalize().scale(config.moveSpeed);
        enemy.onUpdate = (delta)=>{
            enemy.setAngle(enemy.angle + config.rotationSpeed * delta / 1000);
            if (!enemy.isActive) return;
            enemy.setPosition(enemy.x + enemy.moveVector.x * delta / 1000, enemy.y + enemy.moveVector.y * delta / 1000);
        };
        enemy.activate = ()=>{
            enemy.isActive = true;
        };
        enemy.kill = ()=>{
            if (enemy.wasKilled) return;
            enemy.setScale(-enemy.scaleX, enemy.scaleY);
            enemy.moveVector.scale(-1);
            enemy.wasKilled = true;
            this.handleEnemyKilled();
        };
        enemy.deactivate = ()=>{
            enemy.isActive = false;
        };
        enemy.isLabelEqual = (label)=>{
            return enemy.label === label;
        };
        this.enemies.push(enemy);
    }
    handleEnemyKilled() {
        this.killedEnemiesCount++;
        if (this.killedEnemiesCount >= this.enemyConfig.length) this.triggerWin();
    }
    _update(time, delta) {
        this.ghost.onUpdate(delta);
        this.enemies.forEach((enemy)=>{
            enemy.onUpdate(delta);
        });
        this.activateEnemies(delta);
    }
    activateEnemies(delta) {
        if (!this.canActivateEnemies) return;
        if (this.activatedEnemiesCount >= this.enemyConfig.length) return;
        this.enemyActivationTimer += delta;
        if (this.enemyActivationTimer > this.nextEnemySpawnTime) {
            this.enemies[this.activatedEnemiesCount].activate();
            this.enemyActivationTimer = 0;
            this.activatedEnemiesCount++;
            this.nextEnemySpawnTime = this.getRandomInt(this.enemySpawning.spawnInterval.min, this.enemySpawning.spawnInterval.max);
        }
    }
    shuffle(a) {
        var j, x, i;
        for(i = a.length - 1; i > 0; i--){
            j = Math.floor(Math.random() * (i + 1));
            x = a[i];
            a[i] = a[j];
            a[j] = x;
        }
        return a;
    }
    _timeout() {}
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.loseGame(1000);
    }
    triggerWin() {
        this.time.delayedCall(2000, ()=>{
            this.winAnimDelayed();
        }, null, this);
        this.winGame(3500);
    }
    winAnimDelayed() {
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.WIN_SCREEN, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.WIN_IMAGE_POPUP).setDepth(300).setLoop(false).start();
    }
}




class $17f95e08298fe14a$export$89277b30c9a55d84 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.ALAN,
            duration: 20000,
            showCountdown: true,
            startScreenColor: 0xFFE936,
            startText: "REVENGE!",
            startTextColor: 0x323232,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.JUMPSCARE,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 386,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 386,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 386,
                    scale: 1.30
                }
            }
        });
        //Images
        //values
        this.objectConfig = [
            {
                x: 251,
                y: 329,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.MUG,
                isPaper: false
            },
            {
                x: 390,
                y: 404,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PENCIL,
                isPaper: false
            },
            {
                x: 389,
                y: 378,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PEN,
                isPaper: false
            },
            {
                x: 360,
                y: 435,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.RUBBER,
                isPaper: false
            },
            {
                x: 239,
                y: 413,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.NAPIS,
                isPaper: false
            },
            {
                x: 39,
                y: 206,
                angle: 315,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 205,
                y: 177,
                angle: 0,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 146,
                y: 173,
                angle: 64,
                scale: 1.18,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 100,
                y: 195,
                angle: 291,
                scale: 1.23,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 194,
                y: 220,
                angle: 310,
                scale: 1.383,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 151,
                y: 237,
                angle: 295,
                scale: 0.80,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 94,
                y: 322,
                angle: 295,
                scale: 0.71,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 45,
                y: 257,
                angle: 180,
                scale: 1.22,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 124,
                y: 283,
                angle: 84,
                scale: 1.34,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 36,
                y: 329,
                angle: 117,
                scale: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.LEAF,
                isPaper: false
            },
            {
                x: 630,
                y: 430,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_7,
                isPaper: true
            },
            {
                x: 630,
                y: 425,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_6,
                isPaper: true
            },
            {
                x: 630,
                y: 420,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_5,
                isPaper: true
            },
            {
                x: 630,
                y: 415,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_4,
                isPaper: true
            },
            {
                x: 630,
                y: 410,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_2,
                isPaper: true
            },
            {
                x: 630,
                y: 405,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_3,
                isPaper: true
            },
            {
                x: 630,
                y: 400,
                angle: 0,
                scale: 0.7,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PAPER_1,
                isPaper: true
            }
        ];
        this.objects = [];
        this.papers = [];
        this.flyingObjectCount = 0;
        this.currentPaper = 0;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.alan = null;
        this.objects = [];
        this.papers = [];
        this.flyingObjectCount = 0;
        this.currentPaper = 0;
    }
    _preload() {}
    _create() {
        this.initPhysics();
        this.createStaticImages();
        this.createAlan();
        this.createDraggableObjects();
        this.updatePapers();
    }
    initPhysics() {
        this.matter.world.setBounds(0, 0, this.game.renderer.width, this.game.renderer.height);
        this.wallCategory = 2; //this.matter.world.nextCategory();
        this.matter.add.rectangle(-30, 240, 60, 480, {
            label: "walll",
            isStatic: true,
            collisionFilter: {
                category: this.wallCategory
            }
        });
        this.matter.add.rectangle(883, 240, 60, 480, {
            label: "walll",
            isStatic: true,
            collisionFilter: {
                category: this.wallCategory
            }
        });
        this.matter.add.rectangle(426.5, -30, 853, 60, {
            label: "walll",
            isStatic: true,
            collisionFilter: {
                category: this.wallCategory
            }
        });
        this.matter.add.rectangle(426.5, 510, 853, 60, {
            label: "walll",
            isStatic: true,
            collisionFilter: {
                category: this.wallCategory
            }
        });
    }
    createStaticImages() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.BACKGROUND);
        this.add.image(392, 227, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.CLOUDS).setDepth(1);
        this.add.image(425, 413, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.TABLE).setDepth(10);
        this.add.image(429, 237, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.WINDOWS).setDepth(2);
        this.add.image(94, 330, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.PLANT).setDepth(11);
        this.add.image(427, 54, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT.DRAG_TEXT).setDepth(1).setScale(0.73).setTint(0x48467C).setAlpha(0.88);
    }
    createAlan() {
        var alan = this.add.image(426, 260, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.ALAN).setDepth(5);
        alan.sadMouth = this.add.image(424, 265, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.ALAN_SADMOUTH).setVisible(false).setDepth(6);
        alan.sadderMouth = this.add.image(427, 252, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN.ALAN_SADDERMOUTH).setVisible(false).setDepth(6);
        alan.onUpdate = ()=>{
            alan.sadMouth.setPosition(alan.x - 2, alan.y + 5);
            alan.sadderMouth.setPosition(alan.x + 1, alan.y - 8);
        };
        alan.scare1 = ()=>{
            alan.currentTween = this.tweens.add({
                targets: alan,
                y: "+=22.4",
                ease: "Linear",
                duration: 500,
                repeat: 0,
                yoyo: false
            });
            alan.sadMouth.setVisible(true);
            alan.sadderMouth.setVisible(false);
        };
        alan.scare2 = ()=>{
            alan.currentTween.stop();
            alan.currentTween = this.tweens.add({
                targets: alan,
                y: "+=62.4",
                ease: "Linear",
                duration: 500,
                repeat: 0,
                yoyo: false
            });
            alan.sadMouth.setVisible(false);
            alan.sadderMouth.setVisible(true);
        };
        alan.scare3 = ()=>{
            alan.currentTween.stop();
            alan.currentTween = this.tweens.add({
                targets: alan,
                y: "+=124",
                ease: "Linear",
                duration: 500,
                repeat: 0,
                yoyo: false
            });
        };
        alan.startShaking = ()=>{
            this.tweens.add({
                targets: alan,
                x: "+=3",
                ease: "Linear",
                duration: 100,
                repeat: -1,
                yoyo: true
            });
        };
        this.alan = alan;
    }
    createDraggableObjects() {
        this.dragCategory = 4;
        this.objectConfig.forEach((config)=>{
            var canDrag = this.matter.world.nextGroup(false);
            var obj = this.matter.add.image(config.x, config.y, config.image, null, {
                chamfer: {
                    radius: 0
                },
                ignoreGravity: true,
                frictionAir: 0,
                friction: 0
            }).setDepth(12).setScale(config.scale).setAngle(-config.angle).setBounce(1.0).setCollisionGroup(canDrag).setCollidesWith([
                this.wallCategory,
                this.dragCategory
            ]);
            obj.isFlying = false;
            obj.isPaper = config.isPaper;
            obj.setMovable = (movable)=>{
                obj.setCollidesWith(movable ? [
                    this.wallCategory,
                    this.dragCategory
                ] : [
                    this.wallCategory
                ]);
            };
            obj.onUpdate = ()=>{
                if (!obj.isFlying && (Math.abs(obj.body.velocity.x) > 0 || Math.abs(obj.body.velocity.y) > 0)) {
                    obj.isFlying = true;
                    obj.setDepth(13);
                    this.handleObjectStartedFlying();
                    if (obj.isPaper) {
                        this.currentPaper++;
                        this.updatePapers();
                    }
                    this.sound.play((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB, {
                        detune: this.getDetune(),
                        volume: 0.7
                    });
                }
            };
            if (config.isPaper) this.papers.unshift(obj); //Add to the beggining of array -> so we can activate them in correct order
            this.objects.push(obj);
        });
        this.matter.add.mouseSpring({
            length: 0,
            stiffness: 0.003,
            angularStiffness: 0,
            collisionFilter: {
                category: this.dragCategory,
                mask: 0xFFFFFFFF
            }
        }); //We need this mask to make the mousespring interact with items...
    }
    handleObjectStartedFlying() {
        this.flyingObjectCount++;
        if (this.flyingObjectCount == 4) {
            this.alan.startShaking();
            this.alan.scare1();
        } else if (this.flyingObjectCount == 8) this.alan.scare2();
        else if (this.flyingObjectCount >= 12) {
            this.alan.scare3();
            this.triggerWin();
        }
    }
    updatePapers() {
        for(var i = 0; i < this.papers.length; i++){
            if (i == this.currentPaper) this.papers[i].setMovable(true);
            else if (i > this.currentPaper) this.papers[i].setMovable(false);
        }
    }
    _update(time, delta) {
        this.objects.forEach((obj)=>obj.onUpdate());
        this.alan.onUpdate();
    }
    _timeout() {
        this.triggerLose();
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.loseGame(1000);
    }
    triggerWin() {
        this.winGame(1000);
    }
}





class $e835cf3a9fefe459$export$42823faa9c164e77 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PARTY,
            duration: 21200,
            timeToStart: 1500,
            showCountdown: false,
            startScreenColor: 0xFF9900,
            startText: "PARTY!",
            startTextColor: 0x323232,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.DRESSUP,
            endButtons: {
                normalNoSkip: {
                    x: 664,
                    y: 300,
                    scale: 1.20
                },
                normalWithSkip: {
                    x: 664,
                    y: 300,
                    scale: 1.20
                },
                skip: {
                    x: 398,
                    y: 300,
                    scale: 1.20
                }
            }
        });
        //values
        this.noteInfo = {
            pink: {
                color: "pink",
                spawnX: 712,
                spawnY: -141,
                targetX: 528,
                targetY: 391,
                moveSpeed: 240,
                deathY: 480,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.DOT_PINK
            },
            blue: {
                color: "blue",
                spawnX: 797,
                spawnY: -141,
                targetX: 614,
                targetY: 391,
                moveSpeed: 240,
                deathY: 480,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.DOT_BLUE
            },
            green: {
                color: "green",
                spawnX: 881,
                spawnY: -141,
                targetX: 698,
                targetY: 391,
                moveSpeed: 240,
                deathY: 480,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.DOT_GREEN
            }
        };
        this.buttonInfo = [
            {
                color: "pink",
                x: 510,
                y: 437,
                clickRadius: 44,
                clickYRange: 100,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.END_PINK
            },
            {
                color: "blue",
                x: 598,
                y: 437,
                clickRadius: 44,
                clickYRange: 100,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.END_BLUE
            },
            {
                color: "green",
                x: 686,
                y: 437,
                clickRadius: 44,
                clickYRange: 100,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.END_GREEN
            }
        ];
        this.ghostConfig = [
            {
                x: 118,
                y: 356,
                depth: 25,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.GHOST_1_BODY
            },
            {
                x: 370,
                y: 382,
                depth: 25,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.GHOST_2_BODY
            },
            {
                x: 256,
                y: 258,
                depth: 12,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.GHOST_3_BODY
            },
            {
                x: 452,
                y: 183,
                depth: 25,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.GHOST_4_BODY
            }
        ];
        this.allowedMisses = 3;
        this.currentNoteSpawn = 0;
        this.currentFFTFrame = 0;
        this.timer = 0;
        this.timerOffset = 2.6;
        this.allNotesSpawned = false;
        this.skippedNotes = 0;
        this.notes = [];
        this.buttons = [];
        this.endMusicTimer = 0;
        this.isEndMusicFading = false;
        this.scalableObjects = [];
        this.isMinigameReady = false;
        this.onCommercialEnded = ()=>{
            this.isMinigameReady = true;
            this.createAfterCommercial();
        };
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.currentNoteSpawn = 0;
        this.currentFFTFrame = 0;
        this.endMusicTimer = 0;
        this.timer = this.timerOffset;
        this.nextNoteSpawn = null;
        this.allNotesSpawned = false;
        this.skippedNotes = 0;
        this.notes = [];
        this.buttons = [];
        this.isEndMusicFading = false;
        this.scalableObjects = [];
        this.isMinigameReady = false;
    }
    _preload() {}
    _create() {}
    createAfterCommercial() {
        this.getMusicInfo();
        this.createStaticImages();
        this.spawnButtons();
        this.createDynamicImages();
        this.spawnGhosts();
        this.createLights();
    }
    getMusicInfo() {
        this.notesJson = this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).JSONPARTY.MUSIC);
        this.nextNoteSpawn = this.notesJson[0];
        this.fftJson = this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).JSONPARTY.FFT);
        if (this.music) this.music.stop();
        this.music = this.sound.add((0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.PARTY_MUSIC);
        this.music.play();
        this.fadeSoundtrack(0, 100);
    }
    createStaticImages() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.BACKGROUND_BACK);
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.BACKGROUND_FRONT).setOrigin(0).setDepth(10);
        this.add.image(620, 124, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LINE_PINK).setDepth(11);
        this.add.image(706, 126, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LINE_BLUE).setDepth(11);
        this.add.image(791, 124, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LINE_GREEN).setDepth(11);
        this.add.image(327, 325, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.GRAVE).setDepth(20);
        this.add.image(318, 205, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.MARTINI).setDepth(20);
    }
    spawnButtons() {
        this.buttonInfo.forEach((buttonConfig)=>{
            var button = this.add.image(buttonConfig.x, buttonConfig.y, buttonConfig.image).setDepth(11).setInteractive(this.input.makePixelPerfect());
            button.config = buttonConfig;
            button.handleClicked = ()=>{
                var clickedNote = null;
                for (let note of this.notes)if (note.isAlive && button.config.color === note.config.color) {
                    if (Phaser.Math.Distance.Between(button.x, button.y, note.GetPositionOverride().x, note.GetPositionOverride().y) < button.config.clickYRange) {
                        if (clickedNote === null || note.GetPositionOverride().y > clickedNote.GetPositionOverride().y) clickedNote = note;
                    }
                }
                if (clickedNote !== null) clickedNote.handleClicked();
            };
            button.on("pointerover", function() {
                if (button.hoverEnd != null) button.hoverEnd.stop();
                button.hoverStart = this.tweens.add({
                    targets: button,
                    scaleX: 1.2,
                    scaleY: 1.2,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            button.on("pointerout", function() {
                if (button.hoverStart != null) button.hoverStart.stop();
                button.hoverEnd = this.tweens.add({
                    targets: button,
                    scaleX: 1,
                    scaleY: 1,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            this.buttons.push(button);
        });
        this.input.on("pointerdown", function(pointer) {
            this.buttons.forEach((button)=>{
                if (Phaser.Math.Distance.Between(button.x, button.y, pointer.x, pointer.y) < button.config.clickRadius) button.handleClicked();
            });
        }, this);
    }
    createDynamicImages() {
        this.scalableObjects.push(this.startTextObject);
        this.scalableObjects.push(this.add.image(159, 254, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LUNA).setDepth(1));
        this.scalableObjects.push(this.add.image(107, 97, (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.BATS).setDepth(12));
    }
    spawnGhosts() {
        this.ghostConfig.forEach((config)=>{
            this.scalableObjects.push(this.add.image(config.x, config.y, config.image).setDepth(config.depth));
        });
    }
    createLights() {
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LIGHT_BLUE, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.BLUE_LIGHT, 30).setImageOrigin(0.045, 0.912).setDepth(5).setLoop(true).start();
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LIGHT_GREEN, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GREEN_LIGHT, 30).setImageOrigin(0.854, 0.917).setDepth(5).setLoop(true).start();
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.LIGHT_PINK, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.PINK_LIGHT, 30).setImageOrigin(0.1267, 0.953).setDepth(5).setLoop(true).start();
    }
    _update(time, delta) {
        if (!this.isMinigameReady) return;
        this.spawnMusic(delta);
        this.notes.forEach((note)=>{
            note.onUpdate(delta);
        });
        this.fadeEndMusic(delta);
        this.updateFFTScales();
    }
    spawnMusic(delta) {
        if (this.allNotesSpawned) return;
        this.timer += delta / 1000;
        if (this.timer > this.nextNoteSpawn.t) {
            this.spawnNote(this.notesJson[this.currentNoteSpawn]);
            this.currentNoteSpawn++;
            this.nextNoteSpawn = this.notesJson[this.currentNoteSpawn];
            if (this.currentNoteSpawn >= this.notesJson.length) {
                this.allNotesSpawned = true;
                return;
            }
        }
    }
    spawnNote(note) {
        var noteConfig = note.c === "p" ? this.noteInfo.pink : note.c === "b" ? this.noteInfo.blue : this.noteInfo.green;
        var note = this.addAnimation(noteConfig.image, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.NOTE_DEATH).setDepth(30).setOffset(-599, -177).setPositionOverride(noteConfig.spawnX, noteConfig.spawnY).setImagePosition(0).setAnimFinishCallback(()=>{
            note.image.setVisible(false);
        }).setLoop(false);
        note.config = noteConfig;
        note.moveVector = new Phaser.Math.Vector2(noteConfig.targetX - noteConfig.spawnX, noteConfig.targetY - noteConfig.spawnY).normalize();
        note.isAlive = true;
        note.onUpdate = (delta)=>{
            note.setPositionOverride(note.GetPositionOverride().x + note.moveVector.x * note.config.moveSpeed * delta / 1000, note.GetPositionOverride().y + note.moveVector.y * note.config.moveSpeed * delta / 1000);
            note.checkPosition();
            if (!note.IsAnimating()) note.setImagePosition(note.isAlive ? 0 : 1000);
        };
        note.checkPosition = ()=>{
            if (note.isAlive && note.GetPositionOverride().y > note.config.deathY) {
                //Allow for some misses
                if (this.skippedNotes < this.allowedMisses) {
                    (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Missed a note!");
                    this.skippedNotes++;
                    note.handleClicked();
                } else this.triggerLose();
            }
        };
        note.handleClicked = ()=>{
            if (!note.isAlive) return;
            note.isAlive = false;
            note.start();
        };
        this.notes.push(note);
    }
    fadeEndMusic(delta) {
        if (!this.isEndMusicFading) return;
        this.endMusicTimer += delta;
        if (this.endMusicTimer > 1000) {
            this.music.setVolume(0);
            this.music.stop();
            (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Party music stopped!");
            this.isEndMusicFading = false;
            return;
        }
        this.music.setVolume(Phaser.Math.Linear(1, 0, this.endMusicTimer / 1000));
    }
    updateFFTScales() {
        let fftFrame = this.GetCurrentFFTFrame();
        if (fftFrame == this.currentFFTFrame) return;
        this.setFFTScales(fftFrame);
        this.currentFFTFrame = fftFrame;
    }
    GetCurrentFFTFrame() {
        for(var i = this.currentFFTFrame; i < this.fftJson.length; i++){
            if (this.fftJson[i].t > this.music.seek) return i;
        }
        return this.fftJson.length - 1;
    }
    setFFTScales(frame) {
        let scale = this.fftJson[frame].s;
        this.scalableObjects.forEach((scalableObject)=>{
            scalableObject.setScale(scale);
        });
        this.notes.forEach((note)=>{
            if (note.isAlive) note.setScaleMultiplier(scale);
        });
    }
    _timeout() {
        this.triggerWin();
    }
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Lose Party minigame");
        this.fadeSoundtrack(1, 1000);
        this.isEndMusicFading = true;
        this.loseGame(0);
    }
    triggerWin() {
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Win Party minigame");
        this.isEndMusicFading = true;
        this.fadeSoundtrack(1, 1000);
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY.WIN_SCREEN, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.WIN_IMAGE_POPUP).setDepth(300).setLoop(false).start();
        //trigger win after 1 second and load next scene
        this.winGame(1500);
    }
}




class $46b8af1dbd1f4150$export$e25633fb7e427304 extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COMEDIAN,
            duration: 1000,
            showCountdown: false,
            startScreenColor: 0xFF5668,
            startText: "MAKE THEM\nLAUGH!",
            startTextYOrigin: 0.35,
            startTextColor: 0x323232,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PARTY,
            endButtons: {
                normalNoSkip: {
                    x: 650,
                    y: 282,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 650,
                    y: 282,
                    scale: 1.30
                },
                skip: {
                    x: 650,
                    y: 384,
                    scale: 1.30
                }
            }
        });
        //Images
        //values
        this.winGhosts = [
            {
                x: 497,
                y: 446,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_1
            },
            {
                x: 388,
                y: 431,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_2
            },
            {
                x: 272,
                y: 430,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_3
            },
            {
                x: 609,
                y: 447,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_4
            },
            {
                x: 727,
                y: 458,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_5
            },
            {
                x: 812,
                y: 462,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_6
            },
            {
                x: 160,
                y: 433,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_7
            },
            {
                x: 45,
                y: 457,
                depth: 501,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.GHOST_8
            }
        ];
        this.ghostMoveDistance = 16;
        this.jokeConfigs = [
            {
                question: {
                    x: 617,
                    y: 57,
                    image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_1_QUESTION
                },
                answers: [
                    {
                        x: 529,
                        y: 152,
                        scale: 0.81,
                        angle: 0,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_1_ANSWER_1
                    },
                    {
                        x: 726,
                        y: 161,
                        scale: 1,
                        angle: 16,
                        depth: 100,
                        correctAnswer: true,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_1_ANSWER_2
                    },
                    {
                        x: 714,
                        y: 255,
                        scale: 0.92,
                        angle: -2.8,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_1_ANSWER_3
                    }
                ]
            },
            {
                question: {
                    x: 617,
                    y: 72,
                    image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_2_QUESTION
                },
                answers: [
                    {
                        x: 511,
                        y: 166,
                        scale: 0.76,
                        angle: 10,
                        depth: 100,
                        correctAnswer: true,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_2_ANSWER_1
                    },
                    {
                        x: 730,
                        y: 186,
                        scale: 0.83,
                        angle: 5,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_2_ANSWER_2
                    },
                    {
                        x: 717,
                        y: 288,
                        scale: 0.67,
                        angle: -10,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_2_ANSWER_3
                    }
                ]
            },
            {
                question: {
                    x: 617,
                    y: 80,
                    image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_3_QUESTION
                },
                answers: [
                    {
                        x: 496,
                        y: 174,
                        scale: 0.66,
                        angle: -18,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_3_ANSWER_2
                    },
                    {
                        x: 710,
                        y: 203,
                        scale: 0.81,
                        angle: 3.3,
                        depth: 100,
                        correctAnswer: true,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_3_ANSWER_1
                    },
                    {
                        x: 718,
                        y: 273,
                        scale: 0.67,
                        angle: 9,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_3_ANSWER_3
                    }
                ]
            },
            {
                question: {
                    x: 621,
                    y: 63,
                    image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_4_QUESTION
                },
                answers: [
                    {
                        x: 515,
                        y: 157,
                        scale: 0.87,
                        angle: -6.5,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_4_ANSWER_2
                    },
                    {
                        x: 743,
                        y: 160,
                        scale: 0.8,
                        angle: 13.3,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_4_ANSWER_3
                    },
                    {
                        x: 727,
                        y: 258,
                        scale: 0.76,
                        angle: -10,
                        depth: 100,
                        correctAnswer: true,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_4_ANSWER_1
                    }
                ]
            },
            {
                question: {
                    x: 630,
                    y: 73,
                    image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_5_QUESTION
                },
                answers: [
                    {
                        x: 527,
                        y: 167,
                        scale: 0.91,
                        angle: -1.5,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_5_ANSWER_2
                    },
                    {
                        x: 730,
                        y: 200,
                        scale: 0.87,
                        angle: 26,
                        depth: 100,
                        correctAnswer: true,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_5_ANSWER_1
                    },
                    {
                        x: 727,
                        y: 279,
                        scale: 0.9,
                        angle: 4.5,
                        depth: 100,
                        correctAnswer: false,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.JOKE_5_ANSWER_3
                    }
                ]
            }
        ];
        this.jokeSpawnDelay = 500;
        this.currentJokeIndex = 0;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.activeJoke = null;
        this.currentJokeIndex = 0;
    }
    _preload() {}
    _create() {
        this.createBackground();
        this.initJokes();
    }
    createBackground() {
        this.addBackgroundImage((0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.BACKGROUND);
        this.add.image(226, 177, (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.MIC).setDepth(10);
        var ghost = this.add.image(180, 125, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST).setDepth(5).setAngle(-6).setScale(0.7);
        this.tweens.add({
            targets: ghost,
            y: "-=4",
            ease: "Quad.easeInOut",
            duration: 375,
            repeat: -1,
            yoyo: true
        });
    }
    initJokes() {
        this.currentJokeIndex = 0;
        this.spawnJoke(this.currentJokeIndex);
    }
    spawnJoke(jokeIndex) {
        var jokeConfig = this.jokeConfigs[jokeIndex];
        var joke = this.add.image(jokeConfig.question.x, jokeConfig.question.y, jokeConfig.question.image).setDepth(100);
        joke.answers = [];
        jokeConfig.answers.forEach((answerConfig)=>{
            var answer = this.add.image(answerConfig.x, answerConfig.y, answerConfig.image).setScale(answerConfig.scale).setAngle(answerConfig.angle).setDepth(answerConfig.depth).setInteractive(this.input.makePixelPerfect());
            answer.isCorrect = answerConfig.correctAnswer;
            answer.hoverStart = null;
            answer.hoverEnd = null;
            answer.isInteractable = true;
            answer.on("pointerover", function() {
                if (!answer.isInteractable) return;
                if (answer.hoverEnd != null) answer.hoverEnd.stop();
                answer.hoverStart = this.tweens.add({
                    targets: answer,
                    scaleX: answerConfig.scale * 1.2,
                    scaleY: answerConfig.scale * 1.2,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            answer.on("pointerout", function() {
                if (!answer.isInteractable) return;
                if (answer.hoverStart != null) answer.hoverStart.stop();
                answer.hoverEnd = this.tweens.add({
                    targets: answer,
                    scaleX: answerConfig.scale,
                    scaleY: answerConfig.scale,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            answer.on("pointerup", function() {
                if (!answer.isInteractable) return;
                if (answer.hoverStart != null) answer.hoverStart.stop();
                if (answer.hoverEnd != null) answer.hoverEnd.stop();
                this.tweens.timeline({
                    targets: answer,
                    ease: "Cubic.easeInOut",
                    duration: 500,
                    loop: 0,
                    tweens: [
                        {
                            targets: answer,
                            scaleX: answerConfig.scale * 1.4,
                            scaleY: answerConfig.scale * 1.4,
                            //ease: 'Cubic.easeInOut', 
                            duration: 150,
                            repeat: 0,
                            yoyo: false
                        },
                        {
                            targets: answer,
                            scaleX: 0,
                            scaleY: 0,
                            //ease: 'Cubic.easeInOut', 
                            duration: 350,
                            repeat: 0,
                            yoyo: false
                        }
                    ]
                });
                this.handleAnswerSelected(answer.isCorrect);
            }, this);
            joke.answers.push(answer);
        }, this);
        joke.endAnimation = ()=>{
            this.tweens.add({
                targets: joke,
                scaleX: 0,
                scaleY: 0,
                ease: "Cubic.easeInOut",
                duration: 500,
                repeat: 0,
                yoyo: false
            });
            for(var i = 0; i < joke.answers.length; i++){
                joke.answers[i].isInteractable = false;
                if (joke.answers[i].isCorrect) continue;
                this.tweens.add({
                    targets: joke.answers[i],
                    scaleX: 0,
                    scaleY: 0,
                    ease: "Cubic.easeInOut",
                    duration: 500,
                    repeat: 0,
                    yoyo: false
                });
            }
        };
        this.activeJoke = joke;
    }
    handleAnswerSelected(correctAnswer) {
        if (correctAnswer) {
            this.activeJoke.endAnimation();
            if (this.currentJokeIndex < this.jokeConfigs.length - 1) {
                this.currentJokeIndex++;
                this.time.delayedCall(this.jokeSpawnDelay, ()=>{
                    this.spawnJoke(this.currentJokeIndex);
                }, null, this);
                this.playWinAudio();
            } else this.time.delayedCall(this.jokeSpawnDelay, ()=>{
                this.triggerWin();
            }, null, this);
        } else this.triggerLose();
    }
    _update(time, delta) {}
    _timeout() {}
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.LOSEIMAGE).setDepth(500).setOrigin(0);
        this.loseGame(2000);
    }
    triggerWin() {
        this.showWin();
        this.winGame(2500);
    }
    showWin() {
        this.add.image(0, 0, (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.WIN_BACKGROUND).setDepth(500).setOrigin(0);
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.HANDS_1, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.COMEDIAN_HAND_1, 30).setDepth(510).setLoop(true).setImageOrigin(0.898, 0.592).start();
        this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN.HANDS_2, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.COMEDIAN_HAND_2, 30).setDepth(510).setLoop(true).setImageOrigin(0.033, 0.753).start();
        this.winGhosts.forEach((ghost)=>{
            var image = this.add.image(ghost.x, ghost.y, ghost.image).setDepth(ghost.depth);
            var moveDistance = this.getRandomInt(-this.ghostMoveDistance, this.ghostMoveDistance);
            image.x -= moveDistance;
            this.tweens.add({
                targets: image,
                x: image.x + 2 * moveDistance,
                ease: "Linear",
                duration: this.getRandomInt(100, 200),
                repeat: -1,
                yoyo: true,
                progress: Math.random()
            });
        });
    }
}




class $90b73073ed93cc41$export$5a7193867a8ddcde extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.FLY,
            duration: 1000,
            showCountdown: false,
            startScreenColor: 0xBA1313,
            startText: "FLY!",
            startTextColor: 0xFFFFFF,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROTECT,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 398,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 398,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 398,
                    scale: 1.30
                }
            }
        });
        //Images
        //values
        this.grassConfig = [
            {
                x: 290,
                y: 513.5,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.START_GRASS
            },
            {
                x: 922,
                y: 489,
                scaleX: -1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: 1439,
                y: 489,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: 1956,
                y: 489,
                scaleX: -1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: 2476,
                y: 495,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_1
            },
            {
                x: 2996,
                y: 495,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_1
            },
            {
                x: 5586,
                y: 495,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_1
            },
            {
                x: 5067,
                y: 495,
                scaleX: -1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_1
            },
            {
                x: 4547,
                y: 489,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: 4029,
                y: 489,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: 3512,
                y: 489,
                scaleX: -1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            },
            {
                x: -350,
                y: 489,
                scaleX: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRASS_2
            }
        ];
        this.ghostConfig = {
            xSpeed: 266,
            maxYSpeed: -267,
            maxYPosition: -134,
            upForce: 3200,
            gravity: 785,
            startAngle: -275,
            maxAngle: -20,
            winXPosition: 5584
        };
        this.cameraZoom = 4.5 / 7;
        this.onGameStarted = ()=>{
            this.setCameraZoom(true);
        };
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.ghost = null;
    }
    _preload() {}
    _create() {
        this.initPhysics();
        this.addStaticImages();
        this.createLevel();
        this.spawnGhost(this.ghostConfig);
        this.startCameraFollow();
        this.createParticles();
    }
    createParticles() {
        var particles = this.add.particles((0, $15b72a9ad2952278$export$fadd21211b40c08a).MENU.STAR_PARTICLE).setDepth(1);
        var particleConfig = {
            active: true,
            visible: true,
            on: false,
            radial: true,
            frequency: 1000,
            gravityY: 0,
            timeScale: 1,
            maxParticles: 1500,
            blendMode: 0,
            lifespan: 10000,
            alpha: {
                start: 0,
                end: 1,
                ease: "Quad.easeOut"
            },
            scale: {
                start: 1,
                end: 0,
                ease: "Linear"
            },
            quantity: {
                ease: "Linear",
                min: 0,
                max: 10
            },
            emitZone: {
                source: new Phaser.Geom.Rectangle(0, 0, 6700, 800),
                type: "random"
            },
            speed: {
                ease: "Linear",
                min: 0,
                max: 27
            },
            x: -600,
            y: -500
        };
        var starParticles = particles.createEmitter(particleConfig);
        starParticles.flow(500, 50);
    }
    initPhysics() {
        this.physicsShapes = this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).PHYSICS.FLY_SHAPES);
        this.matter.add.rectangle(3100, 425, 6700, 95, {
            label: "ground",
            isStatic: true
        });
        this.matter.world.on("collisionstart", function(event, bodyA, bodyB) {
            this.ghost.die();
            this.triggerLose();
        }, this);
    }
    addStaticImages() {
        this.add.image(2201, 66, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.BACKGROUND).setScale(400, 1.63).setDepth(0);
        this.add.image(58, 239, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.HOLD_TEXT).setDepth(1);
        this.add.image(5113, -42, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GRADIENT).setDepth(30).setScale(1.2, 6 * 1.2);
        this.add.image(6306, 240, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.WHITE_SQUARE).setDepth(29).setScale(13.0308, 17.52);
        this.createGrass();
    }
    createGrass() {
        this.grassConfig.forEach((grass)=>{
            this.add.image(grass.x, grass.y, grass.image).setDepth(2).setScale(grass.scaleX * 1.2, 1);
        });
        //Add filler for grass background
        this.add.graphics({
            fillStyle: {
                color: 0x594A43,
                alpha: 1
            }
        }).fillRect(-600, 600, 8000, 300).setDepth(100);
    }
    createLevel() {
        this.matter.add.image(1748, 300, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.FOUNTAIN, undefined, {
            shape: this.physicsShapes.foutain
        }).setScale(1.2).setDepth(9);
        this.matter.add.image(3374, -196, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.MOON, undefined, {
            shape: this.physicsShapes.moon
        }).setScale(-1.2, 1.2).setDepth(9).setAngle(-38);
        this.matter.add.image(2188, -215, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.TWIG, undefined, {
            shape: this.physicsShapes.twig
        }).setDepth(9).setScale(2.855 * 0.6);
        this.matter.add.image(2842, 265, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.LIGHT, undefined, {
            shape: this.physicsShapes["light-2"]
        }).setScale(0.5).setDepth(9);
        this.matter.add.image(3798, 274, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.TWIG, undefined, {
            shape: this.physicsShapes.twig
        }).setScale(0.6, -0.6).setDepth(9);
        this.matter.add.image(4376, 2.7, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_1, undefined, {
            shape: this.physicsShapes["spider-1"]
        }).setScale(1.413 * 0.52).setDepth(9);
        this.matter.add.image(4454, -154, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_2, undefined, {
            shape: this.physicsShapes["spider-2"]
        }).setScale(1.6032).setDepth(9);
        this.matter.add.image(4296, -121, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_3, undefined, {
            shape: this.physicsShapes["spider-3"]
        }).setScale(1.52 * 1.2).setDepth(9);
        this.add.image(4294.6, -385, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_LINE).setScale(0.77, 1.33).setDepth(8);
        this.add.image(4460, -454, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_LINE).setScale(0.77, 1.33).setDepth(8);
        this.add.image(4377.6, -292, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.SPIDER_LINE).setScale(1.08, 1.866).setDepth(8);
    }
    spawnGhost(config) {
        var ghost = this.matter.add.image(344, 262, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.GHOST, null, {
            shape: this.physicsShapes.duhc
        }).setIgnoreGravity(true).setDepth(20).setScale(-0.5, 0.5).setAngle(8);
        ghost.isActive = false; //we activate ghost on first touch
        ghost.isAlive = true;
        ghost.isHolding = false; //is player currently touching the screen?
        ghost.yVelocity = 0;
        ghost.xVelocity = config.xSpeed;
        ghost.updateVelocity = (delta)=>{
            if (!ghost.isActive) return;
            if (ghost.isHolding && ghost.yVelocity > config.maxYSpeed && ghost.y > config.maxYPosition) ghost.yVelocity -= config.upForce * delta / 1000;
            if (!(ghost.isHolding && ghost.yVelocity <= config.maxYSpeed && ghost.y > config.maxYPosition)) ghost.yVelocity += config.gravity * delta / 1000;
        };
        ghost.die = ()=>{
            ghost.isAlive = false;
        };
        ghost.move = (delta)=>{
            if (!ghost.isActive || !ghost.isAlive) return;
            ghost.x += ghost.xVelocity * delta / 1000;
            ghost.y += ghost.yVelocity * delta / 1000;
            ghost.angle = config.startAngle + ghost.yVelocity / config.maxYSpeed * config.maxAngle;
            if (ghost.x > config.winXPosition) {
                ghost.isAlive = false;
                this.triggerWin();
            }
        };
        ghost.onUpdate = (delta)=>{
            ghost.updateVelocity(delta);
            ghost.move(delta);
        };
        this.input.on("pointerdown", (pointer)=>{
            if (!this.isCurrentState((0, $15b72a9ad2952278$export$fadd21211b40c08a).GAMESTATE.PLAYING)) return;
            this.ghost.isActive = true;
            this.ghost.isHolding = true;
        }, this);
        this.input.on("pointerup", ()=>{
            this.ghost.isHolding = false;
        }, this);
        this.ghost = ghost;
    }
    startCameraFollow() {
        this.cameras.main.startFollow(this.ghost);
    }
    _update(time, delta) {
        this.ghost.onUpdate(delta);
    }
    _timeout() {}
    _afterLoss() {}
    _afterWin() {}
    triggerLose() {
        this.time.delayedCall(500, ()=>{
            this.setCameraZoom(false);
        }, [], this);
        this.loseGame(500);
    }
    triggerWin() {
        this.setCameraZoom(false);
        this.winAnimation();
        this.winGame(3000);
    }
    winAnimation() {
        var winbg = this.add.image(this.ghost.x, this.ghost.y, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.WIN_IMAGE).setDepth(500).setAlpha(0);
        this.tweens.add({
            targets: winbg,
            alpha: 1,
            ease: "Linear",
            duration: 500,
            repeat: 0,
            yoyo: false
        });
        this.time.delayedCall(1000, ()=>{
            this.addAnimation((0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.WIN_GHOST, (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.FLY_WIN, 30).setOffset(this.ghost.x - 426.5, this.ghost.y - 240).setDepth(550).setLoop(false).start();
        }, [], this);
    }
    setCameraZoom(isPlaying) {
        this.cameras.main.setZoom(isPlaying ? this.cameraZoom : 1);
    }
}




class $827cd981b8e304ce$export$a22f592da096801e extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.HEAVENHELL,
            duration: 20000,
            showCountdown: false,
            startScreenColor: 0x521590,
            startText: "CHOOSE!",
            startTextColor: 0xFFFFFF,
            endScreen: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.END,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.CREDITS,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 386,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 386,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 386,
                    scale: 1.30
                }
            }
        });
        //values
        //clicker values:
        this.clickableWidth = 100;
        this.clickerSwingTime = 750 //in ms
        ;
        this.swingStartX = 162;
        this.swingEndX = 691;
        this.cameraFollowConfig = {
            lerp: 0.8,
            offsetX: 0,
            offsetY: 75
        };
        this.startButtonConfig = [
            {
                x: 274,
                y: 32.8,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.SIGN_HELL,
                onClick: ()=>{
                    this.startHellMinigame();
                },
                firstYMove: 24.5,
                secondYMove: -264.5
            },
            {
                x: 618.72,
                y: 316,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.SIGN_HEAVEN,
                onClick: ()=>{
                    this.startHeavenMinigame();
                },
                firstYMove: -24.5,
                secondYMove: 264.5
            }
        ];
        this.hellGhostConfig = {
            scaleX: -1,
            image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.GHOST_SIDE,
            moveSpeed: 107,
            winPos: {
                x: -1895,
                y: -81
            },
            losePos: {
                x: -1640,
                y: 306
            }
        };
        this.hellDuckConfig = [
            {
                startX: -206,
                startY: 404,
                endX: -400,
                endY: 461,
                tweenTime: 2000,
                scaleX: -1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.NORMAL_DUCK,
                shape: "suck-a-duck"
            },
            {
                startX: -568,
                startY: 390,
                endX: -575,
                endY: 254,
                tweenTime: 2000,
                scaleX: 1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.EVIL_DUCK,
                shape: "duck-devil"
            },
            {
                startX: -874,
                startY: 464,
                endX: -881,
                endY: 329,
                tweenTime: 2000,
                scaleX: 1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.EVIL_DUCK,
                shape: "duck-devil"
            },
            {
                startX: -1222,
                startY: 265,
                endX: -1057,
                endY: 186,
                tweenTime: 2000,
                scaleX: 1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.NORMAL_DUCK,
                shape: "suck-a-duck"
            },
            {
                startX: -1275,
                startY: 109,
                endX: -987,
                endY: -77,
                tweenTime: 2000,
                scaleX: 1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.EVIL_DUCK,
                shape: "duck-devil"
            },
            {
                startX: -1298,
                startY: -61,
                endX: -1508,
                endY: -257,
                tweenTime: 2000,
                scaleX: -1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.NORMAL_DUCK,
                shape: "suck-a-duck"
            },
            {
                startX: -1340,
                startY: 558,
                endX: -1219,
                endY: 355,
                tweenTime: 2000,
                scaleX: 1,
                scaleY: 1,
                image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.EVIL_DUCK,
                shape: "duck-devil"
            }
        ];
        this.heavenSteps = [
            {
                x: 612,
                y: 191
            },
            {
                x: 665,
                y: 140
            },
            {
                x: 715,
                y: 90
            },
            {
                x: 768,
                y: 38
            },
            {
                x: 819,
                y: -14
            },
            {
                x: 870,
                y: -66
            },
            {
                x: 921,
                y: -117
            },
            {
                x: 970,
                y: -168
            },
            {
                x: 1021,
                y: -221
            },
            {
                x: 1074,
                y: -271
            },
            {
                x: 1128,
                y: -322
            },
            {
                x: 1179,
                y: -375
            },
            {
                x: 1233,
                y: -427
            },
            {
                x: 1282,
                y: -477
            },
            {
                x: 1331,
                y: -527
            },
            {
                x: 1386,
                y: -584
            },
            {
                x: 1434,
                y: -634
            },
            {
                x: 1487,
                y: -684
            },
            {
                x: 1541,
                y: -736
            },
            {
                x: 1589,
                y: -788
            },
            {
                x: 1661,
                y: -839
            }
        ];
        this.heavenClouds = [
            {
                scrollFactor: 2,
                depth: 10,
                clouds: [
                    {
                        x: 920,
                        y: -209,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1271,
                        y: -505,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 729,
                        y: 102,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1064,
                        y: -458,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1704,
                        y: -1192,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1912,
                        y: -1239,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1561,
                        y: -943,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1370,
                        y: -633,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1237,
                        y: -30,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1429,
                        y: -340,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1557,
                        y: -1279,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1764,
                        y: -1326,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1413,
                        y: -1029,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1222,
                        y: -719,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1090,
                        y: -116,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1281,
                        y: -427,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1632,
                        y: -723,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1425,
                        y: -676,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1780,
                        y: -637,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1572,
                        y: -590,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2080,
                        y: -652,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2287,
                        y: -699,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1936,
                        y: -402,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1745,
                        y: -92,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1877,
                        y: -694,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 2069,
                        y: -1005,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 2419,
                        y: -1301,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 2212,
                        y: -1254,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2227,
                        y: -565,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2435,
                        y: -612,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 2084,
                        y: -316,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    }
                ]
            },
            {
                scrollFactor: 1.5,
                depth: 9,
                clouds: [
                    {
                        x: 1748,
                        y: -1125,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1955,
                        y: -1172,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1604,
                        y: -875,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1413,
                        y: -565,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1545,
                        y: -1167,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1736,
                        y: -1478,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 2087,
                        y: -1774,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1880,
                        y: -1727,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 866,
                        y: -346,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_4
                    },
                    {
                        x: 1126,
                        y: -348,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_3
                    },
                    {
                        x: 866,
                        y: -561,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1074,
                        y: -608,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 723,
                        y: -311,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 532,
                        y: -1,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 399,
                        y: 602,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 591,
                        y: 291,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 942,
                        y: -5,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 734,
                        y: 42,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2054,
                        y: -546,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 2262,
                        y: -593,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1911,
                        y: -296,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1719,
                        y: 14,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1852,
                        y: -588,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 2043,
                        y: -899,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 2394,
                        y: -1195,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 2186,
                        y: -1148,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    }
                ]
            },
            {
                scrollFactor: 1.1,
                depth: 8,
                clouds: [
                    {
                        x: 1170,
                        y: -195,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1378,
                        y: -242,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1027,
                        y: 55,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 835,
                        y: 365,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 968,
                        y: -237,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1159,
                        y: -548,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1510,
                        y: -844,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1302,
                        y: -797,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 760,
                        y: 5,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 775,
                        y: -123,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1434,
                        y: -1237,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1642,
                        y: -1284,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1291,
                        y: -987,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1099,
                        y: -677,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 967,
                        y: -74,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1159,
                        y: -384,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1509,
                        y: -681,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1302,
                        y: -634,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1497,
                        y: 1,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1704,
                        y: -46,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1354,
                        y: 251,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1162,
                        y: 561,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1294,
                        y: -42,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_2
                    },
                    {
                        x: 1486,
                        y: -352,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_5
                    },
                    {
                        x: 1837,
                        y: -649,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 1629,
                        y: -602,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 1498,
                        y: -162,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    },
                    {
                        x: 970,
                        y: 513,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_7
                    },
                    {
                        x: 955,
                        y: 641,
                        image: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLOUD_1
                    }
                ]
            }
        ];
        this.startSigns = [];
        this.isPlaying = false;
        this.isHell = false;
        this.hellDucks = [];
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.startSigns = [];
        this.isPlaying = false;
        this.isHell = false;
        this.hellGhost = null;
        this.hellFollowRect = null;
        this.hellDucks = [];
        this.clickerMovingRight = true;
        this.swingTimer = 0;
    }
    _preload() {}
    _create() {
        this.initPhysics();
        this.createStaticCombined();
        this.createButtons();
        this.createGhost();
        this.createHellLevel();
        this.initHeavenImages();
    //this.cameras.main.setZoom(0.1);
    }
    initPhysics() {
        this.physicsShapes = this.cache.json.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).PHYSICS.HEAVENHELL_SHAPES);
        this.hellGhostCollisionCategory = 2; //this.matter.world.nextCategory();
        this.matter.world.on("collisionstart", function(event, bodyA, bodyB) {
            if (bodyA.gameObject.body.label === "ghost-side" && bodyB.gameObject.body.label === "suck-a-duck" || bodyA.gameObject.body.label === "ghost-side" && bodyB.gameObject.body.label === "duck-devil" || bodyB.gameObject.body.label === "ghost-side" && bodyA.gameObject.body.label === "suck-a-duck" || bodyB.gameObject.body.label === "ghost-side" && bodyA.gameObject.body.label === "duck-devil") this.hellGhost.die();
        }, this);
    }
    createStaticCombined() {
        this.add.image(1542, -209, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.HEAVEN_BACKGROUND).setScale(2.336, 122.7).setDepth(0);
        this.add.image(426.5, 240, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.START_CLOUD).setDepth(15);
        for(var i = 0; i < 4; i++)this.add.image(-1519.4, 1581, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.HELL_BACKGROUND).setScale(6.89, 29380);
    }
    createButtons() {
        this.startButtonConfig.forEach((config)=>{
            var button = this.add.image(config.x, config.y, config.image).setInteractive(this.input.makePixelPerfect()).setDepth(200);
            button.config = config;
            button.hoverStart = null;
            button.hoverEnd = null;
            button.isInteractable = true;
            button.on("pointerover", function() {
                if (!button.isInteractable) return;
                if (button.hoverEnd != null) button.hoverEnd.stop();
                button.hoverStart = this.tweens.add({
                    targets: button,
                    scaleX: 1.2,
                    scaleY: 1.2,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            button.on("pointerout", function() {
                if (!button.isInteractable) return;
                if (button.hoverStart != null) button.hoverStart.stop();
                button.hoverEnd = this.tweens.add({
                    targets: button,
                    scaleX: 1,
                    scaleY: 1,
                    ease: "Sine.easeOut",
                    duration: 83,
                    repeat: 0,
                    yoyo: false
                });
            }, this);
            button.on("pointerup", function() {
                button.config.onClick();
                this.startSigns.forEach((sign)=>{
                    sign.slideOut();
                });
            }, this);
            button.slideOut = ()=>{
                if (!button.isInteractable) return;
                if (button.hoverStart != null) button.hoverStart.stop();
                if (button.hoverEnd != null) button.hoverEnd.stop();
                this.tweens.timeline({
                    targets: button,
                    ease: "Cubic.easeInOut",
                    duration: 500,
                    loop: 0,
                    tweens: [
                        {
                            targets: button,
                            y: button.y + button.config.firstYMove,
                            duration: 166,
                            repeat: 0,
                            yoyo: false
                        },
                        {
                            targets: button,
                            y: button.y + button.config.secondYMove,
                            alpha: 0,
                            duration: 583,
                            repeat: 0,
                            yoyo: false
                        }
                    ]
                });
            };
            this.startSigns.push(button);
        });
    }
    createGhost() {
        this.startGhost = this.add.image(435.4, 233.4, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.START_GHOST).setOrigin(0.518, 0.9131).setDepth(20);
        this.cameras.main.startFollow(this.startGhost, undefined, this.cameraFollowConfig.lerp, this.cameraFollowConfig.lerp, this.cameraFollowConfig.offsetX, this.cameraFollowConfig.offsetY);
    }
    startHellMinigame() {
        this.startGhost.setVisible(false);
        this.initHellGhost();
        this.initHellFollowRect();
        this.initHellDucks();
        this.isPlaying = true;
        this.isHell = true;
    }
    initHellGhost() {
        var ghost = this.matter.add.image(422.5, 234.6, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.GHOST_SIDE, undefined, {
            shape: this.physicsShapes["ghost-side"]
        }).setScale(this.hellGhostConfig.scaleX, 1).setDepth(20).setStatic(false).setIgnoreGravity(true);
        ghost.setCollisionCategory(this.hellGhostCollisionCategory);
        ghost.isActive = false;
        ghost.onUpdate = (delta)=>{
            ghost.setDepth(this.getHellSortingOrder(ghost.y));
            if (!ghost.isActive) {
                ghost.setVelocity(0, 0);
                return;
            }
            ghost.setAngle(0);
            var moveVector = this.cameras.main.getWorldPoint(this.input.activePointer.x, this.input.activePointer.y);
            moveVector = new Phaser.Math.Vector2(moveVector.x - ghost.x, moveVector.y - ghost.y).scale(0.025);
            ghost.setVelocity(moveVector.x, moveVector.y);
            ghost.checkForWin();
        };
        ghost.checkForWin = ()=>{
            if (ghost.x < this.hellGhostConfig.winPos.x && ghost.y < this.hellGhostConfig.winPos.y) {
                ghost.isActive = false;
                this.tweens.add({
                    targets: ghost,
                    scaleX: -2,
                    scaleY: 2,
                    alpha: 0,
                    tint: "0xFF0000",
                    ease: "Linear",
                    duration: 1000,
                    repeat: 0,
                    yoyo: false,
                    onComplete: ()=>{}
                });
                this.triggerWin(true);
            } else if (ghost.x < this.hellGhostConfig.losePos.x && ghost.y > this.hellGhostConfig.losePos.y) ghost.die();
        };
        ghost.die = ()=>{
            if (!ghost.isActive) return;
            ghost.setCollidesWith([]);
            this.triggerLose(true);
            ghost.isActive = false;
            this.tweens.timeline({
                targets: ghost,
                ease: "Cubic.easeInOut",
                duration: 1000,
                loop: 0,
                tweens: [
                    {
                        targets: ghost,
                        scaleX: -1.2,
                        scaleY: 1.2,
                        angle: 47,
                        duration: 250
                    },
                    {
                        targets: ghost,
                        scaleX: 0.1,
                        scaleY: 0.1,
                        angle: -250,
                        alpha: 0.3,
                        duration: 1200
                    }
                ]
            });
        };
        this.tweens.add({
            targets: ghost,
            x: 212.8,
            y: 281.6,
            ease: "Sine.easeInOut",
            duration: 400,
            repeat: 0,
            yoyo: false,
            onComplete: ()=>{
                ghost.isActive = true;
            }
        });
        this.cameras.main.startFollow(ghost, undefined, this.cameraFollowConfig.lerp, this.cameraFollowConfig.lerp, this.cameraFollowConfig.offsetX, this.cameraFollowConfig.offsetY);
        this.hellGhost = ghost;
    }
    initHellFollowRect() {
        //var rect = this.matter.add.rectangle(500, 240, 60, 480, {label: 'walll', isStatic: false, ignoreGravity: true});
        var rect = this.matter.add.image(800, 240, (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY.WHITE_SQUARE, undefined, {
            isStatic: true
        }).setScale(0.5, 30).setAlpha(0);
        rect.onUpdate = ()=>{
            if (!this.hellGhost.isActive) return;
            var newX = this.hellGhost.x + 150;
            if (newX < rect.x) rect.x = newX;
            rect.y = this.hellGhost.y;
        };
        this.hellFollowRect = rect;
    }
    initHellDucks() {
        this.hellDuckConfig.forEach((config)=>{
            var duck = this.matter.add.image(config.startX, config.startY, config.image, undefined, {
                shape: this.physicsShapes[config.shape]
            }).setCollidesWith([
                this.hellGhostCollisionCategory
            ]).setScale(config.scaleX, config.scaleY).setDepth(20).setStatic(false).setIgnoreGravity(true);
            this.hellDucks.push(duck);
            this.tweens.add({
                targets: duck,
                x: config.endX,
                y: config.endY,
                ease: "Sine.easeInOut",
                duration: config.tweenTime,
                repeat: -1,
                yoyo: true,
                onUpdate: ()=>{
                    duck.setDepth(this.getHellSortingOrder(duck.y));
                },
                progress: Math.random()
            });
        });
    }
    getHellSortingOrder(y) {
        var minY = -300;
        var maxY = 700;
        var minD = 100;
        var maxD = 250;
        return (y - minY) * (maxD - minD) / (maxY - minY) + minD;
    }
    createHellLevel() {
        this.matter.add.image(-760, 66, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.ROAD, undefined, {
            shape: this.physicsShapes.road
        }).setDepth(50).setCollidesWith([
            this.hellGhostCollisionCategory
        ]);
        this.add.image(-672.8, 551, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.ROAD_FIRE).setDepth(300);
    }
    startHeavenMinigame() {
        this.isPlaying = true;
        this.isHell = false;
        this.initHeavenClicker();
        this.startGhost.setVisible(false);
        this.initHeavenGhost();
    }
    initHeavenImages() {
        this.add.image(706.92, 139.7, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.STAIRS_START).setAngle(-45).setDepth(50);
        this.add.image(1097.7, -259.73, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.STAIRS_MID).setAngle(-45).setDepth(51);
        this.add.image(1602.57, -854.4, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.STAIRS_END).setDepth(52);
        this.heavenClouds.forEach((cloudConfig)=>{
            for (let cloud of cloudConfig.clouds)this.add.image(cloud.x, cloud.y, cloud.image).setScale(1.2).setDepth(cloudConfig.depth).setScrollFactor(cloudConfig.scrollFactor, cloudConfig.scrollFactor);
        });
    }
    initHeavenClicker() {
        this.swing = this.add.image(426, 413, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.SWING).setDepth(900).setScrollFactor(0);
        this.clicker = this.add.image(426, 413, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.CLICKER).setDepth(900).setScrollFactor(0);
        this.input.on("pointerdown", ()=>{
            this.handleHeavenClick();
        });
    }
    handleHeavenClick() {
        if (this.isPlaying && !this.isHell) this.heavenGhost.moveToStep(this.isClickerWithinLimits());
    }
    initHeavenGhost() {
        var ghost = this.add.image(458, 238, (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL.GHOST_SIDE).setOrigin(0.784, 0.9933).setDepth(100);
        ghost.currentStep = 0;
        ghost.currentTween = null;
        ghost.isActive = true;
        ghost.moveToStep = (up)=>{
            if (ghost.currentTween != null) ghost.currentTween.stop();
            ghost.currentStep += up ? 1 : -1;
            if (ghost.currentStep < 0) ghost.currentStep = 0;
            if (ghost.currentStep >= this.heavenSteps.length) {
                ghost.animateWin();
                ghost.isActive = false;
                return;
            }
            if (up) ghost.currentTween = this.tweens.timeline({
                targets: ghost,
                ease: "Linear",
                duration: 500,
                loop: 0,
                tweens: [
                    {
                        targets: ghost,
                        x: this.heavenSteps[ghost.currentStep].x - 25,
                        y: this.heavenSteps[ghost.currentStep].y - 15,
                        ease: "Linear",
                        duration: 250
                    },
                    {
                        targets: ghost,
                        x: this.heavenSteps[ghost.currentStep].x,
                        y: this.heavenSteps[ghost.currentStep].y,
                        ease: "Linear",
                        duration: 250
                    }
                ]
            });
            else ghost.currentTween = this.tweens.add({
                targets: ghost,
                x: this.heavenSteps[ghost.currentStep].x,
                y: this.heavenSteps[ghost.currentStep].y,
                ease: "Linear",
                duration: 500
            });
        };
        ghost.animateWin = ()=>{
            if (ghost.currentTween != null) ghost.currentTween.stop();
            ghost.currentTween = this.tweens.add({
                targets: ghost,
                x: "+=284",
                y: "-=28",
                scaleX: 1.4,
                scaleY: 1.4,
                alpha: 0,
                ease: "Sine.easeIn",
                duration: 1000
            });
            this.triggerWin(false);
        };
        ghost.moveToStep(0);
        this.cameras.main.startFollow(ghost, undefined, 0.02, 0.02, this.cameraFollowConfig.offsetX, this.cameraFollowConfig.offsetY);
        this.heavenGhost = ghost;
    }
    isClickerWithinLimits() {
        return Phaser.Math.Difference(this.clicker.x, this.swing.x) < this.clickableWidth;
    }
    _update(time, delta) {
        if (this.isPlaying) {
            if (this.isHell) {
                this.hellGhost.onUpdate(delta);
                this.hellFollowRect.onUpdate();
            } else this.moveClicker(delta);
        }
    }
    moveClicker(delta) {
        if (this.clickerMovingRight) {
            this.swingTimer += delta / this.clickerSwingTime;
            if (this.swingTimer >= 1) {
                this.clickerMovingRight = !this.clickerMovingRight;
                this.swingTimer = 1;
            }
        } else {
            this.swingTimer -= delta / this.clickerSwingTime;
            if (this.swingTimer <= 0) {
                this.clickerMovingRight = !this.clickerMovingRight;
                this.swingTimer = 0;
            }
        }
        this.clicker.x = Phaser.Math.Interpolation.SmoothStep(this.swingTimer, this.swingStartX, this.swingEndX);
    }
    _timeout() {}
    _afterLoss() {}
    _afterWin() {}
    triggerLose(isHell) {
        this.loseGame(1000);
    }
    triggerWin(isHell) {
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.HELL_COMPLETED, isHell);
        //trigger win after 1 second and load next scene
        this.winGame(1500);
    }
}




class $c5a171bd85d76b9f$export$d1deab0abf97406d extends (0, $7bc149abaca018eb$export$a95ae84b8ab23d68) {
    constructor(){
        super({
            sceneName: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.CREDITS,
            duration: 5000,
            showCountdown: true,
            startScreenColor: 0x55BAEC,
            startText: "WELCOME\nTO HEAVEN!",
            startTextYOrigin: 0.35,
            timeToStart: 1500,
            startTextColor: 0xFFFFFF,
            nextScene: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.MENU,
            endButtons: {
                normalNoSkip: {
                    x: 426.5,
                    y: 386,
                    scale: 1.30
                },
                normalWithSkip: {
                    x: 283,
                    y: 386,
                    scale: 1.30
                },
                skip: {
                    x: 570,
                    y: 386,
                    scale: 1.30
                }
            }
        });
        this.isHell = false;
    }
    _init() {
        //Reset all class variables that change during scene here (including arrays that initialize in create!)
        this.isHell = this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.HELL_COMPLETED);
        if (this.isHell) {
            this.startText = "WELCOME\nTO HELL!";
            this.startScreenColor = 0xFF0000;
            this.startTextColor = 0x000000;
        }
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).REGISTRY.GAME_COMPLETED, true);
    }
    _preload() {}
    _create() {
        this.add.image(0, 0, this.isHell ? (0, $15b72a9ad2952278$export$fadd21211b40c08a).CREDITS.HELL : (0, $15b72a9ad2952278$export$fadd21211b40c08a).CREDITS.HEAVEN).setOrigin(0, 0).setDepth(10);
        if (!this.isHell) this.add.image(85, 252, (0, $15b72a9ad2952278$export$fadd21211b40c08a).CREDITS.HEAVEN).setDepth(2);
    }
    _update(time, delta) {}
    _timeout() {
        this.winGame();
    }
    _afterLoss() {}
    _afterWin() {}
}




var $de6f59592cbbbb2f$var$LoadType;
(function(LoadType) {
    LoadType[LoadType["JSON"] = 1] = "JSON";
    LoadType[LoadType["IMAGE"] = 2] = "IMAGE";
    LoadType[LoadType["AUDIO"] = 3] = "AUDIO";
})($de6f59592cbbbb2f$var$LoadType || ($de6f59592cbbbb2f$var$LoadType = {}));
class $de6f59592cbbbb2f$export$2e2bcd8739ae039 {
    constructor(loadScene, options){
        this.loadScene = loadScene;
        this.requiredFor = typeof options.requiredFor === "undefined" ? [] : options.requiredFor;
        this.imagesKey = typeof options.imagesKey === "undefined" ? false : options.imagesKey;
        this.animations = typeof options.animations === "undefined" ? false : options.animations;
        this.physics = typeof options.physics === "undefined" ? false : options.physics;
        this.audio = typeof options.audio === "undefined" ? false : options.audio;
        this.json = typeof options.json === "undefined" ? false : options.json;
        this.loadedCallback = typeof options.loadedCallback === "undefined" ? false : options.loadedCallback;
        this.tag = typeof options.tag === "undefined" ? [] : options.tag;
        this.loaded = false;
        this.loading = false;
        this.remainingFiles = [];
    }
    Load() {
        this.loading = true;
        this.loadFiles(this.imagesKey, 2);
        this.loadFiles(this.animations, 1);
        this.loadFiles(this.physics, 1);
        this.loadFiles(this.audio, 3);
        this.loadFiles(this.json, 1);
        this.checkIfLoaded();
    }
    isBlockingScene(sceneName) {
        //If chunk is not loaded and chunk is required for scene -> chunk is blocking scene 
        return !this.loaded && this.requiredFor.indexOf(sceneName) !== -1;
    }
    handleFileComplete(key) {
        //If completed file is part of this chunk -> remove it from list of remaining files
        var fileIndex = this.remainingFiles.indexOf(key);
        if (fileIndex === -1) return;
        this.remainingFiles.splice(fileIndex, 1);
        this.checkIfLoaded();
    }
    checkIfLoaded() {
        this.loaded = this.remainingFiles.length == 0;
        if (this.loaded) {
            this.loading = false;
            // console.log(this.requiredFor[0] + " CHUNK LOADED");
            if (this.loadedCallback) this.loadedCallback();
        }
    }
    loadFiles(files, loadType) {
        if (!files) return;
        for(let f in files){
            if (this.isAlreadyLoaded(files[f], loadType)) {
                (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Skipping file load " + files[f] + " - already loaded. You should check why a double load was attempted.");
                continue;
            }
            switch(loadType){
                case 1:
                    this.loadScene.load.json(files[f], files[f]);
                    break;
                case 3:
                    this.loadScene.load.audio(files[f], files[f]);
                    break;
                case 2:
                    this.loadScene.load.image(files[f], files[f]);
                    break;
            }
            this.remainingFiles.push(files[f]);
        }
    }
    hasTag(tag) {
        return this.tag.some((t)=>t === tag);
    }
    isLoaded() {
        return this.loaded;
    }
    isLoading() {
        return this.loading;
    }
    isAlreadyLoaded(key, loadType) {
        var data = this.GetCacheDataForKey(key, loadType);
        return !(data === undefined || data === "__MISSING");
    }
    GetCacheDataForKey(key, loadType) {
        switch(loadType){
            case 1:
                return this.loadScene.cache.json.get(key);
            case 3:
                return this.loadScene.cache.audio.get(key);
            case 2:
                return this.loadScene.textures.get(key).key;
        }
    }
}


class $2fba7fa75fad9307$export$1786b98a6337e7e4 extends Phaser.Scene {
    constructor(){
        super({
            key: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROGRESSIVE_LOAD
        });
        this.loadQueue = [];
        this.loadedChunks = [];
    }
    //Load 
    init() {
        this.registry.set((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROGRESSIVE_LOAD, this);
        this.loadQueue = [
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.FLY
                ],
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.WIN,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.LOSE
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.FLY
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).FLY,
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.FLY_WIN
                ],
                physics: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).PHYSICS.FLY_SHAPES
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROTECT
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PROTECT,
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_BODY,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_HAND1,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNYDIE_HAND2,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNY_HAND1,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GRANNY_HAND2
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROTECT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.GHOSTBUSTERS
                ],
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GHOST_IDLE
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PROTECT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PARTY
                ],
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.WIN_IMAGE_POPUP
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK
                ],
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SOUNDTRACK
                ],
                loadedCallback: ()=>{
                    this.registry.get((0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SOUNDTRACK).switchMusic();
                }
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.ALAN
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).ALAN
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.DRESSUP,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SORT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.ALAN
                ],
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.GRAB
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.JUMPSCARE
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).JUMPSCARE,
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SCARE1,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.SCARE2,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.CLICK
                ],
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.SCARYARM_BACK,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.SCARYARM_FRONT
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COMEDIAN
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COMEDIAN,
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.COMEDIAN_HAND_1,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.COMEDIAN_HAND_2
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.PARTY
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).PARTY,
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.PARTY_MUSIC
                ],
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.BLUE_LIGHT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GREEN_LIGHT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.PINK_LIGHT,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.NOTE_DEATH
                ],
                json: (0, $15b72a9ad2952278$export$fadd21211b40c08a).JSONPARTY
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.DRESSUP
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).DRESSUP,
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.BOUNCE
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.COLLECT
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).COLLECT,
                audio: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).AUDIO.WINK
                ],
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.CANDY_DIE,
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.CANDY_IDLE
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.SORT
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).SORT
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.GHOSTBUSTERS
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).GHOSTBUSTERS,
                animations: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).ANIMATIONS.GHOST_DIE
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.HEAVENHELL
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).HEAVENHELL,
                physics: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).PHYSICS.HEAVENHELL_SHAPES
                ]
            }),
            new (0, $de6f59592cbbbb2f$export$2e2bcd8739ae039)(this, {
                requiredFor: [
                    (0, $15b72a9ad2952278$export$fadd21211b40c08a).SCENES.CREDITS
                ],
                imagesKey: (0, $15b72a9ad2952278$export$fadd21211b40c08a).CREDITS
            })
        ];
    }
    preload() {
        this.load.on("filecomplete", (key, file)=>{
            //console.log("File complete: " + key);
            if (!this.currChunk) return;
            this.currChunk.handleFileComplete(key);
        }, this);
    }
    update() {
        this.loadNextChunkNew();
    }
    loadNextChunkNew() {
        //return if all chunks are loaded
        if (this.loadQueue.length == 0 && !this.currChunk) return;
        //Start loading next chunk if nothing is loading at the moment
        if (!this.currChunk) {
            //console.log("loading next chunk");
            this.currChunk = this.loadQueue.shift();
            return;
        }
        //Start loading current chunk if no chunk is loading already
        if (!this.currChunk.isLoaded() && !this.currChunk.isLoading()) {
            this.currChunk.Load();
            this.load.start();
        }
        //Add current chunk to loaded chunks after it is loaded
        if (this.currChunk.isLoaded()) {
            this.loadedChunks.push(this.currChunk);
            this.currChunk = undefined;
        }
    }
    prioritizeChunksWithTag(tag) {
        // console.log("Prioritizing chunks with tag: " + tag);
        var tagChunks = this.loadQueue.filter((chunk)=>chunk.hasTag(tag));
        var otherChunks = this.loadQueue.filter((chunk)=>!chunk.hasTag(tag));
        this.loadQueue = [
            ...tagChunks,
            ...otherChunks
        ];
    }
    isSceneLoaded(sceneName) {
        if (this.currChunk && this.currChunk.isBlockingScene(sceneName)) return false;
        for (let chunk of this.loadQueue){
            if (chunk.isBlockingScene(sceneName)) return false;
        }
        return true;
    }
}


var $135a551d03a1b190$exports = {};
"use strict";
Object.defineProperty($135a551d03a1b190$exports, "__esModule", {
    value: true
});
$135a551d03a1b190$exports.storageFactory = void 0;
function $135a551d03a1b190$var$storageFactory(getStorage) {
    var inMemoryStorage = {};
    function isSupported() {
        try {
            var testKey = "__some_random_key_you_are_not_going_to_use__";
            getStorage().setItem(testKey, testKey);
            getStorage().removeItem(testKey);
            return true;
        } catch (e) {
            return false;
        }
    }
    function clear() {
        if (isSupported()) getStorage().clear();
        else inMemoryStorage = {};
    }
    function getItem(name) {
        if (isSupported()) return getStorage().getItem(name);
        if (inMemoryStorage.hasOwnProperty(name)) return inMemoryStorage[name];
        return null;
    }
    function key(index) {
        if (isSupported()) return getStorage().key(index);
        else return Object.keys(inMemoryStorage)[index] || null;
    }
    function removeItem(name) {
        if (isSupported()) getStorage().removeItem(name);
        else delete inMemoryStorage[name];
    }
    function setItem(name, value) {
        if (isSupported()) getStorage().setItem(name, value);
        else inMemoryStorage[name] = String(value);
    }
    function length() {
        if (isSupported()) return getStorage().length;
        else return Object.keys(inMemoryStorage).length;
    }
    return {
        getItem: getItem,
        setItem: setItem,
        removeItem: removeItem,
        clear: clear,
        key: key,
        get length () {
            return length();
        }
    };
}
$135a551d03a1b190$exports.storageFactory = $135a551d03a1b190$var$storageFactory;



const $7f742d17b21c8ef7$var$local = (0, $135a551d03a1b190$exports.storageFactory)(()=>localStorage);
class $7f742d17b21c8ef7$export$4b75421604609cf7 extends Phaser.Plugins.BasePlugin {
    constructor(pluginManager){
        super(pluginManager);
        this.initialized = false;
    }
    initialize() {
        this.initialized = true;
    }
    getItem(key, defaultValue = "") {
        var item = $7f742d17b21c8ef7$var$local.getItem(key);
        return item ? item : defaultValue;
    }
    setItem(key, value) {
        (0, $853b94ecf165ba5a$export$9e165481be275d2d).Debug("Saving key: " + key + " value: " + value);
        $7f742d17b21c8ef7$var$local.setItem(key, value);
    }
    removeItem(key) {
        $7f742d17b21c8ef7$var$local.removeItem(key);
    }
    isLocalStorageSupported() {
        try {
            const testKey = "isLocalStorageSupported";
            localStorage.setItem(testKey, testKey);
            localStorage.removeItem(testKey);
            return true;
        } catch (e) {
            return false;
        }
    }
}


const $d7288bdde04b3a7b$var$audioEnabledKey = "audioEnabled";
class $d7288bdde04b3a7b$export$82c9ecd3e5f5431c extends Phaser.Plugins.BasePlugin {
    constructor(pluginManager){
        super(pluginManager);
        this.storagePlugin = pluginManager.get("StoragePlugin");
        this.audioEnabled = JSON.parse(this.storagePlugin.getItem($d7288bdde04b3a7b$var$audioEnabledKey, "true"));
        this.isCommercialBreak = false;
        this.pluginManager.game.sound.mute = !this.audioEnabled;
        this.initialized = false;
    }
    initialize() {
        this.initialized = true;
    }
    toggleAudioEnabled() {
        this.audioEnabled = !this.audioEnabled;
        this.storagePlugin.setItem($d7288bdde04b3a7b$var$audioEnabledKey, this.audioEnabled.toString());
        this.updateAudioMute();
        return this.isAudioEnabled();
    }
    isAudioEnabled() {
        return this.audioEnabled;
    }
    beforeCommercialBreak() {
        this.isCommercialBreak = true;
        this.updateAudioMute();
    }
    afterCommercialBreak() {
        this.isCommercialBreak = false;
        this.updateAudioMute();
    }
    updateAudioMute() {
        this.pluginManager.game.sound.mute = !this.audioEnabled || this.isCommercialBreak;
    }
}



/*
This plugin was sourced from:
https://phaser.discourse.group/t/matter-physics-in-phaser-v3-60-to-v3-80/13398/2
Problem with matter physics is that it depends on frame rate - physics is running much faster on high refresh rate displays,
which is a problem. We want physics to run framerate independent.
This plugin runs matter physics manually and simulates 60fps, regardless of actual fps.  
*/ const { DESTROY: $77e4cef0ea5be10c$var$DESTROY, SHUTDOWN: $77e4cef0ea5be10c$var$SHUTDOWN, START: $77e4cef0ea5be10c$var$START, UPDATE: $77e4cef0ea5be10c$var$UPDATE } = Phaser.Scenes.Events;
class $77e4cef0ea5be10c$export$76bd3940c138cad1 extends Phaser.Plugins.ScenePlugin {
    boot() {
        console.debug("boot");
        if (!this.systems.matterPhysics) throw new Error("Matter Physics must be enabled in this scene");
        if (this.systems.matterPhysics.config.autoUpdate) throw new Error("Matter Physics config must have `autoUpdate: false`");
        this.systems.events.on($77e4cef0ea5be10c$var$START, this.sceneStart, this).on($77e4cef0ea5be10c$var$SHUTDOWN, this.sceneShutdown, this).on($77e4cef0ea5be10c$var$DESTROY, this.sceneDestroy, this).on($77e4cef0ea5be10c$var$UPDATE, this.sceneUpdate, this);
    }
    sceneDestroy() {
        this.systems.events.off($77e4cef0ea5be10c$var$START, this.sceneStart, this).off($77e4cef0ea5be10c$var$SHUTDOWN, this.sceneShutdown, this).off($77e4cef0ea5be10c$var$DESTROY, this.sceneDestroy, this).off($77e4cef0ea5be10c$var$UPDATE, this.sceneUpdate, this);
    }
    sceneStart() {}
    sceneShutdown() {}
    sceneUpdate(time, delta) {
        const { matterPhysics: matterPhysics } = this.systems;
        const { deltaMin: deltaMin } = matterPhysics.world.runner;
        this.accum += delta;
        while(this.accum >= deltaMin){
            matterPhysics.step(deltaMin);
            this.accum -= deltaMin;
        }
    }
    constructor(...args){
        super(...args);
        this.accum = 0;
    }
}


let $ad2bcec7a0192558$var$game = new Phaser.Game({
    width: 853,
    height: 480,
    plugins: {
        scene: [
            {
                key: "MatterFixedStepPlugin",
                plugin: (0, $77e4cef0ea5be10c$export$76bd3940c138cad1),
                start: true
            }
        ],
        global: [
            {
                key: "AnalyticsPlugin",
                plugin: (0, $a04efaba6a5d950c$export$ca681bfeb2cf0fca),
                mapping: "analyticsPlugin",
                start: true
            },
            {
                key: "StoragePlugin",
                plugin: (0, $7f742d17b21c8ef7$export$4b75421604609cf7),
                mapping: "storagePlugin",
                start: true
            },
            {
                key: "AudioPlugin",
                plugin: (0, $d7288bdde04b3a7b$export$82c9ecd3e5f5431c),
                mapping: "audioPlugin",
                start: true
            }
        ]
    },
    scale: {
        mode: Phaser.Scale.FIT
    },
    scene: [
        (0, $1bb8838b0c7bd3a3$export$50427b92ba00a41),
        (0, $2fba7fa75fad9307$export$1786b98a6337e7e4),
        (0, $7e3af3e6538b9494$export$ec537e24d5ef2139),
        (0, $30cfeaa254875b8b$export$fe1abc4519a61930),
        (0, $90b73073ed93cc41$export$5a7193867a8ddcde),
        (0, $17f95e08298fe14a$export$89277b30c9a55d84),
        (0, $522ac35d4a1007ad$export$18428d7a835c750a),
        (0, $941584daeca322cb$export$bafad7fa9befd557),
        (0, $46b8af1dbd1f4150$export$e25633fb7e427304),
        (0, $e835cf3a9fefe459$export$42823faa9c164e77),
        (0, $7f6434558235e63d$export$def92445f4ee0fe0),
        (0, $ad922659170600fa$export$3b0026e04cdf636f),
        (0, $44d3b3a49b52c719$export$8a08663797ad7362),
        (0, $a18eea013500063a$export$57a2705f35084abc),
        (0, $827cd981b8e304ce$export$a22f592da096801e),
        (0, $c5a171bd85d76b9f$export$d1deab0abf97406d)
    ],
    physics: {
        default: "matter",
        matter: {
            debug: false,
            autoUpdate: false
        }
    }
});


//# sourceMappingURL=index.fc14028a.js.map
