!function(){const e=function(){this.__mouseDown=!1,this.__mousePos={x:0,y:0},this.__keyCodes={},this.__keyPressed={},this.__modifiers={};var e=this;this.__onKeyDown=function(t){e.__onKeyChange(t,!0)},this.__onKeyUp=function(t){e.__onKeyChange(t,!1)},this.__onMouseDown=function(t){0==t.button&&(e.__mouseDown=!0,e.__mousePos={x:t.clientX,y:t.clientY})},this.__onMouseMove=function(t){e.__mousePos={x:t.clientX,y:t.clientY}},this.__onMouseUp=function(){e.__mouseDown=!1},document.addEventListener("keydown",this.__onKeyDown,!1),document.addEventListener("keyup",this.__onKeyUp,!1),document.addEventListener("mousedown",this.__onMouseDown,!1),document.addEventListener("mousemove",this.__onMouseMove,!1),document.addEventListener("mouseup",this.__onMouseUp,!1)};e.__MODIFIERS=["shift","ctrl","alt","meta"],e.__ALIAS={left:37,up:38,right:39,down:40,space:32,enter:13,backspace:8,shift:16},e.prototype.__onKeyChange=function(e,t){var o=e.keyCode;this.__keyCodes[o]=t,this.__keyPressed[o]=t,this.__modifiers.shift=e.shiftKey,this.__modifiers.ctrl=e.ctrlKey,this.__modifiers.alt=e.altKey,this.__modifiers.meta=e.metaKey},e.prototype.pressed=function(t,o){for(var i=t.split("+"),a=0;a<i.length;a++){var _,n=i[a];if(-1!==e.__MODIFIERS.indexOf(n)?_=this.__modifiers[n]:-1!=Object.keys(e.__ALIAS).indexOf(n)?(_=this.__keyCodes[e.__ALIAS[n]],o&&(_=this.__keyPressed[e.__ALIAS[n]],this.__keyPressed[e.__ALIAS[n]]=!1)):(_=this.__keyCodes[n.toUpperCase().charCodeAt(0)],o&&(_=this.__keyPressed[n.toUpperCase().charCodeAt(0)],this.__keyPressed[n.toUpperCase().charCodeAt(0)]=!1)),!_)return!1}return!0},e.prototype.update=function(){this.__keyPressed={}};class t{constructor(e,t,o){this.l=e,this.c=t,this.n=o,this.p=null}r(){this.p?this.p.n=this.n:this.l.h=this.n,this.n&&(this.n.p=this.p),this.l=this.c=this.n=this.p=null}}class o{constructor(){this.h=null}add(e){const o=new t(this,e,this.h);return this.h&&(this.h.p=o),this.h=o,o}i(e){let t=this.h;for(;t;)e(t.c),t=t.n}}const a=(e,t)=>{const o=document.createElement("canvas");return o.width=e,o.height=t,o};const _={t:0};var n,s,r=0;class l{constructor(e,t){if(!(this instanceof l))return new l(e,t);this.set(e,t)}set(e,t){return this.x=e||0,this.y=t||(0===t?0:this.x),this}}class d{constructor(e){this.z=e,this.clear()}add(e){e.remove(),e.l=this,e.n=(e.m||1!==e.a||0===e.frame.p.a?this.t:this.o).add(e)}clear(){this.o=new o,this.t=new o}}const c=(e,t)=>{const i=new d(0),c=[i],h=new ArrayBuffer(4456380),u=new Float32Array(h),p=new Uint32Array(h),m=e.getContext("webgl",{antialias:!1}),y=m.getExtension("ANGLE_instanced_arrays"),f=(e,t)=>{const o=m.createShader(t);return m.shaderSource(o,e),m.compileShader(o),o};s=m.createProgram(),m.attachShader(s,f("attribute vec2 g;\nattribute vec2 a;\nattribute vec2 t;\nattribute float r;\nattribute vec2 s;\nattribute vec4 c;\nattribute float z;\nattribute vec4 u;\nattribute vec4 y;\nuniform mat4 m;\nvarying vec2 v;\nvarying vec2 d;\nvarying vec4 i;\nvoid main(){\nv=u.xy+g*u.zw;\nd=y.xy+g*y.zw;\ni=vec4(c.abg*c.r,c.r);\nvec2 p=(g-a)*s;\nfloat q=cos(r);\nfloat w=sin(r);\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\np+=a+t;\ngl_Position=m*vec4(p,z,1);}",35633)),m.attachShader(s,f("precision mediump float;\nuniform sampler2D x;\nuniform sampler2D k;\nuniform float j;\nuniform float time;\nuniform float haze;\nvarying vec2 v;\nvarying vec2 d;\nvarying vec4 i;\nvoid main(){\n\n\nfloat frequency=50.0;\nfloat amplitude=0.0002;\nfloat speed=0.1;\n\nfloat distortion = 0.0;\nif(haze>0.0){distortion = sin(v.y*frequency+time*speed)*amplitude*haze;};\nvec2 v2 = vec2(v.x+distortion, v.y);\n\nvec4 c=texture2D(x,v2);\nvec4 r=c*i;\nif(j>0.0){\nif(c.a<j)discard;\nr.rgb/=r.a;\nr.a=1.0;};\n//vec4 m=vec4(1.0,1.0,1.0,1.0);\nvec4 m=vec4(1.0);\n\nif(d.x+d.y!=0.0){m=texture2D(k,d);};\n\ngl_FragColor=r*m;}",35632)),m.linkProgram(s);const g=(e,t,o)=>{m.bindBuffer(e,m.createBuffer()),m.bufferData(e,t,o||35044)},v=(e,t,o,i,a,_,n)=>{const r=m.getAttribLocation(s,e);m.enableVertexAttribArray(r),m.vertexAttribPointer(r,t,_||5126,!!n,o||0,a||0),i&&y.vertexAttribDivisorANGLE(r,i)};g(34963,new Uint8Array([0,1,2,2,1,3])),g(34962,new Float32Array([0,0,0,1,1,0,1,1])),v("g",2),g(34962,h,35048),v("t",2,68,1),v("r",1,68,1,8),v("a",2,68,1,12),v("s",2,68,1,20),v("c",4,68,1,28,5121,!0),v("z",1,68,1,32),v("u",4,68,1,36),v("y",4,68,1,52);const x=m.getParameter(3379),S=e=>m.getUniformLocation(s,e),w=S("m"),b=S("x"),k=S("k"),P=S("j"),M=S("haze");m.useProgram(s),m.pixelStorei(37441,!0),m.enable(3042),m.blendFunc(1,771),m.enable(2929),m.uniform1i(b,0),m.uniform1i(k,1);const F=[];let C,T,A,E,D,H,I,z,B=0;const L=()=>(E=0|e.clientWidth,D=0|e.clientHeight,E=q.camera.width,D=q.camera.height,H=e.width!==E||e.height!==D),R=()=>{B&&(I&&(H&&(e.width=E,e.height=D),m.viewport(0,0,E,D),m.clear(16640),I=H=!1),m.depthFunc(515),m.uniform1f(P,0),m.activeTexture(33984),m.bindTexture(3553,C.t),m.activeTexture(33985),m.bindTexture(3553,T||C.t),m.bufferSubData(34962,0,u.subarray(0,17*B)),y.drawElementsInstancedANGLE(4,6,5121,0,B),B=0)},O=[0,0,0,0],G=e=>{if(!e.visible||!e.shared.visible)return;65535===B&&R();const{frame:t}=e;C.t!==t.p.t&&(R(),C=t.p);const o=e.m;o&&T!==o.p.t&&(R(),T=o.p.t),m.uniform1f(M,e.haze);let i=17*B;u[i++]=e.position.x,u[i++]=e.position.y,u[i++]=e.rotation-+e.billboard*A,u[i++]=e.anchor.x,u[i++]=e.anchor.y,u[i++]=e.scale.x*t.size.x,u[i++]=e.scale.y*t.size.y,p[i++]=((16777215&(e.shared.tint?e.shared.tint:e.tint))<<8|255*e.a&255)>>>0,u[i++]=e.l.z,u.set(t.uvs,i),u.set(o?o.uvs:O,i+4),B++},j=(e,t)=>{let o=e.find(e=>e.z===t);return o||(o=new d(t),e.push(o),e.sort((e,t)=>t.z-e.z)),o},q={gl:m,atlas:(e,t,i,_)=>{_=Math.min(_||x,x);const n=a(_,1),s=n.getContext("2d"),r=s.drawImage.bind(s),d=new o;let c=1,h=0,u=0,p=0,y=!0;const f={t:m.createTexture(),a:0===e?0:e||1,b(){y&&(m.bindTexture(3553,f.t),m.texParameteri(3553,10240,9728|+t),m.texParameteri(3553,10241,9728|+t|+i<<8|+i<<1),m.texImage2D(3553,0,6408,6408,5121,n),i&&m.generateMipmap(3553),y=!1)}};return F.push(f),{width:_,frame(e,t,o,i,s=e.width,m=e.height){s+2>_-h&&(u+=p,h=0,p=0);let g=1;for(;m+2>c*g-u;)g*=2;if(g>1){const e=a(_,c);e.getContext("2d").drawImage(n,0,0),c*=g,n.height=c,r(e,0,0),d.i(e=>e(g))}r(e,o||0,i||0,s,m,h+1,u+1,s,m);const v=[(h+1)/_,(u+1)/c,s/_,m/c];return d.add(e=>{v[1]/=e,v[3]/=e}),h+=s+2,p=Math.max(p,m+2),y=!0,{size:new l(s,m),uvs:v,p:f,subframe(e,t,o,i){const a=[v[0]+e/_,v[1]+t/c,o/_,i/c];let n=c;return{size:new l(o,i),get uvs(){if(n!==c){const e=c/n;a[1]/=e,a[3]/=e,n=c}return a},p:f}}}}}},get width(){return E},get height(){return D},camera:{at:new l,to:new l,angle:0,zoom:{x:1,y:1},width:500,height:500},background(e,t,o,i=1){m.clearColor(e*i,t*i,o*i,i)},layer:j.bind(null,c),ui:j.bind(null,[]),add(e){i.add(e)},resize:L,screenToWorldPoint:e=>({x:(e.x-z[12])/z[0],y:(e.y-z[13])/z[5]}),worldToScreenPoint:e=>({x:e.x*z[0]+z[12],y:e.y*z[5]+z[13]}),updateSceneProjection(){const{at:e,to:t,angle:o,zoom:i}=q.camera,a=e.x-E*t.x,_=e.y-D*t.y,n=Math.cos(o),s=Math.sin(o),r=2/E,l=-2/D;z=[n*r*i.x,s*l*i.y,0,0,-s*r*i.x,n*l*i.y,0,0,0,0,-1e-5,0,((e.x*(1-n)+e.y*s)*r-2*a/E-1)*i.x,((e.y*(1-n)-e.x*s)*l+2*_/D+1)*i.y,0,1]},render(){var e=performance.now();n||(n=e),r+=(e-n)/(1e3/60),n=e;var t=m.getUniformLocation(s,"time");m.uniform1f(t,r),t=m.getUniformLocation(s,"haze"),m.uniform1f(t,0),!H&&L(),I=!0,F.forEach(e=>e.b()),C=_,T=0;const{angle:o}=q.camera;this.updateSceneProjection(),m.uniformMatrix4fv(w,!1,z),A=o;for(let e=c.length-1;e>=0;e--)c[e].t.i(G);R()}};return L(),q};c.Point=l,c.Sprite=class{constructor(e,t){Object.assign(this,{frame:e,visible:!0,shared:{visible:!0},billboard:!1,position:new l,rotation:0,anchor:new l,scale:new l(1),tint:16777215,haze:0,m:null,a:1,l:null,n:null},t)}get alpha(){return this.a}set alpha(e){const t=e<1&&1===this.a||1===e&&this.a<1;this.a=e,t&&this.frame.p.a>0&&this.l&&this.l.add(this)}get mask(){return this.m}set mask(e){this.m=e,this.l&&this.l.add(this)}remove(){this.n&&this.n.r(),this.l=null,this.n=null}};const h="MacIntel"===window.navigator.platform&&void 0!==window.navigator.standalone&&navigator.maxTouchPoints>1,u=/Mobi|Android/i.test(navigator.userAgent)||h;class p{constructor(e,t){this.canvas=document.createElement("canvas"),this.canvas.style="\n            position:absolute;\n            pointer-events:none;\n        ",document.body.appendChild(this.canvas),this.frames=e,this.context=this.canvas.getContext("2d"),this.next=null,this.lastParticle=null,this.image=new Image,this.image.src=t,this.resize()}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}spawnParticles(e,t,o,i){for(var a=0;a<e;a++){const e=new m(this.image,this.frames[Math.round(27*Math.random())],t,o,i);this.lastParticle&&this.lastParticle.alive?e.prev=this.lastParticle:e.prev=this,this.lastParticle&&this.lastParticle.alive&&(this.lastParticle.next=e),this.lastParticle=e,this.next||(this.next=e)}}update(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let t=this.next;for(;t;)t.draw(this.context),t.update(e),t.progress>=1&&t.destroy(),t=t.next}}class m{constructor(e,t,o,i,a){this.settings=Object.assign({minXSpeed:0,maxXSpeed:0,minYSpeed:0,maxYSpeed:0,xAccel:0,yAccel:0,minRSpeed:0,maxRSpeed:0,moveRotate:!1,maxLifeTime:1e3},a),this.lifeTime=0,this.xSpeed=this.settings.minXSpeed+Math.random()*(this.settings.maxXSpeed-this.settings.minXSpeed),this.ySpeed=this.settings.minYSpeed+Math.random()*(this.settings.maxYSpeed-this.settings.minYSpeed),this.rSpeed=this.settings.minRSpeed+Math.random()*(this.settings.maxRSpeed-this.settings.minRSpeed),this.next=null,this.prev=null,this.texture=e,this.x=o,this.y=i,this.rotation=0,this.progress=0,this.alive=!0,this.frame=t}draw(e){const t=this.x-1*this.frame.__size.x/2,o=this.y-1*this.frame.__size.y/2,i=this.rotation;e.translate(t,o),e.rotate(i),e.drawImage(this.texture,this.frame.__position.x,this.frame.__position.y,this.frame.__size.x,this.frame.__size.y,0,0,1*this.frame.__size.x,1*this.frame.__size.y),e.rotate(-i),e.translate(-t,-o)}update(e){this.lifeTime+=e,this.progress=this.lifeTime/this.settings.maxLifeTime,e/=1e3,this.xSpeed+=this.settings.xAccel*e,this.ySpeed+=this.settings.yAccel*e,this.x+=this.xSpeed*e,this.y+=this.ySpeed*e,"x"==this.settings.moveRotate?this.rotation+=this.xSpeed/3e3:"y"==this.settings.moveRotate?this.rotation+=this.ySpeed/3e3:this.rotation+=this.rSpeed*e}destroy(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.alive=!1}}const y={__loadedData:null,__sdkInit:!1,__playingAd:!1,__adsBlocked:!1,__joinedGame:!1,__debug:!1,__maxClients:100,__levelRadius:1e4,__maxScreenWidth:1280,__maxScreenHeight:1280,__targetScreenSize:1280,__playerSpeed:250,__playerRotationSpeed:5,__physicsStep:15,__desyncDistanceTolerance:50,__saveName:"sushisnakeio-211020",__bigUpdateTick:120,__leaderBoardLength:10,__leaderBoardInterval:60,__adTimeoutViewable:3e3,__cameraSmooth:.1,__cameraMaxZoom:4,__cameraWidthToZoomFactor:1.4,__maxSnakeSize:100,__snakeStartWidth:40,__snakeBaseWidth:120,__snakeCollisionSize:200,__snakeCollisionIntolerance:15,__snakeSegmentDistance:20,__snakeSegments:10,__snakeMaxSegments:100,__snakeMaxSegmentsFood:5e3,__snakeMaxWidth:200,__snakeMaxWidthFood:1e4,__snakeShrinkDamper:.8,__snakeLengthGrowthFoodInterval:5,__collisionIntolerancePixels:5,__outlinePixels:5,__newSnakeInvisibilityTimer:3e3,__snakeTimeToRealDeath:500,__snakeAcceleration:2,__snakeTurdInterval:150,__snakeStartingFood:20,__maxNameLength:20,__songVolume:.8,__maxFood:1e4,__buildFoodInterval:500,__buildFoodQuantity:.1,__foodMinDistribution:10,__foodCollisionSize:100,__foodCollisionTolerance:35,__numSmallFoods:20,__cleanFoodInterval:100,__cleanFoodProcessAmmount:50,__foodPopTiming:200,__foodBigPixelChance:300,__foodBigValue:10,__foodExplosionMaxFoods:2e3,__buildGachaInterval:1800,__buildGachaQuanity:5,__maxGachaDistance:1500,__nonEventHats:21,__floorTileSize:256,__layerGrass:1,__layerMisc:2,__layerSnakeShadowParts:3,__layerSnakeParts:4,__layerHats:105,__layerFood:106,__layerSmokeClouds:107,__layerIndicators:108,__layerIndicatorsObject:109,__fillAIThreshold:1,__aiSpawnTick:10,__hatUnlockAmmount:[2,3,3,5,5,8,8,10,14,16,20,24,28,32,32,40,44,50,75,100,100,50,50,50,50,50,50,50,50,50,50,50,50,32,32,32,32,32,32,32,32],__hatIsEars:[!1,!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!1,!1,!1,!0,!1,!1,!1,!1,!0,!1,!1,!1,!1,!0,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],__achievements:{foodsEaten:{tiers:[50,500,5e4],body:"Eat $ sushi's",id:1},snakesKilled:{tiers:[5,50,200],body:"Pop $ snakes",id:2},snakeSize:{tiers:[100,2e3,1e4],body:"Length $ meters",id:3},rePlays:{tiers:[3,15,30],body:"Return for $ days",id:4},hatsCollected:{tiers:[4,8,12],body:"Collect $ hats",id:5},earsCollected:{tiers:[2,4,6],body:"Collect $ ears",id:6},totalDeaths:{tiers:[80,240,480],body:"Die $ times",id:7},surviveTime:{tiers:[5,15,45],body:"Survive for $ minutes",id:8},pooEaten:{tiers:[50,200,600],body:"Eat $ poo",id:9}},__DEG2RAD:.017453292519943295,__RAD2DEG:57.29577951308232,__messageType:{__serverUpdate:"s",__joinGame:"j",__findGame:"f",__userJoins:"u",__userLeft:"l",__userInput:"i",__userPing:"p",__userPong:"q",__userDies:"d",__requestDisconnect:"x",__buildFood:"f",__spawnTurd:"t",__spawnGacha:"g",__leaderBoard:"r"},__serverList:["https://backend.sushiparty.io","https://backend-eu.sushiparty.io"]},f=(e,t)=>{try{let o;const i=localStorage.getItem(y.__saveName);i&&(o=JSON.parse(window.atob(i))),"all"==t?o=e:o[t]=e,localStorage.setItem(y.__saveName,window.btoa(JSON.stringify(o)))}catch(e){}},g=[],v=()=>{g.forEach(e=>{if("gacha"==e.n){x(e.el,y.__loadedData.gacha);let t=e.el.querySelector(".nt");t.classList.remove("inc"),y.__loadedData.gacha<=0&&(t.classList.add("inc"),t.style.visibility="visible",t.innerText="+1")}else"achievements"==e.n?x(e.el,y.__loadedData.unlockedAchievements):"shop"==e.n&&x(e.el,y.__loadedData.unlockedHats)})},x=(e,t)=>{let o=e.querySelector(".nt");o||((o=document.createElement("div")).classList.add("nt"),e.appendChild(o)),o.innerText=t,o.style.visibility=0==t?"hidden":"visible"};var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(e,t){return e(t={exports:{}},t.exports),t.exports}var b=w((function(e,t){
/*! howler.js v2.1.2 | (c) 2013-2019, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||d(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var a=t._howls[i]._getSoundIds(),_=0;_<a.length;_++){var n=t._howls[i]._soundById(a[_]);n&&n._node&&(n._node.volume=n._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||d(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var a=t._howls[i]._getSoundIds(),_=0;_<a.length;_++){var n=t._howls[i]._soundById(a[_]);n&&n._node&&(n._node.muted=!!e||n._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,d()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),a=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),_=a&&parseInt(a[0].split("/")[1],10)<33;return e._codecs={mp3:!(_||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(o){for(var i=0;i<e.html5PoolSize;i++)try{var a=new Audio;a._unlocked=!0,e._releaseHtml5Audio(a)}catch(o){e.noAudio=!0}for(i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var _=e._howls[i]._getSoundIds(),n=0;n<_.length;n++){var s=e._howls[i]._soundById(_[n]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var r=e.ctx.createBufferSource();r.buffer=e._scratchBuffer,r.connect(e.ctx.destination),void 0===r.start?r.noteOn(0):r.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),r.onended=function(){r.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var o=0;o<e._howls.length;o++)e._howls[o]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){})),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then((function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())})))}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new e,i=function(e){e.src&&0!==e.src.length&&this.init(e)};i.prototype={init:function(e){var t=this;return o.ctx||d(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onloadprogress=e.onloadprogress?[{fn:e.onloadprogress}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(!o.noAudio){"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var _,s;if(e._format&&e._format[i])_=e._format[i];else{if("string"!=typeof(s=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(_=/^data:audio\/([^;,]+);/i.exec(s))||(_=/\.([^.]+)$/.exec(s.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_&&o.codecs(_)){t=e._src[i];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&n(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")}e._emit("loaderror",null,"No audio support.")},play:function(e,t){var i=this,a=null;if("number"==typeof e)a=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var _=0,n=0;n<i._sounds.length;n++)i._sounds[n]._paused&&!i._sounds[n]._ended&&(_++,a=i._sounds[n]._id);1===_?e=null:a=null}}var s=a?i._soundById(a):i._inactiveSound();if(!s)return null;if(a&&!e&&(e=s._sprite||"__default"),"loaded"!==i._state){s._sprite=e,s._ended=!1;var r=s._id;return i._queue.push({event:"play",action:function(){i.play(r)}}),r}if(a&&!s._paused)return t||i._loadQueue("play"),s._id;i._webAudio&&o._autoResume();var l=Math.max(0,s._seek>0?s._seek:i._sprite[e][0]/1e3),d=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-l),c=1e3*d/Math.abs(s._rate),h=i._sprite[e][0]/1e3,u=(i._sprite[e][0]+i._sprite[e][1])/1e3,p=!(!s._loop&&!i._sprite[e][2]);s._sprite=e,s._ended=!1;var m=function(){s._paused=!1,s._seek=l,s._start=h,s._stop=u,s._loop=p};if(!(l>=u)){var y=s._node;if(i._webAudio){var f=function(){i._playLock=!1,m(),i._refreshBuffer(s);var e=s._muted||i._muted?0:s._volume;y.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===y.bufferSource.start?s._loop?y.bufferSource.noteGrainOn(0,l,86400):y.bufferSource.noteGrainOn(0,l,d):s._loop?y.bufferSource.start(0,l,86400):y.bufferSource.start(0,l,d),c!==1/0&&(i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),c)),t||setTimeout((function(){i._emit("play",s._id),i._loadQueue()}),0)};"running"===o.state?f():(i._playLock=!0,i.once("resume",f),i._clearTimer(s._id))}else{var g=function(){y.currentTime=l,y.muted=s._muted||i._muted||o._muted||y.muted,y.volume=s._volume*o.volume(),y.playbackRate=s._rate;try{var a=y.play();if(a&&"undefined"!=typeof Promise&&(a instanceof Promise||"function"==typeof a.then)?(i._playLock=!0,m(),a.then((function(){i._playLock=!1,y._unlocked=!0,t||(i._emit("play",s._id),i._loadQueue())})).catch((function(){i._playLock=!1,i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(i._playLock=!1,m(),i._emit("play",s._id),i._loadQueue()),y.playbackRate=s._rate,y.paused)return void i._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?i._endTimers[s._id]=setTimeout(i._ended.bind(i,s),c):(i._endTimers[s._id]=function(){i._ended(s),y.removeEventListener("ended",i._endTimers[s._id],!1)},y.addEventListener("ended",i._endTimers[s._id],!1))}catch(e){i._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===y.src&&(y.src=i._src,y.load());var v=window&&window.ejecta||!y.readyState&&o._navigator.isCocoonJS;if(y.readyState>=3||v)g();else{i._playLock=!0;var x=function(){g(),y.removeEventListener(o._canPlayEvent,x,!1)};y.addEventListener(o._canPlayEvent,x,!1),i._clearTimer(s._id)}}return s._id}i._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var o=t._getSoundIds(e),i=0;i<o.length;i++){t._clearTimer(o[i]);var a=t._soundById(o[i]);if(a&&!a._paused&&(a._seek=t.seek(o[i]),a._rateSeek=0,a._paused=!0,t._stopFade(o[i]),a._node))if(t._webAudio){if(!a._node.bufferSource)continue;void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),t._cleanBuffer(a._node)}else isNaN(a._node.duration)&&a._node.duration!==1/0||a._node.pause();arguments[1]||t._emit("pause",a?a._id:null)}return t},stop:function(e,t){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var i=o._getSoundIds(e),a=0;a<i.length;a++){o._clearTimer(i[a]);var _=o._soundById(i[a]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,o._stopFade(i[a]),_._node&&(o._webAudio?_._node.bufferSource&&(void 0===_._node.bufferSource.stop?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),o._cleanBuffer(_._node)):isNaN(_._node.duration)&&_._node.duration!==1/0||(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&o._clearSound(_._node))),t||o._emit("stop",_._id))}return o},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var a=i._getSoundIds(t),_=0;_<a.length;_++){var n=i._soundById(a[_]);n&&(n._muted=e,n._interval&&i._stopFade(n._id),i._webAudio&&n._node?n._node.gain.setValueAtTime(e?0:n._volume,o.ctx.currentTime):n._node&&(n._node.muted=!!o._muted||e),i._emit("mute",n._id))}return i},volume:function(){var e,t,i,a=this,_=arguments;if(0===_.length)return a._volume;if(1===_.length||2===_.length&&void 0===_[1]?a._getSoundIds().indexOf(_[0])>=0?t=parseInt(_[0],10):e=parseFloat(_[0]):_.length>=2&&(e=parseFloat(_[0]),t=parseInt(_[1],10)),!(void 0!==e&&e>=0&&e<=1))return(i=t?a._soundById(t):a._sounds[0])?i._volume:0;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,_)}}),a;void 0===t&&(a._volume=e),t=a._getSoundIds(t);for(var n=0;n<t.length;n++)(i=a._soundById(t[n]))&&(i._volume=e,_[2]||a._stopFade(t[n]),a._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,o.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*o.volume()),a._emit("volume",i._id));return a},fade:function(e,t,i,a){var _=this;if("loaded"!==_._state||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(e,t,i,a)}}),_;e=parseFloat(e),t=parseFloat(t),i=parseFloat(i),_.volume(e,a);for(var n=_._getSoundIds(a),s=0;s<n.length;s++){var r=_._soundById(n[s]);if(r){if(a||_._stopFade(n[s]),_._webAudio&&!r._muted){var l=o.ctx.currentTime,d=l+i/1e3;r._volume=e,r._node.gain.setValueAtTime(e,l),r._node.gain.linearRampToValueAtTime(t,d)}_._startFadeInterval(r,e,t,i,n[s],void 0===a)}}return _},_startFadeInterval:function(e,t,o,i,a,_){var n=this,s=t,r=o-t,l=Math.abs(r/.01),d=Math.max(4,l>0?i/l:i),c=performance.now();e._fadeTo=o,e._interval=setInterval((function(){var a=(performance.now()-c)/i;c=performance.now(),s+=r*a,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,n._webAudio?e._volume=s:n.volume(s,e._id,!0),_&&(n._volume=s),(o<t&&s<=o||o>t&&s>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,n.volume(o,e._id),n._emit("fade",e._id))}),d)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(i._interval),i._interval=null,t.volume(i._fadeTo,e),i._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,o,i=this,a=arguments;if(0===a.length)return i._loop;if(1===a.length){if("boolean"!=typeof a[0])return!!(o=i._soundById(parseInt(a[0],10)))&&o._loop;e=a[0],i._loop=e}else 2===a.length&&(e=a[0],t=parseInt(a[1],10));for(var _=i._getSoundIds(t),n=0;n<_.length;n++)(o=i._soundById(_[n]))&&(o._loop=e,i._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e,e&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop)));return i},rate:function(){var e,t,i,a=this,_=arguments;if(0===_.length)t=a._sounds[0]._id;else if(1===_.length){var n=a._getSoundIds(),s=n.indexOf(_[0]);s>=0?t=parseInt(_[0],10):e=parseFloat(_[0])}else 2===_.length&&(e=parseFloat(_[0]),t=parseInt(_[1],10));if("number"!=typeof e)return(i=a._soundById(t))?i._rate:a._rate;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,_)}}),a;void 0===t&&(a._rate=e),t=a._getSoundIds(t);for(var r=0;r<t.length;r++)if(i=a._soundById(t[r])){a.playing(t[r])&&(i._rateSeek=a.seek(t[r]),i._playStart=a._webAudio?o.ctx.currentTime:i._playStart),i._rate=e,a._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):i._node&&(i._node.playbackRate=e);var l=a.seek(t[r]),d=(a._sprite[i._sprite][0]+a._sprite[i._sprite][1])/1e3-l,c=1e3*d/Math.abs(i._rate);!a._endTimers[t[r]]&&i._paused||(a._clearTimer(t[r]),a._endTimers[t[r]]=setTimeout(a._ended.bind(a,i),c)),a._emit("rate",i._id)}return a},seek:function(){var e,t,i=this,a=arguments;if(0===a.length)t=i._sounds[0]._id;else if(1===a.length){var _=i._getSoundIds(),n=_.indexOf(a[0]);n>=0?t=parseInt(a[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(a[0]))}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(void 0===t)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,a)}}),i;var s=i._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var r=i.playing(t)?o.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+r*Math.abs(s._rate))}return s._node.currentTime}var d=i.playing(t);d&&i.pause(t,!0),s._seek=e,s._ended=!1,i._clearTimer(t),i._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){i._emit("seek",t),d&&i.play(t,!0)};if(d&&!i._webAudio){var h=function(){i._playLock?setTimeout(h,0):c()};setTimeout(h,0)}else c()}return i},playing:function(e){var t=this;if("number"==typeof e){var o=t._soundById(e);return!!o&&!o._paused}for(var i=0;i<t._sounds.length;i++)if(!t._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this,o=t._duration,i=t._soundById(e);return i&&(o=t._sprite[i._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(o._canPlayEvent,t[i]._loadFn,!1),o._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var a=o._howls.indexOf(e);a>=0&&o._howls.splice(a,1);var n=!0;for(i=0;i<o._howls.length;i++)if(o._howls[i]._src===e._src||e._src.indexOf(o._howls[i]._src)>=0){n=!1;break}return _&&n&&delete _[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,o,i){var a=this["_on"+e];return"function"==typeof t&&a.push(i?{id:o,fn:t,once:i}:{id:o,fn:t}),this},off:function(e,t,o){var i=this,a=i["_on"+e],_=0;if("number"==typeof t&&(o=t,t=null),t||o)for(_=0;_<a.length;_++){var n=o===a[_].id;if(t===a[_].fn&&n||!t&&n){a.splice(_,1);break}}else if(e)i["_on"+e]=[];else{var s=Object.keys(i);for(_=0;_<s.length;_++)0===s[_].indexOf("_on")&&Array.isArray(i[s[_]])&&(i[s[_]]=[])}return i},once:function(e,t,o){return this.on(e,t,o,1),this},_emit:function(e,t,o){for(var i=this,a=i["_on"+e],_=a.length-1;_>=0;_--)a[_].id&&a[_].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,o)}.bind(i,a[_].fn),0),a[_].once&&i.off(e,a[_].fn,a[_].id));return i._loadQueue(e),i},_loadQueue:function(e){var t=this;if(t._queue.length>0){var o=t._queue[0];o.event===e&&(t._queue.shift(),t._loadQueue()),e||o.action()}return t},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var a=!(!e._loop&&!t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&a&&t.stop(e._id,!0).play(e._id),t._webAudio&&a){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var _=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),_)}return t._webAudio&&!a&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),o._autoSuspend()),t._webAudio||a||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var o=t._soundById(e);o&&o._node&&o._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,o=0;o<t._sounds.length;o++)if(e===t._sounds[o]._id)return t._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,o=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&o++;for(i=e._sounds.length-1;i>=0;i--){if(o<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),o--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],o=0;o<this._sounds.length;o++)t.push(this._sounds[o]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=_[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=o._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(i,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=i*o.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)}};var _={},n=function(e){var t=e._src;if(_[t])return e._duration=_[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var o=atob(t.split(",")[1]),i=new Uint8Array(o.length),a=0;a<o.length;++a)i[a]=o.charCodeAt(a);r(i.buffer,e)}else{var n=new XMLHttpRequest;n.open("GET",t,!0),n.withCredentials=e._xhrWithCredentials,n.responseType="arraybuffer",n.onload=function(){var t=(n.status+"")[0];"0"===t||"2"===t||"3"===t?r(n.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+n.status+".")},n.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete _[t],e.load())},s(n),n.onprogress=function(t){e._emit("loadprogress",t)}}},s=function(e){try{e.send()}catch(t){e.onerror()}},r=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&t._sounds.length>0?(_[t._src]=e,l(t,e)):i()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(a).catch(i):o.ctx.decodeAudioData(e,a,i)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},d=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var a=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!a||o._navigator&&!o._navigator.standalone&&!a)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:1,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};t.Howler=o,t.Howl=i,"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=o,window.Howl=i,window.Sound=a):void 0!==S&&(S.HowlerGlobal=e,S.Howler=o,S.Howl=i,S.Sound=a)}()})),k=b.Howler,P=b.Howl;let M=!1;k.mobileAutoEnable=!0;const F=new P({src:["./audio/fx.opus","./audio/fx.ogg","./audio/fx.m4a","./audio/fx.mp3","./audio/fx.ac3"],sprite:{achievement:[0,576.0090702947846],click:[2e3,130.612244897959],eat:[4e3,192.01814058956933],game:[6e3,104097.95918367346,!0],lose:[112e3,5184.013605442175],main:[119e3,25626.1224489796,!0],opengacha:[146e3,2688.0045351473996],pop:[15e4,78.36734693876224]}}),C=()=>{F.stop()};let T,A;F.once("load",(function(){M=!0,y.__playingAd||H(),E()})),F.on("loadprogress",(function(e){if(!T){(T=document.createElement("div")).style="\n            position:absolute;\n            top:2%;\n            left:50%;\n            transform:translate(-50%);\n            opacity: .8;\n        ";const e=document.createElement("div");e.style="\n            width:".concat(200,"px;\n            height:10px;\n            background:white;\n        "),T.appendChild(e),(A=document.createElement("div")).style="\n            position:absolute;\n            width:".concat(100,"px;\n            height:10px;\n            background:black;\n            top:0;\n            left:0;\n        "),e.appendChild(A);const t=document.createElement("span");t.innerText="loading audio",t.style="\n          position:absolute;\n          left:50%;\n          top:0;\n          transform: translate(-50%);\n          font-size: 10px;\n          color:#aba9a9;\n          line-height:8px;\n        ",T.appendChild(t),document.body.appendChild(T)}const t=Math.min(1,e.loaded/(e.total||1e5));A.style.width="".concat(Math.round(200*t),"px")}));const E=()=>{T.parentNode.removeChild(T)},D=(e,t,o=0)=>{if(!y.__loadedData.audio)return;if(!M)return;"game"!=e&&"main"!=e||F.stop();const i=F.play(e);F.volume(t,i);const a=1+(-o+2*o*Math.random());F.rate(a,i)},H=()=>{y.__joinedGame?D("game",y.__songVolume):D("main",y.__songVolume)};let I,z,B,L,R,O,G,j,q,W,N,V,K,U=!1,Y=!1;const Q=(e,t)=>{if(y.__loadedData.hats[e]||(y.__loadedData.hats[e]=0),y.__loadedData.hats[e]>=y.__hatUnlockAmmount[e])return;y.__loadedData.hats[e]+=t,y.__loadedData.hats[e]>=y.__hatUnlockAmmount[e]&&(y.__loadedData.hats[e]=y.__hatUnlockAmmount[e],y.__loadedData.unlockedHats++);let o=0,i=0;for(let e=0;e<y.__loadedData.hats.length;e++)y.__loadedData.hats[e]>=y.__hatUnlockAmmount[e]&&(y.__hatIsEars[e]?i++:o++);N.__doAchievement(4,"=",o),N.__doAchievement(5,"=",i),f(y.__loadedData,"all"),v()},J=()=>{I.style.display="none"},X=()=>{L.style.animation="slowshake 2s linear infinite",R.classList.remove("open"),O.classList.remove("open-i"),-1==(q=Z())&&(q=33,K.style.visibility="visible",K.innerText="all hats collected");const e=G[q];let t=1;t=e.__size.x>e.__size.y?64/e.__size.x:64/e.__size.y,z.style.background="url(".concat(window._xhrS,") ").concat(-Math.round(e.__position.x*t),"px ").concat(-Math.round(e.__position.y*t),"px"),z.style.width="".concat(Math.round(e.__size.x*t),"px"),z.style.height="".concat(Math.round(e.__size.y*t),"px"),z.style.backgroundSize="".concat(Math.round(1024*t),"px ").concat(Math.round(512*t),"px"),W=Math.floor(5*Math.random())+1,1==y.__loadedData.gachaRolls&&0==y.__loadedData.achievementProgress[4]&&0==y.__loadedData.achievementProgress[5]&&(W=5),B.innerText="+".concat(W),I.style.display="none",V.style.visibility="hidden",L.style.pointerEvents="all"},$=()=>{const e=document.createElement("div");e.classList.add("rl","bu");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.innerHTML='<circle cx="21" cy="21" r="20" stroke="#382C2A" stroke-width="2" fill="#FFF0E5"></circle',e.appendChild(t),t.style.width=t.style.height="42px";const o=document.createElement("div");o.style.background="url(./assets/bl_u.svg",o.style.backgroundRepeat="no-repeat",e.appendChild(o),o.style.width="".concat(20,"px"),o.style.height="".concat(20,"px"),o.style.position="absolute",o.style.top="12px",o.style.left="11px";const i=document.createElement("div");return i.style.background="url(./assets/bl_d.svg",i.style.backgroundRepeat="no-repeat",e.appendChild(i),i.style.width="".concat(20,"px"),i.style.height="".concat(20,"px"),i.style.position="absolute",i.style.top="21px",i.style.left="11px",e},Z=()=>{let e=[];for(let t=0;t<y.__nonEventHats;t++)y.__loadedData.hats[t]<y.__hatUnlockAmmount[t]&&e.push(t);1==y.__loadedData.gachaRolls&&0==y.__loadedData.achievementProgress[4]&&0==y.__loadedData.achievementProgress[5]&&(e=[0,1,2]);let t=Math.floor(Math.random()*e.length);return K.style.visibility="hidden",window._eV&&(!y.__loadedData.hats[window._eV.h]||y.__loadedData.hats[window._eV.h]<y.__hatUnlockAmmount[window._eV.h])&&Math.random()<.5?(K.style.visibility="visible",window._eV.h):0==e.length?-1:e[t]},ee=document.querySelector("#st"),te=document.querySelector("#stb"),oe=ee.querySelector(".tgl-cb");let ie;const ae=()=>{ee.classList.add("cl")};let _e={};const ne=(e,t,o,i)=>{if(!window.__adsBlocked){if(!se(t))return;let a=_e[t]?_e[t].adHolder:null;if(a)return;if(a||((a=document.createElement("div")).classList.add("ad"),e.appendChild(a)),_e[t]={adHolder:a,screenName:t},u)return void("end"==t&&(a.style.margin="20px 0px",PokiSDK.displayAd(a,"320x50",o,i)));"preroll"==t?(a.style.margin="20px",PokiSDK.displayAd(a,"160x600",o,i)):"start"==t?(a.style.position="absolute",a.style.bottom="0",a.style.left="0",a.style.margin="20px",a.style.zIndex="-1",PokiSDK.displayAd(a,"300x250",o,i)):"end"==t?(a.style.margin="20px 0px",PokiSDK.displayAd(a,"728x90",o,i)):"game"==t&&(a.style.position="absolute",a.style.top="0",a.style.left="50%",a.style.transform="translate(-50%, 0)",a.style.margin="5px",a.style.zIndex=9999,PokiSDK.displayAd(a,"320x50",o,i))}},se=e=>!(!u&&("game"!==e||u))||("preroll"==e&&window.innerHeight>=600&&window.innerWidth>=700||("start"==e&&window.innerHeight>=470&&window.innerWidth>=940||"end"==e&&window.innerHeight>=100&&window.innerWidth>=700)),re=()=>{Object.keys(_e).forEach(e=>{data=_e[e];let t=data.adHolder;t&&(PokiSDK.destroyAd(t),t.parentNode.removeChild(t))}),_e={}};let le=0;const de=function(e,t,o,i,a,_){le++;var n=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},s=!1,r=t-e;i(e);var l=window.performance&&window.performance.now?window.performance.now():+new Date;return le>500?(le--,i(t),_&&_()):n((function d(c){if(!s){var h=(c||+new Date)-l;h>=0&&i(a(h,e,r,o)),h>=0&&h>=o?(i(t),le--,_&&_()):n(d)}})),{cancel:function(){s=!0}}},ce=function(e,t,o,i,a,_){Object.keys(t).forEach((function(n){null==t[n]&&(t[n]=e[n]),"alternate"==_&&(_=()=>{ce(e,o,t,i,a,"alternate")}),"loop"==_&&(_=()=>{ce(e,t,o,i,a,"loop")});de(t[n],o[n],i,t=>{e[n]=t},a,_),_=void 0}))};let he={linear:function(e,t,o,i){return o*e/i+t},easeInQuad:function(e,t,o,i){return o*(e/=i)*e+t},easeOutQuad:function(e,t,o,i){return-o*(e/=i)*(e-2)+t},easeInOutQuad:function(e,t,o,i){return(e/=i/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,o,i){return o*(e/=i)*e*e+t},easeOutCubic:function(e,t,o,i){return o*((e=e/i-1)*e*e+1)+t},easeInOutCubic:function(e,t,o,i){return(e/=i/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,o,i){return o*(e/=i)*e*e*e+t},easeOutQuart:function(e,t,o,i){return-o*((e=e/i-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,o,i){return(e/=i/2)<1?o/2*e*e*e*e+t:-o/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,o,i){return o*(e/=i)*e*e*e*e+t},easeOutQuint:function(e,t,o,i){return o*((e=e/i-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,o,i){return(e/=i/2)<1?o/2*e*e*e*e*e+t:o/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,o,i){return-o*Math.cos(e/i*(Math.PI/2))+o+t},easeOutSine:function(e,t,o,i){return o*Math.sin(e/i*(Math.PI/2))+t},easeInOutSine:function(e,t,o,i){return-o/2*(Math.cos(Math.PI*e/i)-1)+t},easeInExpo:function(e,t,o,i){return 0==e?t:o*Math.pow(2,10*(e/i-1))+t},easeOutExpo:function(e,t,o,i){return e==i?t+o:o*(1-Math.pow(2,-10*e/i))+t},easeInOutExpo:function(e,t,o,i){return 0==e?t:e==i?t+o:(e/=i/2)<1?o/2*Math.pow(2,10*(e-1))+t:o/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,o,i){return-o*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,o,i){return o*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOutCirc:function(e,t,o,i){return(e/=i/2)<1?-o/2*(Math.sqrt(1-e*e)-1)+t:o/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInBack:function(e,t,o,i,a){return null==a&&(a=1.70158),o*(e/=i)*e*((a+1)*e-a)+t},easeOutBack:function(e,t,o,i,a){return null==a&&(a=1.70158),o*((e=e/i-1)*e*((a+1)*e+a)+1)+t},easeInOutBack:function(e,t,o,i,a){return null==a&&(a=1.70158),(e/=i/2)<1?o/2*(e*e*((1+(a*=1.525))*e-a))+t:o/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+t},easeInBounce:function(e,t,o,i){return o-he.easeOutBounce(i-e,0,o,i)+t},easeOutBounce:function(e,t,o,i){return(e/=i)<1/2.75?o*(7.5625*e*e)+t:e<2/2.75?o*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?o*(7.5625*(e-=2.25/2.75)*e+.9375)+t:o*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,o,i){return e<i/2?.5*he.easeInBounce(2*e,0,o,i)+t:.5*he.easeOutBounce(2*e-i,0,o,i)+.5*o+t}};var ue={animate:de,animateCSS:function(e,t,o,i,a,_,n,s){return de(i,a,_,(function(i){e.style[t]=i+o}),n,s)},animateProps:ce,easings:he},pe=ue.animateProps,me=ue.easings;function ye(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function fe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function ge(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?fe(o,!0).forEach((function(t){ye(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):fe(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var ve=w((function(e){!function(t,o){(0,eval)("this");var i=256,a=6,_="random",n=o.pow(i,a),s=o.pow(2,52),r=2*s,l=i-1;function d(e,l,d){var m=[],y=u(function e(t,o){var i,a=[],_=typeof t;if(o&&"object"==_)for(i in t)try{a.push(e(t[i],o-1))}catch(e){}return a.length?a:"string"==_?t:t+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[e,p(t)]:e,3),m),f=new c(m),g=function(){for(var e=f.g(a),t=n,o=0;e<s;)e=(e+o)*i,t*=i,o=f.g(1);for(;e>=r;)e/=2,t/=2,o>>>=1;return(e+o)/t};return g.int32=function(){return 0|f.g(4)},g.quick=function(){return f.g(4)/4294967296},g.double=g,u(p(f.S),t),(l.pass||d||function(e,t,i,a){return a&&(a.S&&h(a,f),e.state=function(){return h(f,{})}),i?(o[_]=e,t):e})(g,y,"global"in l?l.global:this==o,l.state)}function c(e){var t,o=e.length,a=this,_=0,n=a.i=a.j=0,s=a.S=[];for(o||(e=[o++]);_<i;)s[_]=_++;for(_=0;_<i;_++)s[_]=s[n=l&n+e[_%o]+(t=s[_])],s[n]=t;(a.g=function(e){for(var t,o=0,_=a.i,n=a.j,s=a.S;e--;)t=s[_=l&_+1],o=o*i+s[l&(s[_]=s[n=l&n+t])+(s[n]=t)];return a.i=_,a.j=n,o})(i)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function u(e,t){for(var o,i=e+"",a=0;a<i.length;)t[l&a]=l&(o^=19*t[l&a])+i.charCodeAt(a++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}u(o.random(),t),e.exports?e.exports=d:o["seed"+_]=d}([],Math)}));const xe=function(e){this.__client,this.__game=e,this.__active=!1,this.__name,this.__id="",this.__hat=-1,this.__positionHash,this.__pos={x:0,y:0},this.__dir=Math.PI/180*90,this.__length=y.__snakeSegments,this.__thick=y.__snakeStartWidth/y.__snakeBaseWidth,this.__size={x:16,y:16,hx:8,hy:8},this.color="rgba(255,0,0,1.0)",this.oldState={__pos:{x:0,y:0}},this.currentState={__pos:{x:0,y:0}},this.__serverPos={x:0,y:0},this.__partPositions=[],this.__inputs=[],this.__lastInput={input:{},seq:0},this.__chewTimer=0,this.__foodsEating=[],this.__eatTimer,this.__foodsEaten=y.__snakeStartingFood,this.__width=y.__snakeStartWidth,this.__colors=["0x00a4ed"],this.__alive=!0,this.__deathTimer,this.__inScreen=!0,this.__sharedGraphicsObject={visible:!1,tint:void 0},this.__timeouts=[],this.__accelerate=!1,this.__accelTick=0,this.__spawnTime,this.__mainSnake=!1,this.__playerIndex=0};xe.prototype.__growFromFood=function(e){this.__foodsEaten+=e.__value,this.__graphics&&this.__mainSnake&&(this.__game.__doAchievement(2,">",this.__foodsEaten),this.__game.__playSound("eat",.5,.1)),this.__doGrowth()},xe.prototype.__doGrowth=function(){this.__width=this.__game.__getWidthBasedOnFoods(this.__foodsEaten),this.__thick=this.__width/y.__snakeBaseWidth;const e=this.__length;if(this.__length=this.__game.__getLengthBasedOnFoods(this.__foodsEaten),this.__graphics&&this.__length<e)for(var t=this.__length;t<e;t++)this.__graphics.__snakeParts[y.__maxSnakeSize-t-1].visible=!1,this.__graphics.__snakeShadowParts[y.__maxSnakeSize-t-1].visible=!1},xe.prototype.__initGraphics=function(){this.__graphics={};var e=y.__layerSnakeParts;this.__graphics.__snakeParts=[],this.__graphics.__snakeShadowParts=[];var t=this.__game.__scene.layer(y.__layerSnakeShadowParts);for(this.__sharedGraphicsObject={visible:!1},i=0;i<y.__maxSnakeSize;i++){var o=new this.__game.__spriteClass(this.__game.__frames.__KawaiiSnake_Skin0000);o.anchor.set(.5,.5),o.tint="0x000000",o.visible=!1,o.shared=this.__sharedGraphicsObject,t.add(o),this.__graphics.__snakeShadowParts.push(o)}for(i=0;i<y.__maxSnakeSize;i++){t=this.__game.__scene.layer(e++);var a=new this.__game.__spriteClass(this.__game.__frames.__KawaiiSnake_Skin0000);a.anchor.set(.5,.5),a.visible=!1,a.shared=this.__sharedGraphicsObject,t.add(a),this.__graphics.__snakeParts.push(a),a.tint=this.__colors[(y.__maxSnakeSize-i-1)%this.__colors.length]}t=this.__game.__scene.layer(e),this.__graphics.__eyeLeft=new this.__game.__spriteClass(this.__game.__frames.__KawaiiSnake_Eye0000),this.__graphics.__eyeLeft.anchor.set(.5,.5),this.__graphics.__eyeLeft.visible=!1,this.__graphics.__eyeLeft.shared=this.__sharedGraphicsObject,t.add(this.__graphics.__eyeLeft),this.__graphics.__eyeRight=new this.__game.__spriteClass(this.__game.__frames.__KawaiiSnake_Eye0000),this.__graphics.__eyeRight.anchor.set(.5,.5),this.__graphics.__eyeRight.visible=!1,this.__graphics.__eyeRight.shared=this.__sharedGraphicsObject,t.add(this.__graphics.__eyeRight),this.__graphics.__mouth=new this.__game.__spriteClass(this.__game.__frames.__KawaiiSnake_Mouth0000),this.__graphics.__mouth.anchor.set(.5,.5),this.__graphics.__mouth.visible=!1,this.__graphics.__mouth.shared=this.__sharedGraphicsObject,t.add(this.__graphics.__mouth);t=this.__game.__scene.layer(y.__layerHats);this.__graphics.__hatLeft=new this.__game.__spriteClass(this.__game.__foodLists.hats[0]),this.__graphics.__hatLeft.anchor.set(.5,1),this.__graphics.__hatLeft.visible=!1,this.__graphics.__hatLeft.shared=this.__sharedGraphicsObject,t.add(this.__graphics.__hatLeft),this.__graphics.__hatRight=new this.__game.__spriteClass(this.__game.__foodLists.hats[0]),this.__graphics.__hatRight.anchor.set(.5,1),this.__graphics.__hatRight.visible=!1,this.__graphics.__hatRight.shared=this.__sharedGraphicsObject,t.add(this.__graphics.__hatRight)},xe.prototype.__initParts=function(){for(var e=0,t=2*y.__snakeSegmentDistance,o=0;o<y.__snakeMaxSegments;o++){var i=o/y.__snakeMaxSegments,a=1-i*i*i*y.__snakeShrinkDamper,_=this.__partPositions[o-1];this.__partPositions[o]=0==o?{x:this.__pos.x-.5*t*Math.cos(this.__dir),y:this.__pos.y-.5*t*Math.sin(this.__dir),s:this.__thick*a,u:this.__id}:{x:_.x-t*e*Math.cos(this.__dir),y:_.y-t*e*Math.sin(this.__dir),s:this.__thick*a,u:this.__id},e=a,this.__graphics&&(this.__graphics.__snakeParts[o].tint=this.__colors[(y.__maxSnakeSize-o-1)%this.__colors.length],this.__graphics.__hatLeft.frame=this.__game.__foodLists.hats[Math.max(this.__hat,0)],this.__graphics.__hatRight.frame=this.__game.__foodLists.hats[Math.max(this.__hat,0)])}},xe.prototype.__updateParts=function(){var e=this.__partPositions[0],t=this.__pos,o=function(e,t,o){return{x:e.x+o*e.d.x*t,y:e.y+o*e.d.y*t}},i=function(e,t,o){return{x:o*e.d.x*t,y:o*e.d.y*t}},a=t.x-e.x,_=t.y-e.y;a+=.1*Math.random(),a+=.1*Math.random();var n=Math.sqrt(a*a+_*_);e.d={x:a/n,y:_/n};var s=y.__snakeSegmentDistance*this.__thick,r=i(e,1,s);e.x=t.x-r.x,e.y=t.y-r.y;for(var l=1;l<this.__length;l++){var d=l/this.__length,c=1-d*d*d*y.__snakeShrinkDamper,h=(l-1)/this.__length,u=1-h*h*h*y.__snakeShrinkDamper,p=this.__partPositions[l];s=y.__snakeSegmentDistance*this.__thick*u;var m=o(this.__partPositions[l-1],-1,s);a=m.x-p.x,_=m.y-p.y,n=Math.sqrt(a*a+_*_);p.d={x:a/n,y:_/n},p.s=this.__thick*c;var f=i(p,1,s);p.x=m.x-f.x,p.y=m.y-f.y}};xe.prototype.__draw=function(){if(!this.__inScreen)return this.__sharedGraphicsObject.visible=!1,void(this.__deathTimer&&(this.__graphics.__snakeParts.forEach(e=>{e.visible=!1}),this.__graphics.__snakeShadowParts.forEach(e=>{e.visible=!1}),this.__graphics.__hatLeft.visible=!1,this.__graphics.__hatRight.visible=!1,this.__deathTimer=void 0,this.__alive=!1));this.__sharedGraphicsObject.visible=!0,this.__sharedGraphicsObject.tint=void 0,performance.now()<this.__spawnTime+y.__newSnakeInvisibilityTimer&&Math.sin(.01*performance.now())>.7&&(this.__sharedGraphicsObject.tint="0xFFFFFF");let e=this.__pos.x*this.__game.__scene.camera.zoom.x+this.__game.__viewportSize.x/2-this.__game.__camera.x,t=this.__pos.y*this.__game.__scene.camera.zoom.x+this.__game.__viewportSize.y/2-this.__game.__camera.y;if(!this.__mainSnake||this.__game.__localPlayers>1){let o=20+y.__snakeBaseWidth*this.__thick/2;const i=.2,a=this.__dir>Math.PI;this.__nameOrientation!=a&&Math.abs(this.__dir-Math.PI)>i&&this.__dir>i&&this.__dir<2*Math.PI-i&&(this.__nameOrientation=a),o=this.__nameOrientation?-o:o+24;let _=this.__name;this.__game.__ctx.fillStyle="rgba(255,255,255,1.0)",this.__mainSnake&&this.__game.__localPlayers>1&&(_="P".concat(this.__playerIndex),this.__game.__ctx.fillStyle=1===this.__playerIndex?"rgba(255,153,153,1.0)":"rgba(134,152,204,1.0)"),this.__game.__ctx.lineWidth=4,this.__game.__ctx.strokeText(_,e,t+o),this.__game.__ctx.fillText(_,e,t+o)}this.__active&&function(e){if(e.__alive){if(e.__graphics.__mouth.frame!=e.__game.__frames.__KawaiiSnake_Mouth0000){const t=performance.now()-e.__eatTimer,o=200,i=250;e.__graphics.__mouth.frame==e.__game.__frames.__KawaiiSnake_Mouth0001&&t>o?e.__setMouth(2):t>o+i&&e.__setMouth(0)}const s=e.__accelerate?1-Math.abs(.15*Math.cos(e.__dir+Math.PI/2)):1,r=e.__accelerate?1-Math.abs(.15*Math.sin(e.__dir+Math.PI/2)):1;for(var t=0;t<e.__length;t++){var o=t/e.__length,i=1-o*o*o*y.__snakeShrinkDamper,a=e.__graphics.__snakeParts[y.__maxSnakeSize-t-1];a.position.set(e.__partPositions[t].x,e.__partPositions[t].y),a.visible=!0,a.scale.set(e.__thick*i*s,e.__thick*i*r);var _=e.__graphics.__snakeShadowParts[y.__maxSnakeSize-t-1];_.position.set(e.__partPositions[t].x,e.__partPositions[t].y),_.visible=!0;var n=1+y.__outlinePixels/(y.__snakeBaseWidth*e.__thick*i);_.scale.set(e.__thick*i*n*s,e.__thick*i*n*r)}const l=Math.atan2(e.__partPositions[0].d.y,e.__partPositions[0].d.x),d=35*e.__thick,c=40*y.__DEG2RAD,h=e.__graphics.__eyeLeft,u=l-c;h.scale.set(e.__thick/2),h.position.set(e.__partPositions[0].x+d*Math.cos(u),e.__partPositions[0].y+d*Math.sin(u)),h.rotation=l-90*y.__DEG2RAD,h.visible=!0;const p=e.__graphics.__eyeRight,m=l+c;p.scale.set(e.__thick/2),p.position.set(e.__partPositions[0].x+d*Math.cos(m),e.__partPositions[0].y+d*Math.sin(m)),p.rotation=l-90*y.__DEG2RAD,p.visible=!0;const f=e.__graphics.__mouth;if(f.scale.set(e.__thick/2),f.position.set(e.__partPositions[0].x+d*Math.cos(l),e.__partPositions[0].y+d*Math.sin(l)),f.rotation=l-90*y.__DEG2RAD,f.visible=!0,e.__hat>=0){const t=e.__graphics.__hatLeft;t.scale.set(e.__thick);let o=-y.__snakeBaseWidth/2*e.__thick*.6,i=y.__hatIsEars[e.__hat]?.8:0;if(y.__hatIsEars[e.__hat]||(o*=.8),31!=e.__hat&&32!=e.__hat||(o*=-1),t.position.set(e.__partPositions[0].x+o*Math.cos(l-i),e.__partPositions[0].y+o*Math.sin(l-i)),t.rotation=l-90*y.__DEG2RAD,t.visible=!0,y.__hatIsEars[e.__hat]){const t=e.__graphics.__hatRight;t.scale.set(-e.__thick,e.__thick),t.position.set(e.__partPositions[0].x+o*Math.cos(l+i),e.__partPositions[0].y+o*Math.sin(l+i)),t.rotation=l-90*y.__DEG2RAD,t.visible=!0}}}const s=e.__accelerate?y.__snakeAcceleration:1,r=6*y.__playerSpeed*s*e.__game.dt;let l=e.__graphics.__mouth.position.x+r*Math.cos(e.__dir),d=e.__graphics.__mouth.position.y+r*Math.sin(e.__dir);e.__foodsEating.map(t=>{var o=t.position.x-l,i=t.position.y-d,a=.15*(t.scale.x-.1);a<.01?(e.__growFromFood(t),t.remove(),e.__foodsEating=e.__foodsEating.filter(e=>e!==t)):(t.scale.set(t.scale.x-a,t.scale.y-a),t.position.set(t.position.x-.15*o,t.position.y-.15*i))}),e.__deathTimer&&performance.now()>e.__deathTimer&&(e.__die(),e.__deathTimer=void 0)}(this)},xe.prototype.__setMouth=function(e){var t=[this.__game.__frames.__KawaiiSnake_Mouth0000,this.__game.__frames.__KawaiiSnake_Mouth0001,this.__game.__frames.__KawaiiSnake_Mouth0002,this.__game.__frames.__KawaiiSnake_Mouth0003];this.__graphics.__mouth.frame=t[e]},xe.prototype.__eatFood=function(e){this.__inScreen?(this.__foodsEating.push(e),this.__setMouth(1),this.__eatTimer=performance.now()):(this.__growFromFood(e),e.remove())},xe.prototype.__die=function(){this.__alive=!1,this.__foodsEating.forEach(e=>{e.remove()}),this.__foodsEating=[],this.__showDeath()},xe.prototype.__showDeath=function(){if(!this.__inScreen)return void(this.__sharedGraphicsObject.visible=!1);this.__graphics.__eyeLeft.frame=this.__game.__frames.__KawaiiSnake_Eye0001,this.__graphics.__eyeRight.frame=this.__game.__frames.__KawaiiSnake_Eye0002,this.__setMouth(3);const e=me.easeOutCubic;this.__timeouts.push(setTimeout(()=>{this.__graphics.__eyeLeft.visible=!1,this.__graphics.__eyeRight.visible=!1,this.__graphics.__mouth.visible=!1,this.__graphics.__hatLeft.visible=!1,this.__graphics.__hatRight.visible=!1},y.__snakeTimeToRealDeath));const t=Math.ceil(this.__length/2);for(let o=0;o<t;o++){const i=o/t;for(let t=0;t<2;t++)this.__timeouts.push(setTimeout(()=>{this.__graphics.__snakeParts[y.__maxSnakeSize-2*o-t-1].visible=!1,this.__graphics.__snakeShadowParts[y.__maxSnakeSize-2*o-t-1].visible=!1,0==t&&this.__explodePart(this.__partPositions[2*o])},y.__snakeTimeToRealDeath+600*e(i,0,1,1)))}},xe.prototype.__explodePart=function(e){this.__game.__playSound("pop",.6,.2);const t=this.__game.__scene.layer(y.__layerSmokeClouds);for(var o=0;o<20;o++){const i=new this.__game.__spriteClass(this.__game.__frames.__Smoke_Cloud0000);i.anchor.set(.5,.5),i.position.set(e.x,e.y),i.tint=this.__colors[(y.__maxSnakeSize-o-1)%this.__colors.length],t.add(i);const a=this.__thick+.1*Math.random(),_=100*a,n=Math.random()*(2*Math.PI),s=Math.cos(n)*_,r=Math.sin(n)*_,l=100;pe(i.position,{x:i.position.x,y:i.position.y},{x:i.position.x+s,y:i.position.y+r},l,me.easeOutQuart),pe(i.scale,{x:.7*a,y:.7*a},{x:a,y:a},l,me.easeOutQuart,()=>{pe(i.scale,{x:a,y:a},{x:0,y:0},l,me.easeOutQuart,()=>{i.remove()})})}},xe.prototype.__clean=function(){this.__foodsEating.forEach(e=>{e.remove()}),this.__resetVars()},xe.prototype.__resetVars=function(){this.__inputs=[],this.__lastInput={input:{},seq:0},this.__chewTimer=0,this.__foodsEating=[],this.__eatTimer=void 0,this.__foodsEaten=y.__snakeStartingFood,this.__deathTimer=void 0,this.__inScreen=!0,this.__accelerate=!1,this.__accelTick=0,this.__mainSnake=!1},xe.prototype.__reset=function(){this.__active=!1,this.__clean(),this.__timeouts.forEach(e=>{clearTimeout(e)}),this.__timeouts=[],this.__graphics.__eyeLeft.frame=this.__game.__frames.__KawaiiSnake_Eye0000,this.__graphics.__eyeRight.frame=this.__game.__frames.__KawaiiSnake_Eye0000,this.__setMouth(0),this.__showParts(!1),this.__alive=!0,this.__sharedGraphicsObject.visible=!1},xe.prototype.__showParts=function(e){this.__graphics.__snakeParts.forEach(t=>{t.visible=e}),this.__graphics.__snakeShadowParts.forEach(t=>{t.visible=e})};const Se=function(e){this.instance=e,this.server=void 0!==this.instance,this.clients=[],this.players=[];for(var t=0;t<y.__maxClients;t++)this.players.push(new xe(this)),this.players[t].__id=t;this.__foodPositionHash={},this.__foodCollisionHash={},this.server&&this.initServer(),this.__rAF=window.requestAnimationFrame?window.requestAnimationFrame:this.requestAnimationFrame,this.__cAF=window.cancelAnimationFrame?window.cancelAnimationFrame:this.cancelAnimationFrame,this._pdt=1e-4,this._pdte=performance.now(),this.localTime=.016,this._dt=performance.now(),this._dte=performance.now(),this.__createTimer()};Se.prototype.prepareTinyIDs=function(){this.availableTinyIds=[];for(let e=0;e<y.__maxClients;e++)this.availableTinyIds.push(e)},Se.prototype.getTinyID=function(){return this.availableTinyIds.shift()},Se.prototype.returnTinyID=function(e){this.availableTinyIds.push(e)},Se.prototype.__update=function(e){e=performance.now(),this.dt=this.lastFrameTime?(e-this.lastFrameTime)/1e3:.016,this.lastFrameTime=e,this.__clientUpdate();var t=this.__rAF;this.updateid=t(this.__update.bind(this),this.__viewport)},Se.prototype.getPlayerPositionHash=function(e){var t={};return t.hashX=Math.floor(e.__pos.x/y.__maxScreenWidth),t.hashY=Math.floor(e.__pos.y/y.__maxScreenHeight),t.hash=t.hashX+"_"+t.hashY,t},Se.prototype.__processInput=function(e){var t=0;if(e.__lastInput){const i=e.__lastInput.input;if(i.l&&(t=-1),i.r&&(t=1),void 0!==i.ma){var o=this.angleDifference(e.__dir,i.ma);t=o>.05?1:o<-.05?-1:0}e.__accelerate=i.a,0==e.__foodsEaten&&(e.__accelerate=!1)}return t},Se.prototype.__getPhysicsMovementVectorFromDirection=function(e){var t=y.__playerSpeed*e.a*this.dt;return{x:e.x*t,y:e.y*t}},Se.prototype.__createTimer=function(){setInterval(function(){this._dt=performance.now()-this._dte,this._dte=performance.now(),this.localTime+=this._dt/1e3}.bind(this),4)},Se.prototype.__foodExplosion=function(e,t,o){t=Math.min(1e3,t);var i=!0;null==o&&(i=!1,o=Math.round(1e5*Math.random()));for(var a,_=ve(o),n=Math.min(y.__foodExplosionMaxFoods,t),s=Math.ceil(t/n),r=Math.max(1,Math.floor(n/e.length)),l=[],d=this.__getWidthBasedOnFoods(t),c=0;c<e.length;c+=2){const t=[];for(var h=0;h<r;h++){const o={x:e[c],y:e[c+1]};a=this.__v_add(this.__randomPointInCircle(d,_),o);var u,p=Math.sqrt(a.x*a.x+a.y*a.y);if(p>y.__levelRadius){var m=y.__levelRadius/p;a.x*=m,a.y*=m}null!=(u=i?this.__getFoodIdFromPosition(a):this.__addFood(a,s))&&t.push(u)}l.push(t)}return{seed:o,foodsCreated:l}},Se.prototype.__getWidthBasedOnFoods=function(e){var t=y.__snakeMaxWidth-y.__snakeStartWidth,o=Math.min(e/y.__snakeMaxWidthFood,1);return ue.easings.easeOutCirc(o,y.__snakeStartWidth,t,1)},Se.prototype.__getLengthBasedOnFoods=function(e){const t=y.__snakeMaxSegments-y.__snakeSegments,o=Math.min(e/y.__snakeMaxSegmentsFood,1);return Math.floor(ue.easings.easeOutQuint(o,y.__snakeSegments,t,1))},Se.prototype.__addFoods=function(e,t){var o=!0;null==t&&(o=!1,t=Math.round(1e5*Math.random()));for(var i,a=ve(t),_=[],n=0;n<e;n++){var s;i=this.__randomPointInCircle(y.__levelRadius,a),null!=(s=o?this.__getFoodIdFromPosition(i):this.__addFood(i))&&_.push(s)}return{seed:t,foodsCreated:_}},Se.prototype.__addFood=function(e,t){var o=this.__getFoodIdFromPosition(e);e=this.__getFoodPositionFromId(o);var i=this.__getPositionHash(e,y.__maxScreenWidth,y.__maxScreenHeight);null==this.__foodPositionHash[i]&&(this.__foodPositionHash[i]={});var a=1;if(e.x%y.__foodBigPixelChance!=0&&e.y%y.__foodBigPixelChance!=0||(a=y.__foodBigValue),t&&(a=t),!this.__foodPositionHash[i][o])return this.__foodPositionHash[i][o]=a,this.activeFoods++,o},Se.prototype.__addFoodToCollisionHash=function(e,t){var o=this.__getFoodIdFromPosition(e),i=this.__getPositionHash(e,y.__foodCollisionSize);null==this.__foodCollisionHash[i]&&(this.__foodCollisionHash[i]={}),this.__foodCollisionHash[i][o]=t},Se.prototype.__existsInFoodCollisionHash=function(e,t){var o=this.__getPositionHash(e,y.__foodCollisionSize);return null!=this.__foodCollisionHash[o]&&this.__foodCollisionHash[o][t]},Se.prototype.__checkFoodCollision=function(e,t){for(var o=y.__snakeBaseWidth*e.__thick+y.__foodCollisionTolerance,i=o/2,a=Math.floor(o/(2*y.__foodCollisionSize))+1,_=Math.floor(e.__pos.x/y.__foodCollisionSize),n=Math.floor(e.__pos.y/y.__foodCollisionSize),s=-a;s<=a;s++)for(var r=-a;r<=a;r++){var l=_+s+"_"+(n+r);if(null!=this.__foodCollisionHash[l]){var d=this,c=this.__foodCollisionHash[l];Object.keys(c).forEach((function(o){var a=d.__getFoodPositionFromId(o),_=a.x-e.__pos.x,n=a.y-e.__pos.y;if(Math.sqrt(_*_+n*n)<i){var s=c[o];t(e,s)}}))}}return[]},Se.prototype.__getCameraZoomForPlayer=function(e){return Math.min(y.__snakeStartWidth/e.__width*y.__cameraWidthToZoomFactor,y.__cameraMaxZoom)},Se.prototype.__getCameraZoomHashOverflow=function(e){return Math.round(Math.max(1,1/this.__getCameraZoomForPlayer(e)))},Se.prototype.__getPositionHash=function(e,t,o){return Math.floor(e.x/t)+"_"+Math.floor(e.y/(o||t))},Se.prototype.__getFoodIdFromPosition=function(e){var t=y.__levelRadius/y.__foodMinDistribution,o=2*t;return(Math.floor(e.y/y.__foodMinDistribution)+t)*o+(Math.floor(e.x/y.__foodMinDistribution)+t)},Se.prototype.__getFoodPositionFromId=function(e){var t=y.__levelRadius/y.__foodMinDistribution,o=2*t,i={};return i.x=(e%o-t)*y.__foodMinDistribution,i.y=(Math.floor(e/o)-t)*y.__foodMinDistribution,i},Se.prototype.__removeFood=function(e){var t=this.__getFoodPositionFromId(e),o=this.__getPositionHash(t,y.__maxScreenWidth,y.__maxScreenHeight);this.__foodPositionHash[o]&&delete this.__foodPositionHash[o][e],this.__foodPositionHash[o]&&0===Object.keys(this.__foodPositionHash[o]).length&&this.__foodPositionHash[o].constructor===Object&&delete this.__foodPositionHash[o],this.__removeFoodFromCollisionHash(e)},Se.prototype.__removeFoodFromCollisionHash=function(e){var t=this.__getFoodPositionFromId(e),o=this.__getPositionHash(t,y.__foodCollisionSize);this.__foodCollisionHash[o]&&delete this.__foodCollisionHash[o][e],this.__foodCollisionHash[o]&&0===Object.keys(this.__foodCollisionHash[o]).length&&this.__foodCollisionHash[o].constructor===Object&&delete this.__foodCollisionHash[o]},Se.prototype.__randomPointInCircle=function(e,t){t||(t=Math.random),t||(t=Math.random);let o,i,a=Number.POSITIVE_INFINITY;const _=2*e,n=e*e;for(;a>n;)a=(o=t()*_-e)*o+(i=t()*_-e)*i;return{x:o,y:i}},Se.prototype.__pos=function(e){return{x:e.x,y:e.y}},Se.prototype.__v_add=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Se.prototype.__stopUpdate=function(){this.__cAF(this.updateid)},Se.prototype.__lerp=function(e,t,o){var i=Number(o);return e+(i=Math.max(0,Math.min(1,i)))*(t-e)},Se.prototype.__randomColor=function(){function e(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var t,o,i,a=Math.random(),_=.25+.7*Math.random(),n=.4+.55*Math.random(),s=function(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+6*(t-e)*o:o<.5?t:o<2/3?e+(t-e)*(2/3-o)*6:e},r=n<.5?n*(1+_):n+_-n*_,l=2*n-r;return t=Math.round(255*s(l,r,a+1/3)),o=Math.round(255*s(l,r,a)),i=Math.round(255*s(l,r,a-1/3)),"0x"+e(t)+e(o)+e(i)},Se.prototype.__v_lerp=function(e,t,o){return{x:this.__lerp(e.x,t.x,o),y:this.__lerp(e.y,t.y,o)}},Se.prototype.angleDifference=function(e,t){var o=(t-e+Math.PI)%(2*Math.PI)-Math.PI;return o<-Math.PI?o+2*Math.PI:o},Se.prototype.__verifyUserName=function(e){return e.toUpperCase().replace(/[\W_]+/g,"").substr(0,y.__maxNameLength)},Se.prototype.setPlayerInCollisionHash=function(e){for(var t=0;t<e.__length;t+=2){var o=e.__partPositions[t],i=Math.floor(o.x/y.__snakeCollisionSize)+"_"+Math.floor(o.y/y.__snakeCollisionSize);null==this.playerCollisionHash[i]&&(this.playerCollisionHash[i]=[]),this.playerCollisionHash[i].push(o)}},Se.prototype.doesPlayerCollideWithOtherPlayers=function(e){var t,o,i=e.__pos.x,a=e.__pos.y,_=Math.floor(i/y.__snakeCollisionSize),n=Math.floor(a/y.__snakeCollisionSize),s=[];for(t=_-1;t<=_+1;t++)for(o=n-1;o<=n+1;o++){var r=t+"_"+o;null!=this.playerCollisionHash[r]&&(s=s.concat(this.playerCollisionHash[r]))}if(0==s.length)return!1;var l=performance.now();if(l<e.__invisibilityTime)return!1;for(var d=0;d<s.length;d++){var c=s[d];if(!(c.u===e.__id||this.players[c.u].__mainSnake&&e.__mainSnake)&&!(l<this.players[c.u].__invisibilityTime)){var h=y.__snakeBaseWidth*e.__thick/2,u=y.__snakeBaseWidth*c.s/2,p=i-c.x,m=a-c.y;if(Math.sqrt(p*p+m*m)<h+u-y.__collisionIntolerancePixels)return c}}return!1},Se.prototype.getSortedHighscoreList=function(){for(var e=[],t=[...this.players].sort((function(e,t){return t.__foodsEaten-e.__foodsEaten})),o=0;o<t.length;o++){var i=t[o],a=ge({},i.__pos);e.length<y.__leaderBoardLength&&(a.u=i.__id,a.f=i.__foodsEaten,this.players[o].rank=o+1),i.__active&&i.__alive&&e.push(a)}return e};const we=["Banditarli","BroadcastBlaze","Compomans","Couredbo","Crawlereday","Cybendon","DanceMine","Darthnetiki","FlirtyThug","FortuneMercy","Friendiant","Headagon","HeadTastic","HulkBeauty","InloveSmooth","Inspiretu","InvaderDrummer","Izofutioma","KentrosSpot","Luergera","Missinglive","Nekonordia","Pemstares","Perbabel","Santalexcen","Simplejole","Stargalyzon","Stratro","StripperHello","Sushyonymak","Acument","Akrotoele","Appeterer","Armargeo","Ceticomacin","CheeseMitzi","Codelog","Extracted","FizzHorray","Fordelis","ForeverAdvice","Helldeojug","Indecom","IteYugi","Lingviange","Lovervelder","Lovskymr","Mulandsa","Nycorespaba","Peatearin","Perkomacy","Personaled","PiraVivala","PodChapter","Quantrato","Sisterrazi","SunnyKurisu","Synchroli","TwitterSno","Willowspatr","AlligatorSnake","CobraCola","CobraCoven","CobraSnake","CrocodileRococo","CrocodileSedile","HashmarkShark","LionSnake","LoveSnake","NeonPython","NewscastSnake","OphidianSnake","PythonGipon","SharkBenchmark","SinkerSnake","SnakeAlligator","SnakeAsta","SnakeAuthor","SnakeBeach","SnakeBetrayer","SnakeBoa","SnakeCetic","Snakedain","Snakeildi","Snakelp","SnakeMc","Snakenheu","SnakePro","Snakeraft","Snakerl","BillSushi","BreakfastBrewer","BreakfastDicast","BurgerAgger","BurgerBurlap","BurgerDodger","BurgerSushi","BurgerTugger","DivisionSushi","DroughtSushi","DugoutTakeout","KinSushi","MovieSushi","PitaPizza","RadiantSushi","RockSushi","SnoopySushi","SochiSushi","SushiBoosh","SushiCoverage","SushiCrescent","Sushida","SushiFunny","Sushijadd","Sushillar","SushiNetwork","SushiPenguin","Sushirefo","Sushirena","Sushirsco","AryScary","BaseCute","BugsCute","CuddlyDudley","CuteCampy","Cutechar","Cutecherce","Cutechioca","Cutecial","CuteContent","Cutecter","CuteCuddly","CuteFace","CuteFunny","CuteHugz","CuteLove","CuteLovely","CuteMegs","CuteNath","CuteNice","Cutenson","Cutermiori","CuteRosa","CuteThedevil","DumbDuel","DumbDuro","FixCute","FunnyCute","GazerCute","GoannaGoofy","BallHappy","BeHappy","BleedPleased","BrightHappy","FadGlad","FortunateForage","GladGlazer","GladGlut","GladHappy","GladUndergrad","GoldenHappy","HappyBlissful","Happyco","Happyconf","HappyGlad","HappyGrinder","HappyHead","HappyIon","Happyla","Happylone","Happylong","HappyLou","Happyom","Happyon","HappyParis","HappyPink","Happyrayc","Happyreca","Happyro","HappyTweet","AbbeyShabby","AbscondBlond","BroodAttitude","ClaimAim","CollumColumn","CSee","EarDisappear","EditCredit","FaithSaith","GageTeenage","GlinkaInca","GrinderFinder","HoodShould","HotLot","IffyMiffy","KnowShow","LinkBlink","MarkDark","MulattoMoto","NoticeFlotus","PlunderWonder","SawTa","SimmerGlimmer","SquizBuzz","SunTon","TediumMedium","TrimmerGlimmer","UpStartup","WhereverClever","WittyPretty","AllyHi","AmbrosianChosen","BleakFleek","BulkHulk","CheeKey","ClashSlash","DonLawn","DummerSummer","FlingRing","FlirtyDirty","HighSly","ImprovSuave","LightKnight","ManScan","MindBlind","MonkeySpunky","MugBug","NaganoChrono","RecoupHoop","SceneMagazine","ScudStud","SidePride","SimonHymen","SnowSo","SprungYoung","TappaRappa","TonicalChronicle","TrimbleKimble","UnpopularPopular","VincaInca","CabanaHannah","CaravanMan","ClinchPinch","CornyThorny","DayPlay","DeanMean","EndFriend","GrantSupplant","HatRat","HollowFollow","IndicatorDictator","InterfaceBrace","KnightDespite","MaserGazer","MoultBolt","PursueMew","RegenVegan","RomanceFinance","RunnyFunny","RuseChoose","SnugSmug","SportReport","StreetsEats","SumoPneumo","ThoughRadio","TiberCyber","TraumaLlama","TrimmerGlimmer","UpperCupper","WillfulSkillful","AlphaSparkling","Aneteker","Aprileodoer","Chikkotie","Cockeray","Cyentrontm","Efusionea","Everydary","Freexplayer","GlaceAgent","Highermach","Ite","JeanConn","Jobscarb","Kidshane","Lexentionea","MamaCheerup","Masterserv","McRaven","MindRae","MonPride","Nothingsb","Prophecyrx","SanFresh","SaviorMdogg","Sheenryo","Smugglazil","Stringerry","Uranaluest","Winderlect","AnnonBelieve","AquaticWar","Choniali","Contiano","Crayonicer","Cyanitu","Dailyancoll","EatsyouPin","ElementCist","Fictibnet","FizzMdogg","FizzWeblog","Ghoultion","GutsyGrey","Homectr","IneedCuddly","Kinamicom","Lightrubb","Magiconvi","Missotumak","NameNum","PressCrossed","Romancera","Santagenthi","ShadesMilk","SporksTricky","Tellagot","Tracentic","WithpainWeblog","WormanTeen","Ablectwi","Bluhutli","CozyDev","Crosseden","EyesChell","Freshug","Hearnacirc","IamInformation","Infotwa","KuroWater","Lighfael","Lityinci","Marblight","Megaeardsa","Montercr","Niondant","PacPira","Pioneentr","Pulsolc","PureKeepup","SkyInvader","Slashiers","SterLing","Supermentia","Symbirt","Tasticetec","Tranexxie","Typhotsma","WackyStasia","WithaReader","Aconname","Childomet","Dancereter","Derfskou","DiaryJaden","DipityWind","Ergogrest","Finingos","ForbSomber","Foundbr","Gustarpe","Kittluzed","Licyterm","Linkslacker","Louderaftli","MagazineTy","Megadder","MuchPrep","MuraCert","Overidia","PersonMatrix","Senukeelc","Spoiledit","Synchammo","Tearmonati","Theremerish","Tivoicon","Undogman","VanderHoly","Waridologic","AttractiveRoach","Awaremine","Bonsersi","Cruncherra","Donnatafu","FizzMister","ForDesk","FourHannah","Gottaffix","Gottaverleg","Halifix","Letrofit","LovePerfect","Mcknils","MountainBot","NetworkYounger","PerfectBooty","Personalyn","Poeterplen","Priceless","RatJung","ReporterRappa","Ringthlene","RunningJolly","SmgLink","Sullynn","Summersor","TriteBlond","Wasabimani","Waterryants","BlondDrama","Cenybook","Classymacc","Controp","Cottonwood","FriendQuant","Glimmerti","Henryroci","HippoWitty","IonBlue","Ionoguest","Jejunretu","LikeRee","Messagesse","MindMark","Mohawkeyet","Mohawksher","Netapata","Olympicleen","Plusetolat","PoshyTwit","Readyadiz","Schoolphon","SoftSnow","SolidStyx","Teinesca","Toyonyforgi","TriteKix","Trumplant","WiseDogg","AlertDessert","AlfalfaAlpha","AnalogLog","DigestiveFestive","EerierInterior","EmbraceBase","FoiledSpoiled","ForBore","GroovyMovie","GroupsCoops","HoldenGolden","IntoMew","JinniTinny","LedgerPledgor","MimosaSosa","MoodBrood","RacingChasing","RecallDoll","RifeLife","RoseDispose","SetGet","ShadowSo","SoJo","SombreSomber","SuaveSalve","SubpoenaZena","SurmanWorman","ThinBegin","VanderSlander","WhereverEver","Born2Fast","BrilliantFast","CartFast","CheeFast","ClassyFast","ComicFast","FabricFastest","Fastaronal","Fastenon","Fasterco","Fastergr","Fasterva","FastestTaster","FastForum","FastParty","LogicFast","MohawkFast","PatioSlow","PinchFast","QuickFast","QuickQuiller","RansomRapidly","RapidRadeau","RapidRadii","RingFast","RunFast","SablinkFast","SlowerFlyer","SlowQuo","SoSlow","BabixzSlick","BlinkSlick","BlueSlick","CleverHowever","FlangerFlashy","FlashyFlanch","GlossyGlisk","GoobleSlick","GuilefulSlick","MagicSlick","ParkSlick","RomanceSlick","SilkenSlick","SleekSlick","SlickArticles","SlickChronicle","SlickCooled","Slickerre","Slicketce","SlickGazette","SlickGinger","SlickGuileful","Slickledi","SlickLick","SlickMdogg","SlickMedia","Slickster","SlickThere","SlickXcaptain","SlipperySlick","BeigeHuge","BibbBiggest","BigaBig","BigBicron","BigBigot","BigBimah","BigBisk","BigenerBiggest","BiggerBighorn","BiggerCodger","BiggerRugger","BiggestBibber","BiggestBiff","BiggestBiota","BiggestBish","BiggestFrigger","BigGigue","BigotryBigger","BigWig","BiterBiggest","CaulSmall","DirgeHuge","FigBig","GigBig","HugeHurdle","HugeSage","HussyHuge","JudgeHuge","LakeLargest","LambdaLargest"],be=e=>{const t=e[1]-e[0];return Math.random()*t+e[0]},ke=function(e){this.__game=e,this.__name=we[Math.floor(Math.random()*we.length)].toUpperCase(),this.__color=[e.__randomColor()],this.__hat=2,this.viewDistance=200,this.targetDirection=void 0,this.rotateDirection=0,this.inputSeq=0,this.rayCollisions=[],this.rays=8,this.rayAngleDistribution=2*Math.PI/this.rays,this.doDumb=!1,this.doRandomDir=!0,this.randomDirFrequency=[100,5e3],this.threadAccelerate=!1,this.threadAccelerateTime=[100,2e3],this.dumbAccelerate=!0,this.dumbAccelerateFrequency=[2e3,1e4],this.dumbAccelerateDuration=[100,2e3],this.accelerationTime=0,this.accelerate=!1};ke.prototype.hashOffsets=[{x:0,y:0},{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:-1,y:-1},{x:-1,y:1},{x:1,y:0},{x:1,y:-1},{x:1,y:1}];var Pe=function(e,t){for(;e<0;)e+=t;return e%t};ke.prototype.updateBrain=function(){var e;this.detectThreats();var t=Number.POSITIVE_INFINITY;this.targetDirection=void 0;var o=!1,i=0;for(e=0;e<this.rays;e++){var a=this.rayAngleDistribution*e,_=this.__game.angleDifference(this.__player.__dir,a);Math.abs(_)<=this.rayAngleDistribution&&(i=e,this.rayCollisions[e]&&(o=!0))}if(o&&!this.doDumb){for(e=0;e<this.rays;e++)if(!this.rayCollisions[e]){a=this.rayAngleDistribution*e,_=this.__game.angleDifference(this.__player.__dir,a);Math.abs(_)<Math.abs(t)&&(t=_,this.targetDirection=a,this.threadAccelerate&&(this.accelerationTime=performance.now()+be(this.threadAccelerateTime)))}}else{var n=!1,s=!1,r=0;if((this.rayCollisions[Pe(i-1,this.rays)]||this.rayCollisions[Pe(i-2,this.rays)])&&(n=!0),(this.rayCollisions[Pe(i+1,this.rays)]||this.rayCollisions[Pe(i+2,this.rays)])&&(s=!0),n&&!s?r=1:s&&!n&&(r=-1),0===r||this.doDumb)this.doRandomDir&&((!this.nextRandomDirTime||performance.now()>this.nextRandomDirTime)&&(this.randomDirection=Math.random()*(2*Math.PI),this.nextRandomDirTime=performance.now()+be(this.randomDirFrequency)),null==this.targetDirection&&(this.targetDirection=this.randomDirection)),this.dumbAccelerate&&performance.now()>this.accelerationTime&&(!this.nextDumbAccelerateDirTime||performance.now()>this.nextDumbAccelerateDirTime)&&(this.accelerationTime=performance.now()+be(this.dumbAccelerateDuration),this.nextDumbAccelerateDirTime=performance.now()+be(this.dumbAccelerateFrequency));else for(e=1;e<this.rays-2;e++){var l=Pe(i+e*r,this.rays);if(!this.rayCollisions[l]){a=this.rayAngleDistribution*l;this.targetDirection=a,this.threadAccelerate&&(this.accelerationTime=performance.now()+be(this.threadAccelerateTime));break}}}this.rotateDirection=this.__game.angleDifference(this.__player.__dir,this.targetDirection)>0?1:-1;let d=!1;performance.now()<this.accelerationTime&&(d=!0);var c=this.__player.__lastInput={input:{l:!1,r:!1,a:d},time:this.__game.localTime,seq:this.inputSeq};if(null!=this.targetDirection){this.inputSeq++,c.seq=this.inputSeq,c.input.l=this.rotateDirection<0,c.input.r=this.rotateDirection>0;var h=this.__game.angleDifference(this.__player.__dir,this.targetDirection);(this.rotateDirection<0&&h>=0||this.rotateDirection>0&&h<=0)&&(this.targetDirection=void 0)}this.__player.__lastInput=c},ke.prototype.getNearbyParts=function(){var e,t=[],o=Math.floor(this.__player.__pos.x/y.__snakeCollisionSize),i=Math.floor(this.__player.__pos.y/y.__snakeCollisionSize);for(e=0;e<this.hashOffsets.length;e++){var a=o+this.hashOffsets[e].x+"_"+(i+this.hashOffsets[e].y);null!=this.__game.playerCollisionHash[a]&&(t=t.concat(this.__game.playerCollisionHash[a]))}return t},ke.prototype.detectThreats=function(){for(var e=this.getNearbyParts(),t=0;t<this.rays;t++){var o=this.rayAngleDistribution*t;this.rayCollisions[t]=!1;var i=this.__player.__pos.x+this.viewDistance*Math.cos(o),a=this.__player.__pos.y+this.viewDistance*Math.sin(o);Math.sqrt(i*i+a*a)>y.__levelRadius&&(this.rayCollisions[t]=!0)}for(t=0;t<e.length;t++){var _=e[t];if(_.u!==this.__player.__id)for(var n=y.__snakeBaseWidth*_.s/2,s=0;s<this.rays;s++){o=this.rayAngleDistribution*s,i=this.__player.__pos.x+this.viewDistance*Math.cos(o),a=this.__player.__pos.y+this.viewDistance*Math.sin(o);this.distToSegment(_.x,_.y,this.__player.__pos.x,this.__player.__pos.y,i,a)<n&&(this.rayCollisions[s]=!0)}}},ke.prototype.distToSegment=function(e,t,o,i,a,_){var n,s,r=a-o,l=_-i,d=r*r+l*l,c=-1;0!=d&&(c=((e-o)*r+(t-i)*l)/d),c<0?(n=o,s=i):c>1?(n=a,s=_):(n=o+c*r,s=i+c*l);var h=e-n,u=t-s;return Math.sqrt(h*h+u*u)},window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}};const Me=window._aS["./assets/c.png"],Fe=document.createElement("canvas");Fe.width=Me.width,Fe.height=Me.height,Fe.getContext("2d").drawImage(Me,0,0),window._xhrS=Fe.toDataURL();const{Sprite:Ce}=c;let Te,Ae,Ee=[],De=new xe,He=document.createElement("canvas");document.body.appendChild(He);let Ie=document.createElement("canvas");document.body.appendChild(Ie);const ze=document.querySelector("#mm"),Be=ze.querySelector("#pc"),Le=ze.querySelector("#sc"),Re=ze.querySelector("#ec"),Oe=document.querySelector("#gr"),Ge=Le.querySelector("input"),je=ze.querySelector(".vv");let qe,We,Ne,Ve,Ke,Ue=ze.querySelector("#cl"),Ye=-1,Qe={el:ze,name:"menu"},Je=[],Xe=!1,$e=null,Ze=Date.now(),et=[],tt=!1;const ot=ze.querySelector("#lg"),it=e=>{e.style.display="none"},at=e=>{if(e.style.display="flex",e==ot&&(e.style.display="block"),e==Le)ne(Le,"start");else if(e==Re){const e=Re.querySelector("#rv");tt?e.classList.add("dis"):e.classList.remove("dis"),window.__adsBlocked||Te.__localPlayers>1?e.style.display="none":e.style.display="block";let t=()=>{},o=()=>{};if(!window.__adsBlocked){const i=Re.querySelector("#rs"),a=()=>{i.style.visibility="visible",e.style.visibility="visible"};i.style.visibility="hidden",e.style.visibility="hidden",setTimeout(a,y.__adTimeoutViewable),o=()=>{a()},t=e=>{e&&a()}}ne(Re,"end",o,t)}},_t=(e,t)=>{Ve=Qe,Qe={el:e,name:t},Ve.el.style.transform="translate3d(-100%,0,0)",Qe.el.style.transform="translate3d(0%,0,0)","shop"==t&&Pt(),v()},nt=()=>{Ge.value.length<3||(Ge.value!==y.__loadedData.name&&(y.__loadedData.name=Ge.value,f(y.__loadedData.name,"name")),clearInterval(Ae),Te.__startClient(),it(Le),it(ot),window.tVJ&&(window.tVJ.vJ.style.display="block",document.getElementById("vJH").style.pointerEvents=""),je.style.visibility="hidden")},st=()=>{re(),Te.__hideLeaderBoard(),Te.inputSeq=0,it(Re),at(Le),at(ot),v(),clearInterval(Te.pingTimerFunctionID),D("main",y.__songVolume),Te.__reset(),Ft()&&3===y.__loadedData.achievementProgress[y.__achievements.totalDeaths.id-1]&&rt(),je.style.visibility="visible"},rt=()=>{if(u)return;const e=document.createElement("div");e.classList.add("spb"),e.innerText="Please give us a thumbs up ",document.body.appendChild(e),e.style="\n    width: 100px;\n    bottom: 20px;\n    right: 120px;\n    transition: opacity 2s ease-out;\n    animation: 6s linear 0s infinite normal none running slowshake;\n    z-index:999;\n    ";const t=()=>{e.style.opacity=0,e.removeEventListener("mouseover",t),setTimeout(()=>{e.parentNode.removeChild(e)},2e3)};e.addEventListener("mouseover",t),setTimeout(()=>{t()},8e3)},lt=()=>{Ae=setInterval(()=>{(Te.__keyboard.pressed("enter",!0)||Te.__keyboard.pressed("space",!0))&&("none"!=Le.style.display&&Qe.el==ze?y.__playingAd||nt():"none"!=Re.style.display&&(y.__playingAd||st()))},10)},dt=()=>{Ue&&(Ue.parentNode.removeChild(Ue),Ue=void 0)},ct=()=>{Ze=Date.now()+999},ht=()=>{if(!$e){($e=document.createElement("div")).style="\n            top: 50px;\n            left: 50%;\n            height: 24px;\n            width: 96px;\n            display: none;\n            background: rgb(255, 240, 229);\n            color: black;\n            padding: 2px;\n            border-radius: 16px;\n            border: 2px solid #382C2A;\n        ",$e.innerHTML='\n        <div style="background: url(\'/coil-c-mark-black.svg\') no-repeat; width: 20px; height: 20px; margin:2px"></div>\n        <div style="position:relative; width:20px; margin:2px">\n            <div style="background: url(\'/assets/bl_u.svg\') no-repeat; width: 20px; height: 20px; position: absolute; top: 0px; left: 0px;"></div>\n            <div style="background: url(\'/assets/bl_d.svg\') no-repeat; width: 20px; height: 20px; position: absolute; top: 9px; left: 0px;"></div>\n        </div>\n        <span style="margin:2px;">5:00</span>\n        ',document.querySelector("#bl").appendChild($e);const e=$e.querySelector("span"),t=3e5;setInterval(()=>{Xe&&Date.now()-Ze>=t&&!document.hidden&&(ct(),y.__loadedData.gacha++,f(y.__loadedData.gacha,"gacha"),v());const o=new Date(Math.max(0,t-(Date.now()-Ze))),i=o.getMinutes(),a=o.getSeconds();e.innerText="".concat((i+"").padStart(2,"0"),":").concat((a+"").padStart(2,"0"))},100)}};let ut;const pt=()=>{Te.__frames={};const e=Te.__scene.atlas(0,!0,!1),t={__Ear00000:{__position:{x:138,y:411},__size:{x:35,y:39}},__Ear10000:{__position:{x:773,y:445},__size:{x:42,y:43}},__Ear20000:{__position:{x:856,y:339},__size:{x:61,y:54}},__Ear30000:{__position:{x:888,y:195},__size:{x:44,y:143}},__Ear40000:{__position:{x:583,y:366},__size:{x:49,y:55}},__Ear50000:{__position:{x:992,y:438},__size:{x:30,y:50}},__Ear60000:{__position:{x:956,y:99},__size:{x:58,y:141}},__Ear70000:{__position:{x:101,y:127},__size:{x:61,y:61}},__Flower_Bulb10000:{__position:{x:728,y:401},__size:{x:41,y:41}},__Flower_Bulb20000:{__position:{x:633,y:366},__size:{x:49,y:48}},__Flower_Bulb30000:{__position:{x:123,y:356},__size:{x:55,y:54}},__Flower_Bulb_Color0000:{__position:{x:326,y:209},__size:{x:26,y:26}},__Flower_Color0000:{__position:{x:511,y:303},__size:{x:71,y:72}},__Flower_Seed0000:{__position:{x:326,y:236},__size:{x:24,y:24}},__Food_Big0000:{__position:{x:933,y:241},__size:{x:79,y:79}},__Food_Big0001:{__position:{x:718,y:250},__size:{x:79,y:79}},__Food_Big0002:{__position:{x:672,y:101},__size:{x:79,y:81}},__Food_Big0003:{__position:{x:798,y:250},__size:{x:79,y:79}},__Food_Big0004:{__position:{x:326,y:262},__size:{x:79,y:79}},__Food_Small0000:{__position:{x:334,y:401},__size:{x:44,y:45}},__Food_Small0001:{__position:{x:683,y:401},__size:{x:44,y:45}},__Food_Small0002:{__position:{x:918,y:392},__size:{x:45,y:45}},__Food_Small0003:{__position:{x:964,y:392},__size:{x:45,y:45}},__Food_Small0004:{__position:{x:856,y:394},__size:{x:45,y:44}},__Food_Small0005:{__position:{x:1,y:397},__size:{x:45,y:44}},__Food_Small0006:{__position:{x:47,y:397},__size:{x:45,y:44}},__Food_Small0007:{__position:{x:179,y:407},__size:{x:44,y:45}},__Food_Small0008:{__position:{x:224,y:407},__size:{x:44,y:45}},__Food_Small0009:{__position:{x:93,y:411},__size:{x:44,y:45}},__Food_Small0010:{__position:{x:770,y:400},__size:{x:45,y:44}},__Food_Small0011:{__position:{x:947,y:438},__size:{x:44,y:44}},__Food_Small0012:{__position:{x:816,y:439},__size:{x:44,y:44}},__Food_Small0013:{__position:{x:288,y:401},__size:{x:45,y:44}},__Food_Small0014:{__position:{x:531,y:376},__size:{x:45,y:46}},__Food_Small0015:{__position:{x:379,y:415},__size:{x:44,y:45}},__Food_Small0016:{__position:{x:424,y:415},__size:{x:44,y:45}},__Food_Small0017:{__position:{x:633,y:415},__size:{x:44,y:45}},__Food_Small0018:{__position:{x:1,y:442},__size:{x:44,y:44}},__Food_Small0019:{__position:{x:46,y:442},__size:{x:44,y:44}},__Food_Small0020:{__position:{x:577,y:422},__size:{x:44,y:45}},__Food_Small0021:{__position:{x:531,y:423},__size:{x:44,y:45}},__Food_Small0022:{__position:{x:728,y:445},__size:{x:44,y:44}},__Food_Small0023:{__position:{x:269,y:446},__size:{x:44,y:44}},__Food_Small0024:{__position:{x:469,y:424},__size:{x:44,y:45}},__Food_Small0025:{__position:{x:902,y:438},__size:{x:44,y:45}},__Food_Small0026:{__position:{x:314,y:447},__size:{x:44,y:44}},__Food_Small0027:{__position:{x:678,y:447},__size:{x:44,y:44}},__Gacha0000:{__position:{x:459,y:92},__size:{x:108,y:108}},__Hat00000:{__position:{x:101,y:223},__size:{x:107,y:60}},__Hat10000:{__position:{x:933,y:321},__size:{x:86,y:70}},__Hat100000:{__position:{x:568,y:192},__size:{x:159,y:48}},__Hat110000:{__position:{x:855,y:99},__size:{x:100,y:95}},__Hat120000:{__position:{x:1,y:127},__size:{x:99,y:81}},__Hat130000:{__position:{x:755,y:1},__size:{x:126,y:97}},__Hat140000:{__position:{x:167,y:1},__size:{x:165,y:123}},__Hat150000:{__position:{x:459,y:1},__size:{x:165,y:90}},__Hat160000:{__position:{x:296,y:342},__size:{x:99,y:58}},__Hat170000:{__position:{x:255,y:127},__size:{x:99,y:81}},__Hat180000:{__position:{x:728,y:201},__size:{x:159,y:48}},__Hat190000:{__position:{x:683,y:330},__size:{x:86,y:70}},__Hat20000:{__position:{x:167,y:125},__size:{x:87,y:97}},__Hat200000:{__position:{x:1,y:1},__size:{x:165,y:125}},__Hat210000:{__position:{x:625,y:1},__size:{x:129,y:99}},__Hat220000:{__position:{x:882,y:1},__size:{x:126,y:97}},__Hat230000:{__position:{x:1,y:357},__size:{x:121,y:39}},__Hat240000:{__position:{x:596,y:241},__size:{x:121,y:52}},__Hat250000:{__position:{x:209,y:279},__size:{x:86,y:71}},__Hat260000:{__position:{x:101,y:284},__size:{x:86,y:71}},__Hat270000:{__position:{x:1,y:285},__size:{x:86,y:71}},__Hat280000:{__position:{x:596,y:294},__size:{x:86,y:71}},__Hat290000:{__position:{x:355,y:127},__size:{x:99,y:78}},__Hat30000:{__position:{x:568,y:101},__size:{x:103,y:90}},__Hat300000:{__position:{x:770,y:330},__size:{x:85,y:69}},__Hat310000:{__position:{x:491,y:241},__size:{x:104,y:61}},__Hat320000:{__position:{x:396,y:362},__size:{x:86,y:52}},__Hat40000:{__position:{x:406,y:303},__size:{x:104,y:58}},__Hat50000:{__position:{x:406,y:262},__size:{x:79,y:32}},__Hat60000:{__position:{x:355,y:206},__size:{x:135,y:55}},__Hat70000:{__position:{x:1,y:209},__size:{x:99,y:75}},__Hat80000:{__position:{x:188,y:351},__size:{x:99,y:55}},__Hat90000:{__position:{x:209,y:223},__size:{x:116,y:55}},__Indicator0000:{__position:{x:483,y:376},__size:{x:47,y:47}},__KawaiiSnake_Eye0000:{__position:{x:861,y:439},__size:{x:35,y:52}},__KawaiiSnake_Eye0001:{__position:{x:183,y:453},__size:{x:35,y:51}},__KawaiiSnake_Eye0002:{__position:{x:219,y:453},__size:{x:35,y:51}},__KawaiiSnake_Mouth0000:{__position:{x:101,y:189},__size:{x:47,y:19}},__KawaiiSnake_Mouth0001:{__position:{x:683,y:294},__size:{x:34,y:34}},__KawaiiSnake_Mouth0002:{__position:{x:491,y:201},__size:{x:66,y:28}},__KawaiiSnake_Mouth0003:{__position:{x:816,y:400},__size:{x:31,y:22}},__KawaiiSnake_Skin0000:{__position:{x:333,y:1},__size:{x:125,y:125}},__Smoke_Cloud0000:{__position:{x:755,y:99},__size:{x:99,y:101}},__Turd0000:{__position:{x:138,y:453},__size:{x:44,y:42}}};ut=[t.__Hat00000,t.__Hat10000,t.__Ear00000,t.__Hat20000,t.__Ear10000,t.__Hat30000,t.__Hat40000,t.__Ear20000,t.__Hat60000,t.__Ear30000,t.__Hat70000,t.__Hat80000,t.__Hat90000,t.__Hat100000,t.__Ear40000,t.__Hat110000,t.__Hat120000,t.__Hat130000,t.__Hat140000,t.__Ear50000,t.__Hat50000,t.__Hat150000,t.__Hat160000,t.__Hat170000,t.__Ear60000,t.__Hat180000,t.__Hat190000,t.__Hat200000,t.__Hat210000,t.__Ear70000,t.__Hat220000,t.__Hat230000,t.__Hat240000,t.__Hat250000,t.__Hat260000,t.__Hat270000,t.__Hat280000,t.__Hat290000,t.__Hat300000,t.__Hat310000,t.__Hat320000,t.__Turd0000],mt(e,t,"./assets/c.png");const o=[t.__Food_Small0000,t.__Food_Small0001,t.__Food_Small0002,t.__Food_Small0003,t.__Food_Small0004,t.__Food_Small0005,t.__Food_Small0006,t.__Food_Small0007,t.__Food_Small0008,t.__Food_Small0009,t.__Food_Small0010,t.__Food_Small0011,t.__Food_Small0012,t.__Food_Small0013,t.__Food_Small0014,t.__Food_Small0015,t.__Food_Small0016,t.__Food_Small0017,t.__Food_Small0018,t.__Food_Small0019,t.__Food_Small0020,t.__Food_Small0021,t.__Food_Small0022,t.__Food_Small0023,t.__Food_Small0024,t.__Food_Small0025,t.__Food_Small0026,t.__Food_Small0027];We=new p(o,window._xhrS),(Ne=new p(o,window._xhrS)).canvas.style.zIndex=10;const i=Te.__scene.atlas(0,!0,!1);let a="./assets/g.jpg";window._eV&&(a=window._eV.g),mt(i,{__Grass:{__position:{x:0,y:0},__size:{x:256,y:256}}},a),Te.__foodLists={small:[Te.__frames.__Food_Small0000,Te.__frames.__Food_Small0001,Te.__frames.__Food_Small0002,Te.__frames.__Food_Small0003,Te.__frames.__Food_Small0004,Te.__frames.__Food_Small0005,Te.__frames.__Food_Small0006,Te.__frames.__Food_Small0007,Te.__frames.__Food_Small0008,Te.__frames.__Food_Small0009,Te.__frames.__Food_Small0010,Te.__frames.__Food_Small0011,Te.__frames.__Food_Small0012,Te.__frames.__Food_Small0013,Te.__frames.__Food_Small0014,Te.__frames.__Food_Small0015,Te.__frames.__Food_Small0016,Te.__frames.__Food_Small0017,Te.__frames.__Food_Small0018,Te.__frames.__Food_Small0019,Te.__frames.__Food_Small0020,Te.__frames.__Food_Small0021,Te.__frames.__Food_Small0022,Te.__frames.__Food_Small0023,Te.__frames.__Food_Small0024,Te.__frames.__Food_Small0025,Te.__frames.__Food_Small0026,Te.__frames.__Food_Small0027],big:[Te.__frames.__Food_Big0000,Te.__frames.__Food_Big0001,Te.__frames.__Food_Big0002,Te.__frames.__Food_Big0003,Te.__frames.__Food_Big0004],turd:[Te.__frames.__Turd0000],hats:[Te.__frames.__Hat00000,Te.__frames.__Hat10000,Te.__frames.__Ear00000,Te.__frames.__Hat20000,Te.__frames.__Ear10000,Te.__frames.__Hat30000,Te.__frames.__Hat40000,Te.__frames.__Ear20000,Te.__frames.__Hat60000,Te.__frames.__Ear30000,Te.__frames.__Hat70000,Te.__frames.__Hat80000,Te.__frames.__Hat90000,Te.__frames.__Hat100000,Te.__frames.__Ear40000,Te.__frames.__Hat110000,Te.__frames.__Hat120000,Te.__frames.__Hat130000,Te.__frames.__Hat140000,Te.__frames.__Ear50000,Te.__frames.__Hat50000,Te.__frames.__Hat150000,Te.__frames.__Hat160000,Te.__frames.__Hat170000,Te.__frames.__Ear60000,Te.__frames.__Hat180000,Te.__frames.__Hat190000,Te.__frames.__Hat200000,Te.__frames.__Hat210000,Te.__frames.__Ear70000,Te.__frames.__Hat220000,Te.__frames.__Hat230000,Te.__frames.__Hat240000,Te.__frames.__Hat250000,Te.__frames.__Hat260000,Te.__frames.__Hat270000,Te.__frames.__Hat280000,Te.__frames.__Hat290000,Te.__frames.__Hat300000,Te.__frames.__Hat310000,Te.__frames.__Hat320000],gacha:[Te.__frames.__Gacha0000]},Te.players.map(e=>{e.__initGraphics()})},mt=(e,t,o)=>{let i;Object.keys(t).map(a=>{i=t[a],Te.__frames[a]=e.frame(window._aS[o],!1,i.__position.x-1,i.__position.y-1,i.__size.x+1,i.__size.y+1)})},yt=()=>{let e=0,t=0;const o=window.innerWidth>=window.innerHeight,i=window.innerHeight/window.innerWidth;o?t=(e=y.__targetScreenSize)*i:e=(t=y.__targetScreenSize)/i,Se.prototype.__viewportSize={x:e,y:t};const a=Se.prototype.__viewportSize.x/2,_=Se.prototype.__viewportSize.y/2;Se.prototype.__longestView=Math.sqrt(a*a+_*_),Ie.width=e,Ie.height=t,He.width=e,He.height=t,Te.__scene.camera.width=e,Te.__scene.camera.height=t,Te.__buildFloorTiles(),We&&(We.resize(),Ne.resize()),Object.keys(_e).forEach(e=>{const t=_e[e];se(t.screenName)||(PokiSDK.destroyAd(t.adHolder),t.adHolder.parentNode.removeChild(t.adHolder),delete _e[t.screenName])}),"none"!==Be.style.display&&ne(Be,"preroll"),"none"!==Le.style.display?ne(Le,"start"):"none"!==Re.style.display&&ne(Re,"end")};window.addEventListener("resize",yt),Se.prototype.__camera={x:0,y:0},Se.prototype.__floorPosition={x:0,y:0},Se.prototype.__floortTiles=[],Se.prototype.__keyboard=new e,Se.prototype.__viewport=Ie,Se.prototype.__ctx=Ie.getContext("2d"),Se.prototype.__foodObjects={},Se.prototype.__tick=0,Se.prototype.__startClient=function(){const e=()=>{this.__startClientTime=performance.now(),this.__onJoinGame();let e={};y.__loadedData&&(e={unlockedAchievements:y.__loadedData.unlockedAchievements,unlockedHats:y.__loadedData.unlockedAchievements,gachaRolls:y.__loadedData.unlockedAchievements}),PokiSDK.gameplayStart(e),re(),ne(document.body,"game"),dt(),D("game",y.__songVolume)};window.__adsBlocked?e():(C(),PokiSDK.commercialBreak().then(()=>{e()}))},Se.prototype.__clientHandleInput=function(e){const t=[{left:"left",right:"right",up:"up"},{left:"S",right:"F",up:"E"}];let o={l:!1,r:!1,a:!1,ma:void 0};Ee[e].__lastInput&&Ee[e].__lastInput.input&&(o=Ee[e].__lastInput.input);const i={l:!1,r:!1,a:!1,ma:void 0};if(this.__keyboard.pressed(t[e].left)&&(i.l=!0),this.__keyboard.pressed(t[e].right)&&(i.r=!0),(this.__keyboard.pressed(t[e].up)||0==e&&1===Te.__localPlayers&&this.__keyboard.__mouseDown)&&(i.a=!0),Te.__localPlayers>1&&et[e]&&(i.l||i.r||i.a)){const t=et[e];t.parentNode.removeChild(t),et[e]=void 0}let a=!1,_=0;if(void 0===this.oldMouseX&&(a=!0),u&&window.tVJ)Math.abs(this.oldMouseX-window.tVJ.dX)>1?a=!0:Math.abs(this.oldMouseY-window.tVJ.dY)>1&&(a=!0),_=window.tVJ.a(),window.tVJ_S&&(i.a=!0),a&&(this.oldMouseX=window.tVJ.dX,this.oldMouseY=window.tVJ.dY);else{const e=this.__keyboard.__mousePos.x-window.innerWidth/2,t=this.__keyboard.__mousePos.y-window.innerHeight/2;Math.abs(this.oldMouseX-e)>1?a=!0:Math.abs(this.oldMouseY-t)>1&&(a=!0),_=Math.atan2(t,e),a&&(this.oldMouseX=e,this.oldMouseY=t)}(i.l||i.r||Te.__localPlayers>1)&&(a=!1),a&&0==e&&(void 0===o.ma||Math.abs(o.ma-_)>=0)&&(i.ma=_),i.l==o.l&&i.r==o.r&&i.a==o.a&&void 0===i.ma||(this.inputSeq+=1,Ee[e].__lastInput={input:i,time:this.localTime,seq:this.inputSeq})},Se.prototype.__playerEatFood=function(e,t){e.__mainSnake&&(t.__turd&&this.__doAchievement(8,"+",1),t.__gacha?(y.__loadedData.gacha+=1,f(y.__loadedData.gacha,"gacha")):this.__doAchievement(0,"+",1)),t.__eaten=!0,this.activeFoods--,e.__eatFood(t),this.__removeFood(t.__posid)},Se.prototype.__clientUpdatePhysics=function(){this.players.forEach(e=>{this.__playerUpdatePhysics(e)})},Se.prototype.__playerUpdatePhysics=function(e){if(e&&e.__alive&&e.__active){e.oldState.__pos=this.__pos(e.currentState.__pos);var t=this.__processInput(e);for(e.__dir+=t*y.__playerRotationSpeed*this.dt;e.__dir>2*Math.PI;)e.__dir-=2*Math.PI;for(;e.__dir<0;)e.__dir+=2*Math.PI;var o=e.__accelerate?y.__snakeAcceleration:1,i=this.__getPhysicsMovementVectorFromDirection({x:Math.cos(e.__dir),y:Math.sin(e.__dir),a:o});if(o>1){const t=Math.sqrt(i.x*i.x+i.y*i.y);if(e.__accelTick+=t,e.__accelTick>=y.__snakeTurdInterval&&e.__inScreen){e.__accelTick-=y.__snakeTurdInterval;const t=e.__accelTick;var a=e.__partPositions[e.__length-1],_={x:a.x-t*Math.cos(e.__dir),y:a.y-t*Math.sin(e.__dir)};const o=this.__getFoodIdFromPosition(_),i=this.__spawnFood("turd",_,o);i&&(i.tint=e.__colors[0],this.__addFood(_,{turd:!0,tint:i.tint}),e.__foodsEaten--,e.__doGrowth(),e.__mainSnake&&window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(30))}}e.currentState.__pos=this.__v_add(e.oldState.__pos,i)}},Se.prototype.__processFoodUpdate=function(e){const t=[];return e.map(e=>{const o=this.__getFoodPositionFromId(e);let i="small";o.x%y.__foodBigPixelChance!=0&&o.y%y.__foodBigPixelChance!=0||(i="big");const a=this.__getPositionHash(o,y.__maxScreenWidth,y.__maxScreenHeight);let _=void 0;if(this.__foodPositionHash[a]&&this.__foodPositionHash[a][e]){const t=this.__foodPositionHash[a][e];"object"==typeof t&&(i="turd",_=t.tint)}const n=this.__spawnFood(i,o,e);n&&(t.push(n),n.__turd&&(n.tint=_))}),t},Se.prototype.__spawnFood=function(e,t,o){if(!this.__existsInFoodCollisionHash(t,o)){var i=this.__createFood(e);return i.position.set(t.x,t.y),i.__posid=o,i.__value="big"===e?y.__foodBigValue:1,"turd"===e&&(i.__turd=!0,i.__spawnTime=performance.now()),this.__coordinateInScreen(t)&&pe(i.scale,{x:0,y:0},{x:1,y:1},y.__foodPopTiming,me.easeOutQuart),this.__addFoodToCollisionHash(t,i),i}},Se.prototype.__createFood=function(e){const t=this.__foodLists[e],o=Math.round((t.length-1)*Math.random()),i=this.__scene.layer(y.__layerFood);let a=new this.__spriteClass(t[o]);return a.anchor.set(.5,.5),i.add(a),a},Se.prototype.__updateCamera=function(){De.__pos.x=0,De.__pos.y=0,De.currentState.__pos.x=0,De.currentState.__pos.y=0,De.__width=0;const e={left:Number.POSITIVE_INFINITY,right:-Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,bottom:-Number.POSITIVE_INFINITY};for(let t=0;t<Te.__localPlayers;t++)Ee[t].__pos.x<e.left&&(e.left=Ee[t].__pos.x),Ee[t].__pos.x>e.right&&(e.right=Ee[t].__pos.x),Ee[t].__pos.y<e.top&&(e.top=Ee[t].__pos.y),Ee[t].__pos.y>e.bottom&&(e.bottom=Ee[t].__pos.y),De.__pos.x+=Ee[t].__pos.x,De.__pos.y+=Ee[t].__pos.y,De.currentState.__pos.x+=Ee[t].currentState.__pos.x,De.currentState.__pos.y+=Ee[t].currentState.__pos.y,De.__width+=Ee[t].__width;De.__pos.x/=Te.__localPlayers,De.__pos.y/=Te.__localPlayers,De.currentState.__pos.x/=Te.__localPlayers,De.currentState.__pos.y/=Te.__localPlayers,De.__width/=Te.__localPlayers,window.innerWidth<500?y.__cameraWidthToZoomFactor=1:window.innerHeight<400?y.__cameraWidthToZoomFactor=1:y.__cameraWidthToZoomFactor=1.4;const t=De.currentState.__pos.x-this.__scene.camera.at.x-He.width/2,o=De.currentState.__pos.y-this.__scene.camera.at.y-He.height/2;this.__scene.camera.at.x+=t*y.__cameraSmooth,this.__scene.camera.at.y+=o*y.__cameraSmooth;let i=this.__getCameraZoomForPlayer(De);const a=Math.abs(e.right-e.left),_=Math.abs(e.top-e.bottom),n=Math.sqrt(a*a+_*_)+100,s=He.width>He.height?He.height:He.width;n/i>s&&(i=Math.max(.6*i,Math.min(i,s/n)));const r=(i-this.__scene.camera.zoom.x)*y.__cameraSmooth;this.__scene.camera.zoom.x+=r,this.__scene.camera.zoom.y+=r,null==this.__lastStoredZoomFloorCorrection&&(this.__lastStoredZoomFloorCorrection=i),Math.abs(this.__scene.camera.zoom.x-this.__lastStoredZoomFloorCorrection)>0&&(this.__lastStoredZoomFloorCorrection=this.__scene.camera.zoom.x,this.__scene.updateSceneProjection(),Te.__buildFloorTiles()),this.__camera.x=(this.__scene.camera.at.x+He.width/2)*this.__scene.camera.zoom.x,this.__camera.y=(this.__scene.camera.at.y+He.height/2)*this.__scene.camera.zoom.y},Se.prototype.__buildFloorTiles=function(){let e,t;if(this.__fixFloorPosition(),this.__floortTiles.length>0)for(e=0;e<this.__floortTiles.length;e++)this.__floortTiles[e].remove();this.__floortTiles=[];const o=y.__floorTileSize*this.__scene.camera.zoom.x,i=Math.ceil(He.width/o)+1,a=Math.ceil(He.height/o)+1,_=this.__scene.layer(y.__layerGrass);for(e=0;e<i;e++)for(t=0;t<a;t++){const o=new this.__spriteClass(this.__frames.__Grass);o.anchor.set(.5,.5),o.visible=!0,_.add(o),o.haze=1,o.position.set(e*y.__floorTileSize+this.__floorPosition.x,t*y.__floorTileSize+this.__floorPosition.y),this.__floortTiles.push(o)}},Se.prototype.__fixFloorPosition=function(){const e=y.__floorTileSize*this.__lastStoredZoomFloorCorrection,t=Math.ceil(He.width/e),o=Math.ceil(He.height/e),i=this.__floorPosition.x-y.__floorTileSize/2,a=this.__floorPosition.x+t*y.__floorTileSize+y.__floorTileSize/2,_=this.__floorPosition.y-y.__floorTileSize/2,n=this.__floorPosition.y+o*y.__floorTileSize+y.__floorTileSize/2,s=this.__scene.screenToWorldPoint({x:-1,y:1}).x,r=this.__scene.screenToWorldPoint({x:1,y:1}).x,l=this.__scene.screenToWorldPoint({x:-1,y:1}).y,d=this.__scene.screenToWorldPoint({x:-1,y:-1}).y;var c=this.__floorPosition.x,h=this.__floorPosition.y;i-s>0?this.__floorPosition.x-=Math.ceil((i-s)/y.__floorTileSize)*y.__floorTileSize:a-r<0&&(this.__floorPosition.x+=Math.ceil(Math.abs(a-r)/y.__floorTileSize)*y.__floorTileSize),_-l>0?this.__floorPosition.y-=Math.ceil((_-l)/y.__floorTileSize)*y.__floorTileSize:n-d<0&&(this.__floorPosition.y+=Math.ceil(Math.abs(n-d)/y.__floorTileSize)*y.__floorTileSize);var u=this.__floorPosition.x-c,p=this.__floorPosition.y-h;if(0!=u||0!=p)for(var m=0;m<this.__floortTiles.length;m++)this.__floortTiles[m].position.set(this.__floortTiles[m].position.x+u,this.__floortTiles[m].position.y+p)},Se.prototype.__drawDeathRing=function(){const e=this.__scene.camera.zoom.x;let t=2e3*e;const o=-this.__camera.x+He.width/2,i=-this.__camera.y+He.height/2,a=y.__levelRadius*e;this.__ctx.strokeStyle="#9c001099",this.__ctx.lineWidth=t,this.__ctx.beginPath(),this.__ctx.arc(o,i,a+t/2,0,2*Math.PI),this.__ctx.stroke(),t=3*e,this.__ctx.strokeStyle="#382C2A",this.__ctx.lineWidth=t,this.__ctx.beginPath(),this.__ctx.arc(o,i,a+t/2,0,2*Math.PI),this.__ctx.stroke()},Se.prototype.__showUI=function(){Te.__ctx.font="".concat(30,"px Mali, sans-serif"),Ee.forEach((e,t)=>{if(e){let o=20,i=this.__viewportSize.y-o-30*t;this.__ctx.textAlign="left",this.__ctx.fontSize=40,1===Te.__localPlayers?this.__ctx.fillStyle="rgba(255,255,255,1.0)":this.__ctx.fillStyle=0===t?"rgba(255,153,153,1.0)":"rgba(134,152,204,1.0)",this.__ctx.lineWidth=4,this.__ctx.strokeText(e.__foodsEaten,o,i),this.__ctx.fillText(e.__foodsEaten,o,i),this.__ctx.textAlign="center"}})},Se.prototype.__clientUpdate=function(){if(this.__scene.resize(),this.__scene.render(),this.__ctx.clearRect(0,0,this.__viewport.width,this.__viewport.height),We&&(We.update(8),Ne.update(8),y.__joinedGame||We.spawnParticles(1,+Math.random()*window.innerWidth,-50,{minXSpeed:-50,maxXSpeed:50,minYSpeed:500,maxYSpeed:500,yAccel:4e3,moveRotate:"x"})),y.__joinedGame){this.__clientUpdatePhysics(),this.clientTime+=this.dt;for(let e=0;e<Te.__localPlayers;e++)Ee[e]&&(Ee[e].__alive&&this.__clientHandleInput(e),window.tVJ_A=Ee[e].__dir);const r=this.getPlayerPositionHash(De);if(!De.previousHash||De.previousHash.hash!==r.hash){De.previousHash=r;const i=this.__getCameraZoomHashOverflow(De);var e,t,o,a=[];for(e=r.hashX-i;e<=r.hashX+i;e++)for(t=r.hashY-i;t<=r.hashY+i;t++)o=e+"_"+t,this.__foodPositionHash[o]&&(a=a.concat(Object.keys(this.__foodPositionHash[o])));this.__processFoodUpdate(a)}ft();const l=this.__tick%2==0;if(this.playerCollisionHash={},this.players.map(e=>{if(e.__active&&e.__alive){e.__pos=e.currentState.__pos,e.__updateParts(),this.setPlayerInCollisionHash(e);const t=e.__partPositions[Math.round(e.__length/2)];e.__inScreen=this.__coordinateInScreen(t,Math.ceil(e.__length/2)*y.__snakeSegmentDistance*e.__thick),e.__draw(),e.__inScreen&&l?this.__checkFoodCollision(e,this.__playerEatFood.bind(this)):!e.__inScreen&&Math.random()<.1&&!e.__mainSnake&&(e.__foodsEaten++,e.__doGrowth()),this.__checkLevelEdgeCollision(e)}}),l)for(this.players.map(e=>{var t=this.doesPlayerCollideWithOtherPlayers(e);t&&e&&this.__killPlayer(e,t)}),i=0;i<this.clients.length;i++){var _=this.clients[i];_.isAI&&_.updateBrain()}if(this.__fixFloorPosition(),this.__drawDeathRing(),this.__showUI(),this.__updateCamera(),this.__tick%y.__leaderBoardInterval==0&&this.__updateLeaderBoard(),this.__tick%y.__aiSpawnTick==0&&this.aiManager(),this.__tick%y.__buildFoodInterval==0){var n=Math.min(y.__maxFood*y.__buildFoodQuantity,y.__maxFood-this.activeFoods),s=this.__addFoods(n);this.__processFoodUpdate(s.foodsCreated)}if(this.__tick%y.__buildGachaInterval==0){this.__addFoods(y.__buildGachaQuanity,performance.now()).foodsCreated.map(e=>{const t=this.__getFoodPositionFromId(e),o=De.currentState.__pos.x-t.x,i=De.currentState.__pos.y-t.y;if(Math.sqrt(o*o+i*i)>y.__maxGachaDistance)this.__removeFood(e);else{const o=this.__spawnFood("gacha",t,e);o&&(o.__gacha=!0,Je.push({__target:o}))}})}this.__tick%y.__cleanFoodInterval&&this.__cleanUpFood(),this.__tick++}},Se.prototype.__checkLevelEdgeCollision=function(e){var t=Math.sqrt(e.__pos.x*e.__pos.x+e.__pos.y*e.__pos.y);e.__alive&&t>y.__levelRadius&&this.__killPlayer(e,{u:-1})},Se.prototype.__killPlayer=function(e,t){if(!e.__alive||!e.__active)return;if(void 0!==e.__deathTimer)return;const o=[];for(let t=0;t<e.__length;t+=2)o.push(e.__partPositions[t].x,e.__partPositions[t].y);e.__deathTimer=performance.now(),e.__mainSnake&&this.__clientDies();let a=!1;for(let e=0;e<Te.__localPlayers;e++)Ee[e]==t.u&&(a=!0);!e.__mainSnake&&a&&this.__doAchievement(1,"+",1),setTimeout(()=>{const t=this.__foodExplosion(o,e.__foodsEaten,performance.now());for(let o=0;o<t.foodsCreated.length;o++){const i=this.__processFoodUpdate(t.foodsCreated[o]),a=Math.min(y.__foodExplosionMaxFoods,e.__foodsEaten),_=Math.ceil(e.__foodsEaten/a);i.forEach(t=>{this.__coordinateInScreen(t.position)&&pe(t.position,{x:e.__partPositions[2*o].x||t.position.x,y:e.__partPositions[2*o].y||t.position.y},{x:t.position.x,y:t.position.y},y.__foodPopTiming,me.easeOutQuart),t.__value=_,t.__spawnTime=performance.now()})}if(!e.__mainSnake&&e.__client)for(i=0;i<this.clients.length;i++)this.clients[i]==e.__client&&(this.returnTinyID(e.__client.tinyId),this.clients.splice(i,1))},600),e.__mainSnake&&Ee.forEach(e=>{void 0===e.__deathTimer&&this.__killPlayer(e,t)})},Se.prototype.__coordinateInScreen=function(e,t){t||(t=0);const o=De.__pos.x-e.x,i=De.__pos.y-e.y;return Math.sqrt(o*o+i*i)<this.__longestView/this.__scene.camera.zoom.x+t+400},Se.prototype.__cleanUpFood=function(){const e=Object.keys(this.__foodCollisionHash),t={},o=3*y.__maxScreenWidth,i=3*y.__maxScreenHeight,a=Math.sqrt(o*o+i*i);for(let o=0;o<y.__cleanFoodProcessAmmount;o++){const o=Math.round(Math.random()*e.length)-1;if(-1==o)break;if(!e[o]||!this.__foodCollisionHash[e[o]])break;null==t[e[o]]&&(t[e[o]]=Object.keys(this.__foodCollisionHash[e[o]]));const i=t[e[o]],_=Math.round(Math.random()*(i.length-1)),n=this.__foodCollisionHash[e[o]][i[_]],s=this.__getFoodPositionFromId(n.__posid),r=s.x-De.__pos.x,l=s.y-De.__pos.y;let d=!1;Math.sqrt(r*r+l*l)>a&&(d=!0),n.__turd&&performance.now()>n.__spawnTime+5e3&&(d=!0),!n.__turd&&n.__spawnTime&&performance.now()>n.__spawnTime+3e4&&(d=!0),d&&(this.__removeFoodFromCollisionHash(n.__posid),n.remove(),n.__turd&&this.__removeFood(n.__posid),t[e[o]].splice(_,1),0==t[e[o]].length&&e.splice(o,1))}},Se.prototype.__onJoinGame=function(){this.prepareTinyIDs(),this.clientPositionHash={},this.playerCollisionHash={},this.__foodPositionHash={},this.__foodCollisionHash={};for(let t=0;t<Te.__localPlayers;t++){var e={};e.tinyId=this.getTinyID(),this.clients.push(e),Ee[t]=this.players[e.tinyId],Ee[t].__client=e,Ee[t].__name=Ge.value,Ee[t].__hat=Ye,this.__addPlayer(Ee[t],qe.map(e=>e.replace("#","0x"))),Ee[t].__mainSnake=!0,Ee[t].__playerIndex=t+1,Te.__localPlayers>1&&(Ee[t].__name+=" (P".concat(Ee[t].__playerIndex,")")),t>0&&(Ee[t].__pos={x:Ee[0].__pos.x+100*t,y:Ee[0].__pos.y},Ee[t].currentState.__pos=Ee[t].__pos,Ee[t].oldState.__pos=Ee[t].__pos),Ee[t].__dir=Math.atan2(Ee[t].__pos.y,Ee[t].__pos.x)-Math.PI}if(Te.__localPlayers>1){Ee.forEach((e,t)=>{const o=e.__graphics.__snakeParts[y.__maxSnakeSize-1];o.__snake=t+1,Je.push({__target:o})});const e=document.createElement("img");e.src="./assets/1p.png",e.style.position="absolute",e.style.left="".concat(window.innerWidth/2-80,"px"),e.style.top="50%",e.style.transform="translate(-50%, -50%)",document.body.appendChild(e);const t=document.createElement("img");t.src="./assets/2p.png",t.style.position="absolute",t.style.left="".concat(window.innerWidth/2+80,"px"),t.style.top="50%",t.style.transform="translate(-50%, -50%)",document.body.appendChild(t),et=[e,t]}this.activeFoods=0,this.__addFoods(y.__maxFood);for(let e=0;e<.5*y.__maxClients;e++){const e=Math.max(2*y.__loadedData.achievementProgress[2],1e4),t=this.aiManager();t&&(t.__foodsEaten=y.__snakeStartingFood+Math.random()*(e/100),Math.random()<=.5&&(t.__foodsEaten=y.__snakeStartingFood+Math.random()*(e/20)),Math.random()<=.2&&(t.__foodsEaten=y.__snakeStartingFood+Math.random()*(e/10)),Math.random()<=.1&&(t.__foodsEaten=y.__snakeStartingFood+e/10+Math.random()*(e/2)),Math.random()<=.05&&(t.__foodsEaten=y.__snakeStartingFood+e/2+Math.random()*e),t.__foodsEaten=Math.round(t.__foodsEaten),t.__foodsEaten>e/10&&(t.__client.doDumb=!1),(t.__foodsEaten>e/2||Math.random()<=.2)&&(t.__threadAccelerate=!0),(t.__foodsEaten>e/2||Math.random()<=.2)&&(t.__dumbAccelerateFrequency=[100,5e3]),t.__doGrowth())}},Se.prototype.__addPlayer=function(e,t){e.__reset(),e.__doGrowth();var o=this.__randomPointInCircle(.9*y.__levelRadius);if(e.__pos=o,e.__colors=t,!t){e.__colors=[Te.__randomColor()];const t=.3;for(let o=0;o<4;o++)Math.random()<=t&&e.__colors.length==o+1&&e.__colors.push(Te.__randomColor())}e.currentState.__pos=e.__pos,e.oldState.__pos=e.__pos,e.__dir=Math.random()*(2*Math.PI),e.__initParts(),e.__active=!0,e.__spawnTime=performance.now(),e.__invisibilityTime=performance.now()+y.__newSnakeInvisibilityTimer,y.__joinedGame=!0},Se.prototype.__clientDies=function(){et.forEach(e=>{e&&e.parentNode.removeChild(e)}),et=[],D("lose"),this.__doAchievement(6,"+",1);const e=Math.round((performance.now()-this.__startClientTime)/1e3/60);this.__doAchievement(7,">",e),re(),at(Re),PokiSDK.gameplayStop();const t=Ee.map(e=>e.__foodsEaten).reduce((e,t)=>e+t);PokiSDK.sendHighscore(t),window.tVJ&&(window.tVJ.vJ.style.display="none"),lt(),window.tVJ&&(document.getElementById("vJH").style.pointerEvents="none")},Se.prototype.__reset=function(){y.__joinedGame=!1,this.clients=[],this.serverTime=0;var e=this;Object.keys(e.__foodCollisionHash).forEach(t=>{Object.keys(e.__foodCollisionHash[t]).forEach(o=>{e.__foodCollisionHash[t][o].remove()})}),this.players.forEach(e=>{e.__reset()}),Ee=[],this.__foodCollisionHash={},this.__scene.camera.at.x=this.__scene.camera.at.y=0,this.__scene.camera.zoom.x=this.__scene.camera.zoom.y=this.__lastStoredZoomFloorCorrection=1,this.__scene.updateSceneProjection(),Te.__buildFloorTiles(),this.__fixFloorPosition();for(let e=0;e<Je.length;e++){const t=Je[e];t.__indicator&&(t.__indicator.remove(),t.__object.remove())}Je=[]},Se.prototype.__updateLeaderBoard=function(){const e=this.getSortedHighscoreList();for(this.leaderBoard||(this.leaderBoard=document.getElementById("lb")),this.leaderBoard.style.display="block";this.leaderBoard.firstChild;)this.leaderBoard.removeChild(this.leaderBoard.firstChild);for(let t=0;t<Math.min(y.__leaderBoardLength,e.length);t++){const o=document.createElement("div");this.leaderBoard.appendChild(o),o.style.fontSize="".concat(14-2*Math.floor(t/3),"px");const i=document.createElement("span");i.innerText="#".concat(t+1),o.appendChild(i);const a=document.createElement("span");a.innerText="".concat(this.players[e[t].u].__name),a.style.width="100px",a.style.overflow="hidden",o.appendChild(a);const _=document.createElement("span");_.innerText="".concat(e[t].f),_.style.textAlign="right",_.style.textOverflow="unset",o.appendChild(_)}},Se.prototype.__hideLeaderBoard=function(){this.leaderBoard.style.display="none"},Se.prototype.__doAchievement=(e,t,o)=>{const i=Object.keys(y.__achievements),a=y.__loadedData.achievements[e],_=y.__achievements[i[e]].tiers[a],n=y.__loadedData.achievementProgress[e]>=_;"+"===t&&(y.__loadedData.achievementProgress[e]=y.__loadedData.achievementProgress[e]+o),"="===t&&(y.__loadedData.achievementProgress[e]=o),">"===t&&y.__loadedData.achievementProgress[e]<o&&(y.__loadedData.achievementProgress[e]=o),y.__loadedData.achievementProgress[e]>=_&&!n&&y.__loadedData.unlockedAchievements++,f(y.__loadedData,"all"),y.__loadedData.achievementProgress[e]>=_&&!n&&v()},Se.prototype.__claimAchievement=e=>{const t=Object.keys(y.__achievements),o=y.__loadedData.achievements[e],i=y.__achievements[t[e]].tiers[o];return y.__loadedData.achievementProgress[e]>=i&&(y.__loadedData.achievements[e]++,y.__loadedData.gacha+=1,f(y.__loadedData,"all"),v(),PokiSDK.happyTime(.5),!0)},Se.prototype.getRandomHat=function(){if(null==this.__hatPercentages){this.__hatPercentages=[];const e=150;for(let t=0;t<y.__hatUnlockAmmount.length;t++){const o=e-y.__hatUnlockAmmount[t];for(let e=0;e<o;e+=5)this.__hatPercentages.push(t)}}return window._eV&&Math.random()<.2?window._eV.h:this.__hatPercentages[Math.floor(Math.random()*this.__hatPercentages.length)]},Se.prototype.aiManager=function(){const e=Math.round(y.__maxClients*y.__fillAIThreshold);if(this.clients.length<e){var t=new ke(this);return t.tinyId=this.getTinyID(),t.isAI=!0,t.__player=this.players[t.tinyId],t.__player.__client=t,t.__player.__name=t.__name,this.clients.push(t),t.__player.__hat=-1,Math.random()<.3&&(t.__player.__hat=this.getRandomHat()),this.__addPlayer(t.__player),Math.random()<.5&&(t.doDumb=!0),t.__player}};const ft=()=>{const e=1/Te.__scene.camera.zoom.x;for(let t=0;t<Je.length;t++){const o=Je[t];if((null===o.__target.l||o.__target.__eaten||o.__target.__snake&&!Ee[0].__alive)&&o.__indicator){o.__indicator.remove(),o.__object.remove(),o.__object2&&(o.__object2.remove(),o.__object3.remove()),Je.splice(t,1),t--;continue}if(!o.__indicator){let e=Te.__scene.layer(y.__layerIndicators);o.__indicator=new Te.__spriteClass(Te.__frames.__Indicator0000),o.__indicator.tint=16773349,o.__indicator.anchor.set(.5,.5),e.add(o.__indicator),o.__target.__gacha?(e=Te.__scene.layer(y.__layerIndicatorsObject),o.__object=new Te.__spriteClass(Te.__frames.__Gacha0000),o.__object.anchor.set(.5,.5),e.add(o.__object)):o.__target.__snake&&(e=Te.__scene.layer(y.__layerIndicatorsObject),o.__object=new Te.__spriteClass(Te.__frames.__KawaiiSnake_Eye0000),o.__object.anchor.set(1.8,.6),e.add(o.__object),o.__object2=new Te.__spriteClass(Te.__frames.__KawaiiSnake_Eye0000),o.__object2.anchor.set(-.8,.6),e.add(o.__object2),o.__object3=new Te.__spriteClass(Te.__frames.__KawaiiSnake_Mouth0000),o.__object3.anchor.set(.5,-.8),e.add(o.__object3),o.__indicator.tint=1===o.__target.__snake?16758197:8820940)}const i=Te.__scene.camera.at.x+He.width/2,a=Te.__scene.camera.at.y+He.height/2,_=He.width/2/Te.__scene.camera.zoom.x;let n=Math.min(Math.max(i-o.__target.position.x,-_),_);const s=He.height/2/Te.__scene.camera.zoom.y;let r=Math.min(Math.max(a-o.__target.position.y,-s),s);const l=-60,d=Math.atan2(r,n),c=i-(n+=l*Math.cos(d)),h=a-(r+=l*Math.sin(d));o.__indicator.scale.x=e,o.__indicator.scale.y=e,o.__indicator.rotation=d+Math.PI,o.__object.scale.x=.2*e,o.__object.scale.y=.2*e,o.__indicator.position.set(c,h),o.__object.position.set(c,h),o.__object2&&(o.__object2.scale.x=.2*e,o.__object2.scale.y=.2*e,o.__object2.position.set(c,h),o.__object3.scale.x=.2*e,o.__object3.scale.y=.2*e,o.__object3.position.set(c,h),o.__indicator.rotation=Ee[o.__target.__snake-1].__dir)}},gt=(e,t,o,i)=>{const a=document.createElement("div");return a.setAttribute("id",e),a.setAttribute("class",t),a.style.width="".concat(o,"px"),a.style.height="".concat(i,"px"),a.style.backgroundColor="#FFF0E5",a.style.position="absolute",a.style.borderRadius="10px",a.style.boxShadow="0 0 0 1px #382C2A, 0 0 0 2px #382C2A, 0 0 2px #666 inset, 0 0 4px #666 inset",a},vt=(e,t,o,i)=>"<circle cx=".concat(e+i/2," cy=").concat(e+i/2,' r="').concat(e,'" stroke="').concat(o,'" stroke-width="').concat(i,'" fill="').concat(t,'" />'),xt=()=>{const e=document.getElementById("cls");e&&e.parentNode.removeChild(e);const t=document.createElement("div");t.setAttribute("id","cls"),t.classList.add("ab"),Le.appendChild(t);document.createElement("img");const o=qe.length<5?qe.length+1:5;for(let e=0;e<o;e++){const o=qe[e]||"#FFF0E5",i=document.createElement("div"),a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.innerHTML=vt(20,o,"#382C2A",2),a.style.width=a.style.height="".concat(42,"px"),a.classList.add("bu"),i.appendChild(a),t.appendChild(i),a.addEventListener("click",()=>{D("click");var o=document.getElementById("clsH");if(e==qe.length)qe.push(qe[e-1]),xt();else if(!(o=document.getElementById("clsH"))||1!=a.style.opacity){for(let e of t.children)e.style.opacity=.3;return a.style.opacity=1,a.style.pointerEvents="all",void St(e)}if(o){for(let e of t.children)e.style.opacity=1;o.parentNode.removeChild(o)}}),qe.length<5&&e==qe.length&&i.classList.add("ic","bu")}f(qe,"colors")},St=e=>{const t=document.getElementById("clsH");t&&t.parentNode.removeChild(t);const o=document.createElement("div");o.setAttribute("id","clsH"),o.classList.add("ab"),Le.appendChild(o);const i=e>0?7:6;for(var a=0;a<i;a++){const t=document.createElement("div"),i=document.createElementNS("http://www.w3.org/2000/svg","svg");let _=Te.__randomColor().replace("0x","#");a>4?_="#FFF0E5":i.addEventListener("click",()=>{D("click"),qe[e]=_,o&&o.parentNode.removeChild(o),xt()}),i.innerHTML=vt(20,_,"#382C2A",2),i.style.width=i.style.height="".concat(42,"px"),i.classList.add("bu"),t.appendChild(i),o.appendChild(t),5==a?(i.addEventListener("click",()=>{D("click"),St(e)}),t.classList.add("ic","rf","bu")):6==a&&(i.addEventListener("click",()=>{D("click"),qe.splice(e,1),o&&o.parentNode.removeChild(o),xt()}),t.classList.add("ic","cl","bu"))}},wt=()=>{const e=[];[33,35,36].forEach(t=>{(null==y.__loadedData.hats[t]||y.__loadedData.hats[t]<y.__hatUnlockAmmount[t])&&e.push(t)});const t=e[Math.floor(Math.random(e.length))],o=Le.querySelector("#rh");if(0===e.length||window.__adsBlocked)return void(o.style.display="none");const i=o.querySelector(".uhi");i.classList.add("ab");const a=ut[t];i.style.background="url(".concat(window._xhrS,") ").concat(-Math.round(a.__position.x),"px ").concat(-Math.round(a.__position.y),"px"),i.style.width="".concat(a.__size.x,"px"),i.style.height="".concat(a.__size.y,"px"),i.style.transform="translate(-50%, -50%) scale(".concat(.6,", ").concat(.6,")"),o.onclick=()=>{window.__adsBlocked||(C(),D("click"),y.__playingAd=!0,PokiSDK.rewardedBreak().then(e=>{e&&(Q(t,9999999),window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(30),Ne.spawnParticles(50,window.innerWidth/2-75,.75*window.innerHeight,{minXSpeed:-2e3,maxXSpeed:2e3,minYSpeed:-2e3,maxYSpeed:2e3,yAccel:4e3,moveRotate:!1}),setTimeout(()=>{D("achievement")},50)),D("main",y.__songVolume),y.__playingAd=!1,o.style.display="none"}))}},bt=()=>{const e=document.getElementById("sh");e.style.display="flex";const t=document.getElementById("ht");t.classList.add("rl","bu");const o=e.querySelector(".bk");o.classList.add("ab","ic","cl","bu"),o.style.top="90%",t.addEventListener("click",()=>{D("click"),_t(e,"shop"),y.__loadedData.unlockedHats=0,f(y.__loadedData.unlockedHats,"unlockedHats")}),g.push({el:t,n:"shop"}),o.addEventListener("click",()=>{D("click"),_t(Ve.el,Ve.name)});for(let e=0;e<ut.length-1;e++){const o=document.createElement("div");o.classList.add("it"),Oe.appendChild(o);let i=1;y.__hatIsEars[e]&&(i=2);for(let a=0;a<i;a++){const _=.8,n=document.createElement("div"),s=ut[e];if(n.style.background="url(".concat(window._xhrS,") ").concat(-Math.round(s.__position.x),"px ").concat(-Math.round(s.__position.y),"px"),n.style.width="".concat(s.__size.x,"px"),n.style.height="".concat(s.__size.y,"px"),n.style.transform="scale(".concat(_,", ").concat(_,")"),n.classList.add("ht"),0==e&&0==a){const e=n.cloneNode();e.style.transform="scale(0.3) translate(-100%, -50%)",e.style.position="absolute",e.style.top=e.style.left=0,t.appendChild(e)}2==i&&(n.style.margin="5px"),1==a&&(n.style.transform="scale(".concat(-_,", ").concat(_,")")),n.style.marginBottom="40px",o.appendChild(n)}}Pt()};let kt;const Pt=()=>{kt||(kt=document.querySelector("#gr"));for(let e=0;e<ut.length-1;e++){const t=kt.children[e],o=null==y.__loadedData.hats[e]||y.__loadedData.hats[e]<y.__hatUnlockAmmount[e];t.querySelectorAll(".ht").forEach(e=>{e.style.filter=o?"brightness(0)":""});let i=t.querySelector(".ab");if(i&&i.parentNode.removeChild(i),i=document.createElement("div"),t.appendChild(i),o){if(i.innerText="".concat(y.__loadedData.hats[e]||"0","/").concat(y.__hatUnlockAmmount[e]),e>=21&&e<=32&&(!window._eV||window._eV.h!==e))i.innerText="???";else if(e>=21&&e<=32&&!t.querySelector("#dl")){const e=document.createElement("span"),o=window._eV.e-(new Date).getDate()+1;e.innerText="".concat(o," day").concat(o>1?"s":""," left"),e.setAttribute("id","dl"),e.style="\n                position: absolute;\n                color: white;\n                top: 60%;\n                ",t.appendChild(e)}i.classList.add("ab","lo"),t.style.backgroundColor="#5d5b5b"}else{i.classList.add("ab","ic","bu"),i.style.transform="translate(-50%, 80%)",Ye==e&&(t.classList.add("ac"),i.classList.add("cl"));const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.innerHTML=vt(20,"#FFF0E5","#382C2A",2),o.style.width=o.style.height="".concat(42,"px"),i.appendChild(o),i.addEventListener("click",()=>{D("click");const o=Oe.querySelector(".it .cl");o&&(o.classList.remove("cl"),o.parentNode.classList.remove("ac")),o===i?Ye=-1:(t.classList.add("ac"),i.classList.add("cl"),Ye=e),y.__loadedData.hat=Ye,f(y.__loadedData.hat,"hat")}),t.style.backgroundColor=""}t.appendChild(i)}},Mt=()=>{const e='<defs><style>.cls-2{opacity:.4}.cls-4{opacity:.2}</style></defs><path fill="#4d4d4d" d="M17.85 27.65h-1.51v-4.92h-4.87v-5.29l6.02 3.17-1.28-7.46 5.41-5.28-7.47-1.08L10.81 0 7.47 6.79 0 7.87l5.41 5.28-1.28 7.46 5.97-3.14v5.26H5.26v4.92H3.77v1.82H2.26v1.81h17.1v-1.81h-1.51v-1.82z" id="bg"/><g id="shade"><path class="cls-2" d="M10.83 17.05l-.71.38v5.25h1.38V17.4l-.67-.35z"/><path opacity=".1" d="M3.8 27.58h14.09v1.81H3.8z"/><path class="cls-4" d="M2.3 29.39h17.1v1.81H2.3z"/><path class="cls-2" d="M5.3 22.68h11.08v4.91H5.3z"/><path class="cls-4" d="M10.85 11.37v-.01.01zM10.85 0L7.51 6.77l3.34 4.59V0zM10.85 11.37z"/><path class="cls-2" d="M10.85 11.37l3.34-4.6L10.85 0v11.37z"/><path class="cls-4" d="M10.85 11.38v-.01.01zM21.66 7.85l-7.47-1.08-3.34 4.6 10.81-3.52z"/><path class="cls-2" d="M16.25 13.12l5.41-5.27-10.81 3.52 5.4 1.75z"/><path class="cls-4" d="M10.85 11.38v5.67l6.68 3.51-6.68-9.19v.01z"/><path class="cls-2" d="M10.85 11.37l6.68 9.19-1.28-7.44-5.4-1.75zM4.17 20.56l6.68-3.51v-5.67l-6.68 9.18z"/><path class="cls-4" d="M10.85 11.37l-5.41 1.75-1.27 7.44 6.68-9.18v-.01z"/><path class="cls-2" d="M10.85 11.37L.04 7.85l5.4 5.27 5.41-1.75z"/></g>',t=document.getElementById("as");t.style.display="flex";const o=t.querySelector(".bk");o.classList.add("ab","ic","cl","bu"),o.style.top="90%";const i=document.createElement("div");i.classList.add("asl"),t.appendChild(i);const a=Object.keys(y.__achievements),_=document.getElementById("ac");_.classList.add("rl","bu"),g.push({el:_,n:"achievements"});const n=document.createElementNS("http://www.w3.org/2000/svg","svg");let s;n.setAttribute("viewBox","0 0 32 32"),n.innerHTML=e,_.appendChild(n),n.style="\n        position:absolute;\n        top: 6px;\n        left: 12px;\n        height: 27px;\n    ";for(let t=0;t<a.length;t++){const o=document.createElement("div");o.classList.add("asi"),i.appendChild(o);const _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttribute("viewBox","0 0 32 32"),_.innerHTML=e,o.appendChild(_),_.style.width=_.style.height="20px",_.classList.add("med");const n=document.createElement("span");n.classList.add("tit"),n.style.width="150px",o.appendChild(n);const r=document.createElement("span");r.classList.add("cur"),r.style.width="80px",o.appendChild(r);const l=$();l.querySelector("svg").style.opacity=0,l.style.height="42px",l.style.marginLeft="-20px",o.appendChild(l);const d=document.createElement("span");d.innerText="+1",d.classList.add("nt"),d.style.top=d.style.left="50%",d.style.background="#c3e5ca",l.appendChild(d),s=()=>{for(let e=0;e<a.length;e++){const t=y.__achievements[a[e]],o=i.children[e],_=y.__loadedData.achievements[e],n=t.tiers[Math.min(_,2)],s=y.__loadedData.achievementProgress[e],r=o.querySelector(".tit");r.innerText=t.body,r.innerText=r.innerText.replace("$",n);const l=o.querySelector(".med").querySelector("#bg");1==_?(l.style.fill="#de7b15",o.style.backgroundColor="#ffdbd0"):2==_?(l.style.fill="#cccccc",o.style.backgroundColor="#e2e2e2"):3==_&&(l.style.fill="#f3d500",o.style.backgroundColor="#ffefc1");const d=o.querySelector(".cur");d.innerText=_<3?"".concat(s," / ").concat(n):"";const c=o.querySelector(".bu");s<n||3==_?(o.style.color="#382C2A",o.classList.remove("clm"),c.style.opacity=0):(o.classList.add("clm"),c.style.opacity=1,o.style.color="rgb(100, 154, 104)")}},o.onclick=e=>{Te.__claimAchievement(t)&&(Ne.spawnParticles(100,e.clientX,e.clientY,{minXSpeed:-2e3,maxXSpeed:2e3,minYSpeed:-2e3,maxYSpeed:2e3,yAccel:4e3,moveRotate:!1}),D("achievement")),s()}}o.addEventListener("click",()=>{D("click"),_t(Ve.el,Ve.name)}),_.addEventListener("click",()=>{D("click"),_t(t,"achievements"),s(),y.__loadedData.unlockedAchievements=0,f(y.__loadedData.unlockedAchievements,"unlockedAchievements")})},Ft=()=>{try{return window.self!==window.top||window.location.host.indexOf("localhost:")>=0}catch(e){return!0}},Ct=e=>{e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()};(()=>{Se.prototype.__scene=c(He),Se.prototype.__scene.background(195/255,229/255,202/255,0),Se.prototype.__playSound=(e,t,o=0)=>{D(e,t,o)},(Te=new Se).__update((new Date).getTime()),Te.__spriteClass=Ce,Te.__localPlayers=1,pt(),(()=>{ht(),Ft()&&dt();const e=()=>{re(),Xe=!0,dt(),window.__adsBlocked=!0,$e.style.display="flex",ct()};document.monetization&&("started"===document.monetization.state?e():document.monetization.addEventListener("monetizationstart",()=>{e()})),Xe=!1})(),at(Be),it(Le),it(Re),yt(),lt();const e=document.getElementById("sp");e.parentNode.removeChild(e),y.__loadedData=(()=>{const e=new Date,t={colors:[],name:"Snake"+Math.round(1e4*Math.random()),hats:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],achievements:[0,0,0,0,0,0,0,0,0,0],achievementProgress:[0,0,0,0,0,0,0,0,0,0],hat:-1,server:"",date:"".concat(e.getMonth(),"_").concat(e.getDay()),gacha:3,unlockedAchievements:0,unlockedHats:0,gachaRolls:0,audio:1,shownNews:0};let o,i=t;try{o=localStorage.getItem(y.__saveName)}catch(e){}return o?i=JSON.parse(window.atob(o)):f(t,"all"),i})(),(()=>{let e=new Date(1600110103954);if(e.setDate(e.getDate()+14),!u&&Date.now()<e.getTime()&&(!y.__loadedData.shownNews||y.__loadedData.shownNews<1600110103954)){const e=document.createElement("div");e.style.backgroundImage="url(./assets/n1.png)",e.style.width="340px",e.style.height="240px",e.style.zIndex=99,e.style.borderRadius="20px",e.style.border="2px solid #382C2A",e.style.transition="top 500ms ease-in",e.classList.add("ab"),document.body.appendChild(e),setTimeout(()=>{e.style.top="2000px"},4e3),y.__loadedData.shownNews=Date.now()}})();const t=new Date,o="".concat(t.getMonth(),"_").concat(t.getDay());o!=y.__loadedData.date&&(y.__loadedData.date=o,Te.__doAchievement(3,"+",1)),f(y.__loadedData,"all"),0==y.__loadedData.colors.length&&y.__loadedData.colors.push(Te.__randomColor().replace("0x","#")),qe=y.__loadedData.colors,Ye=y.__loadedData.hat,Ge.value=y.__loadedData.name,Te.__ctx.font="24px Mali, sans-serif",Te.__ctx.textAlign="center";const i=document.createElement("img");i.src="./assets/su.png",i.classList.add("ab","bu"),i.setAttribute("id","pl"),i.setAttribute("tabindex",2),Le.appendChild(i);const a=document.createElement("img");a.src="./assets/s2.png?v=1",a.classList.add("ab","bu"),a.setAttribute("id","pl2"),u||(a.setAttribute("tabindex",3),Le.appendChild(a));const _=document.createElement("img");_.src="./assets/su.png",_.classList.add("ab","bu"),_.setAttribute("id","ppl"),Be.appendChild(_),_.style.pointerEvents="all";const n=document.createElement("img");n.src="./assets/rv.png",n.classList.add("bu"),n.setAttribute("id","rv"),n.setAttribute("tabindex",2),Re.appendChild(n);const s=document.createElement("img");s.src="./assets/rs.png",s.classList.add("bu"),s.setAttribute("id","rs"),s.setAttribute("tabindex",1),Re.appendChild(s);const r=document.createElement("div"),l=document.createElement("div");l.style.background="url(./assets/rh.png)",l.style.backgroundPositionY="center",l.style.width="106px",l.style.height="122px",l.style.transform="translate(-14px, -8px) scale(.8)",l.classList.add("bg"),r.appendChild(l);const d=document.createElement("div");r.appendChild(d),d.classList.add("uhi"),r.classList.add("bu"),r.setAttribute("id","rh"),r.setAttribute("tabindex",3),Le.appendChild(r),Ke=gt("ipBG","ab",150,40),Le.appendChild(Ke);const h=()=>{Ge.value=Te.__verifyUserName(Ge.value);let e=20;[...Ge.value].forEach(t=>{e+="W"==t?20:"I"==t||"1"==t?10:14}),Ke.style.width="".concat(Math.max(e,1),"px"),Ge.value.length<3?(i.style.opacity=.5,i.style.pointerEvents="none",a.style.opacity=.5,a.style.pointerEvents="none"):(i.style.opacity=1,i.style.pointerEvents="all",a.style.opacity=1,a.style.pointerEvents="all")};h(),Ge.addEventListener("input",h),Ge.addEventListener("focus",()=>{Ge.select()}),Ge.addEventListener("keydown",e=>{13!=e.keyCode&&"Enter"!=e.key||Ge.blur()}),Le.querySelector("#pl").addEventListener("mousedown",()=>{Te.__localPlayers=1,nt()}),u||Le.querySelector("#pl2").addEventListener("mousedown",()=>{Te.__localPlayers=2,nt()}),Re.querySelector("#rs").addEventListener("mousedown",()=>{tt=!1,st()}),Re.querySelector("#rv").addEventListener("mousedown",()=>{tt||(window.__adsBlocked||(C(),y.__playingAd=!0,PokiSDK.rewardedBreak().then(e=>{e&&(Ee.forEach(e=>{const t=e.__foodsEaten;Te.__addPlayer(e,e.__colors),e.__foodsEaten=t,e.__doGrowth(),e.__mainSnake=!0}),it(Re),D("game",y.__songVolume),tt=!0),y.__playingAd=!1})),D("click"))}),_.addEventListener("mousedown",()=>{const e=()=>{re(),it(Be),at(Le),y.__playingAd=!1,D("main",y.__songVolume),Ft()||Ct(document.body)};window.__adsBlocked?e():(C(),y.__playingAd=!0,PokiSDK.commercialBreak().then(()=>{e()}))}),ne(Be,"preroll"),xt(),bt(),wt(),Mt(),((e,t)=>{G=t,N=e,I=document.createElement("div"),document.body.appendChild(I),I.style.position="absolute",I.style.top=I.style.left="0",I.style.width=I.style.height="100%",I.style.display="flex",I.style.justifyContent="center",I.style.alignItems="center",I.style.zIndex=5;const o=document.createElement("div");if(o.style="\n    width: 120px;\n    height: 120px;\n    background-color: white;\n    margin: 40px;\n    border-radius: 30px;\n    border: 2px solid black;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    box-shadow:0px 0px 50px 50px #FFF0E5;\n    ",z=document.createElement("div"),o.appendChild(z),(B=document.createElement("span")).innerText="5",B.style.fontSize="30px",B.style.color="black",o.appendChild(B),(V=document.createElement("img")).src="./assets/r2.png",V.style="\n    width: 50px;\n    left: 50%;\n    margin-left: 50px;\n    animation: 2s linear 0s infinite normal none running slowshake;\n    pointer-events: all;\n    ",V.onclick=e=>{e.stopImmediatePropagation(),C(),D("click"),PokiSDK.rewardedBreak().then(e=>{e&&(V.style.visibility="hidden",B.innerText="+".concat(2*W),Q(q,W),window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(30),j(),setTimeout(()=>{D("achievement")},50)),D("main",y.__songVolume)})},V.classList.add("bu"),o.appendChild(V),K=document.createElement("span"),window._eV){const e=window._eV.e-(new Date).getDate()+1;K.innerText="".concat(e," day").concat(e>1?"s":""," left")}K.style="\n        position: absolute;\n        margin-top: 102px;\n        color: black;\n        font-size: 12px;\n    ",o.appendChild(K),I.appendChild(o),I.onclick=()=>{Y&&(J(),Y=!1,X(),v())},L=document.createElement("div"),I.appendChild(L),L.style.position="absolute",L.style.width=L.style.height="200px",L.style.animation="slowshake 2s linear infinite",L.style.cursor="pointer";const i="\n    position:absolute;\n    width:100%;\n    height:100%;\n    ";(R=document.createElement("div")).setAttribute("viewBox","0 0 100 100"),R.style=i,R.style.background="url(./assets/bl_u.svg)",R.style.backgroundRepeat="no-repeat",L.appendChild(R),(O=document.createElement("div")).setAttribute("viewBox","0 0 100 100"),O.style=i,O.style.marginTop="94px",O.style.background="url(./assets/bl_d.svg)",O.style.backgroundRepeat="no-repeat",L.appendChild(O),X(),L.onclick=()=>{U||Y||(y.__loadedData.gacha<=0?J():(D("opengacha",1),y.__loadedData.gacha--,y.__loadedData.gachaRolls++,f(y.__loadedData,"all"),window.navigator&&window.navigator.vibrate&&window.navigator.vibrate([50,80,50,40,50,70,50,30,50,80,50,40,50,70,50,30,400]),v(),U=!0,R.classList.add("open"),O.classList.add("open-i"),L.style.animation="hardshake 2s linear infinite",setTimeout(()=>{j(),Y=!0,U=!1,Q(q,W),window.__adsBlocked||(V.style.visibility="visible"),L.style.pointerEvents="none"},1200)))}})(Te,ut),(e=>{j=e})(()=>{Ne.spawnParticles(100,window.innerWidth/2,window.innerHeight/2,{minXSpeed:-2e3,maxXSpeed:2e3,minYSpeed:-2e3,maxYSpeed:2e3,yAccel:4e3,moveRotate:!1})});const p=$();document.querySelector("#bl").appendChild(p),p.onclick=()=>{const e=e=>{y.__playingAd=!1,e&&D("main",y.__songVolume),I.style.display="flex"};0!=y.__loadedData.gacha||window.__adsBlocked?e(!1):(C(),y.__playingAd=!0,PokiSDK.rewardedBreak().then(t=>{t&&(y.__loadedData.gacha++,f(y.__loadedData.gacha,"gacha"),v()),e(!0)})),D("click")},g.push({el:p,n:"gacha"}),v(),y.__loadedData.audio||(oe.checked=!1),oe.addEventListener("change",()=>{y.__loadedData.audio=oe.checked,f(y.__loadedData.audio,"audio"),y.__loadedData.audio?(D("click"),H()):C()}),te.addEventListener("click",()=>{clearTimeout(ie),ee.classList.contains("cl")?(ee.classList.remove("cl"),ie=setTimeout(ae,5e3)):ee.classList.add("cl")})})()}();
