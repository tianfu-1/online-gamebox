var Elements,Utils;!function(t){var e=function(){function t(t,e,a,i,s,h){void 0===h&&(h=!0),this.oAssetData={},this.assetsLoaded=0,this.textData={},this.spinnerRot=0,this.totalAssets=e.length,this.showBar=h;for(var o=0;o<e.length;o++)-1!=e[o].file.indexOf(".json")?this.loadJSON(e[o]):this.loadImage(e[o]);h&&(this.oLoaderImgData=preAssetLib.getData("loader"),this.oLoadSpinnerImgData=preAssetLib.getData("loadSpinner"))}return t.prototype.render=function(){ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#FFFFFF",ctx.fillRect(canvas.width/2-150,canvas.height/2+20,300/this.totalAssets*this.assetsLoaded,30),ctx.drawImage(this.oLoaderImgData.img,canvas.width/2-this.oLoaderImgData.img.width/2,canvas.height/2-this.oLoaderImgData.img.height/2),this.spinnerRot+=3*delta,ctx.save(),ctx.translate(canvas.width/2-30,canvas.height/2-16),ctx.rotate(this.spinnerRot),ctx.drawImage(this.oLoadSpinnerImgData.img,-this.oLoadSpinnerImgData.img.width/2,-this.oLoadSpinnerImgData.img.height/2),ctx.restore(),this.displayNumbers()},t.prototype.displayNumbers=function(){ctx.textAlign="left",ctx.font="bold 40px arial",ctx.fillStyle="#ffffff",ctx.fillText(Math.round(this.assetsLoaded/this.totalAssets*100)+"%",canvas.width/2+0,canvas.height/2-1)},t.prototype.loadExtraAssets=function(t,e){this.showBar=!1,this.totalAssets=e.length,this.assetsLoaded=0,this.loadedCallback=t;for(var a=0;a<e.length;a++)-1!=e[a].file.indexOf(".json")?this.loadJSON(e[a]):this.loadImage(e[a])},t.prototype.loadJSON=function(t){var e=this,a=new XMLHttpRequest;a.open("GET",t.file,!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(e.textData[t.id]=JSON.parse(a.responseText),++e.assetsLoaded,e.checkLoadComplete())},a.send(null)},t.prototype.loadImage=function(t){var e=this,a=new Image;a.onload=function(){e.oAssetData[t.id]={},e.oAssetData[t.id].img=a,e.oAssetData[t.id].oData={};var i=e.getSpriteSize(t.file);0!=i[0]?(e.oAssetData[t.id].oData.spriteWidth=i[0],e.oAssetData[t.id].oData.spriteHeight=i[1]):(e.oAssetData[t.id].oData.spriteWidth=e.oAssetData[t.id].img.width,e.oAssetData[t.id].oData.spriteHeight=e.oAssetData[t.id].img.height),t.oAnims&&(e.oAssetData[t.id].oData.oAnims=t.oAnims),t.oAtlasData?e.oAssetData[t.id].oData.oAtlasData=t.oAtlasData:e.oAssetData[t.id].oData.oAtlasData={none:{x:0,y:0,width:e.oAssetData[t.id].oData.spriteWidth,height:e.oAssetData[t.id].oData.spriteHeight}},++e.assetsLoaded,e.checkLoadComplete()},a.src=t.file},t.prototype.getSpriteSize=function(t){for(var e=new Array,a="",i="",s=0,h=t.lastIndexOf("."),o=!0;o;)h--,0==s&&this.isNumber(t.charAt(h))?a=t.charAt(h)+a:0==s&&a.length>0&&"x"==t.charAt(h)?(h--,s=1,i=t.charAt(h)+i):1==s&&this.isNumber(t.charAt(h))?i=t.charAt(h)+i:1==s&&i.length>0&&"_"==t.charAt(h)?(o=!1,e=[parseInt(i),parseInt(a)]):(o=!1,e=[0,0]);return e},t.prototype.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.prototype.checkLoadComplete=function(){this.assetsLoaded==this.totalAssets&&this.loadedCallback()},t.prototype.onReady=function(t){this.loadedCallback=t},t.prototype.getImg=function(t){return this.oAssetData[t].img},t.prototype.getData=function(t){return this.oAssetData[t]},t}();t.AssetLoader=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e,a,i,s){void 0===s&&(s=!0),this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.frameInc=0,this.animType="loop",this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.frameBuffer=0,this.oImgData=t,this.oAnims=this.oImgData.oData.oAnims,this.fps=e,this.radius=a,this.animId=i,this.frameBuffer=s?2:0,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2)}return t.prototype.updateAnimation=function(){this.frameInc+=this.fps*delta},t.prototype.changeImgData=function(t,e){this.oImgData=t,this.oAnims=this.oImgData.oData.oAnims,this.animId=e,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2),this.resetAnim()},t.prototype.resetAnim=function(){this.frameInc=0},t.prototype.setFrame=function(t){this.fixedFrame=t},t.prototype.setAnimType=function(t,e,a){switch(void 0===a&&(a=!0),this.animId=e,this.animType=t,a&&this.resetAnim(),t){case"loop":break;case"once":this.maxIdx=this.oAnims[this.animId].length-1}},t.prototype.render=function(){if(ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.rotation),ctx.scale(this.scaleX,this.scaleY),ctx.globalAlpha=this.alpha,null!=this.animId){var t=this.oAnims[this.animId].length,e=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][e%t];var a=this.curFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,i=Math.floor(this.curFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;if("once"==this.animType&&e>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][t-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();a=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,i=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight}}else a=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,i=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;ctx.drawImage(this.oImgData.img,a,i,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.centreX+this.offsetX,-this.centreY+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),ctx.restore()},t.prototype.renderSimple=function(){if(null!=this.animId){var t=this.oAnims[this.animId].length,e=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][e%t];var a=this.curFrame*(this.oImgData.oData.spriteWidth+this.frameBuffer)%this.oImgData.img.width,i=Math.floor(this.curFrame/(this.oImgData.img.width/(this.oImgData.oData.spriteWidth+this.frameBuffer)))*(this.oImgData.oData.spriteHeight+this.frameBuffer);if("once"==this.animType&&e>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][t-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();a=this.fixedFrame*(this.oImgData.oData.spriteWidth+this.frameBuffer)%this.oImgData.img.width,i=Math.floor(this.fixedFrame/(this.oImgData.img.width/(this.oImgData.oData.spriteWidth+this.frameBuffer)))*(this.oImgData.oData.spriteHeight+this.frameBuffer)}}else a=this.fixedFrame*(this.oImgData.oData.spriteWidth+this.frameBuffer)%this.oImgData.img.width,i=Math.floor(this.fixedFrame/(this.oImgData.img.width/(this.oImgData.oData.spriteWidth+this.frameBuffer)))*(this.oImgData.oData.spriteHeight+this.frameBuffer);ctx.drawImage(this.oImgData.img,a,i,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,this.x-(this.centreX-this.offsetX)*this.scaleX,this.y-(this.centreY-this.offsetY)*this.scaleY,this.oImgData.oData.spriteWidth*this.scaleX,this.oImgData.oData.spriteHeight*this.scaleY)},t}();t.AnimSprite=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e,a){void 0===a&&(a=0),this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.oImgData=t,this.radius=e,this.setFrame(a)}return t.prototype.setFrame=function(t){this.frameNum=t},t.prototype.render=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY);var e=this.frameNum*this.oImgData.oData.spriteWidth%this.oImgData.img.width,a=Math.floor(this.frameNum/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;t.drawImage(this.oImgData.img,e,a,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.oImgData.oData.spriteWidth/2+this.offsetX,-this.oImgData.oData.spriteHeight/2+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),t.restore()},t}();t.BasicSprite=e}(Utils||(Utils={})),function(t){var e=function(){function t(t,e){var a=this;this.prevHitTime=0,this.pauseIsOn=!1,this.isDown=!1,this.mouseX=-100,this.mouseY=-100,this.isBugBrowser=e,this.keyDownEvtFunc=function(t){a.keyDown(t)},this.keyUpEvtFunc=function(t){a.keyUp(t)},t.addEventListener("contextmenu",(function(t){return t.preventDefault()})),t.addEventListener("touchstart",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitDown(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchend",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitUp(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchcancel",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.hitCancel(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier)}),!1),t.addEventListener("touchmove",(function(t){for(var e=0;e<t.changedTouches.length;e++)a.move(t,t.changedTouches[e].pageX,t.changedTouches[e].pageY,t.changedTouches[e].identifier,!0)}),!1),t.addEventListener("wheel",(function(t){a.wheelScroll(t,t.deltaY)}),!1),t.addEventListener("mousedown",(function(t){a.isDown=!0,a.hitDown(t,t.pageX,t.pageY,1)}),!1),t.addEventListener("mouseup",(function(t){a.isDown=!1,a.hitUp(t,t.pageX,t.pageY,1)}),!1),t.addEventListener("mousemove",(function(t){a.move(t,t.pageX,t.pageY,1,a.isDown)}),!1),t.addEventListener("mouseout",(function(t){2!=t.button&&(clearButtonOvers(),a.isDown=!1,a.hitCancel(t,Math.abs(t.pageX),Math.abs(t.pageY),1))}),!1),this.aHitAreas=new Array,this.aKeys=new Array}return t.prototype.wheelScroll=function(t,e){t.preventDefault(),t.stopPropagation(),"game"==gameState&&(tools.posY-=e,tools.posX-=e)},t.prototype.hitDown=function(t,e,a,i){if(t.preventDefault(),t.stopPropagation(),hasFocus||visibleResume(),!this.pauseIsOn){var s=(new Date).getTime();e*=canvasScale,a*=canvasScale;for(var h=0;h<this.aHitAreas.length;h++)if(this.aHitAreas[h].rect){var o=canvas.width*this.aHitAreas[h].align[0],d=canvas.height*this.aHitAreas[h].align[1];if(e>o+this.aHitAreas[h].area[0]&&a>d+this.aHitAreas[h].area[1]&&e<o+this.aHitAreas[h].area[2]&&a<d+this.aHitAreas[h].area[3]){if(this.aHitAreas[h].aTouchIdentifiers.push(i),this.aHitAreas[h].oData.hasLeft=!1,this.aHitAreas[h].oData.isUp=!1,testVar="-"+this.aHitAreas[h].oData.isDown,!this.aHitAreas[h].oData.isDown){if(this.aHitAreas[h].oData.isDown=!0,this.aHitAreas[h].oData.x=e,this.aHitAreas[h].oData.y=a,this.aHitAreas[h].oData.button=t.button,s-this.prevHitTime<500&&("game"!=gameState||"pause"==this.aHitAreas[h].id)&&isBugBrowser)return;this.aHitAreas[h].callback(this.aHitAreas[h].id,this.aHitAreas[h].oData)}break}}this.prevHitTime=s}},t.prototype.hitUp=function(t,e,a,i){if(ios9FirstTouch||(playSound("silence"),ios9FirstTouch=!0),!this.pauseIsOn){isMobile&&(this.mouseX=canvas.width,this.mouseY=canvas.height/2),1==touchArea&&(2==tools.tintState&&(tools.tintState=1),head.stopTouch(),touchArea=0),"game"==gameState&&(updateGameButs(),updateGameTouch()),t.preventDefault(),t.stopPropagation(),e*=canvasScale,a*=canvasScale;for(var s=0;s<this.aHitAreas.length;s++)if(this.aHitAreas[s].rect){var h=canvas.width*this.aHitAreas[s].align[0],o=canvas.height*this.aHitAreas[s].align[1];if(e>h+this.aHitAreas[s].area[0]&&a>o+this.aHitAreas[s].area[1]&&e<h+this.aHitAreas[s].area[2]&&a<o+this.aHitAreas[s].area[3]){for(var d=0;d<this.aHitAreas[s].aTouchIdentifiers.length;d++)this.aHitAreas[s].aTouchIdentifiers[d]==i&&(this.aHitAreas[s].aTouchIdentifiers.splice(d,1),d-=1);0==this.aHitAreas[s].aTouchIdentifiers.length&&(this.aHitAreas[s].oData.isDown=!1),this.aHitAreas[s].oData.isUp=!0,this.aHitAreas[s].oData.multiTouch&&(this.aHitAreas[s].oData.x=e,this.aHitAreas[s].oData.y=a,this.aHitAreas[s].oData.button=t.button,this.aHitAreas[s].callback(this.aHitAreas[s].id,this.aHitAreas[s].oData));break}}}},t.prototype.hitCancel=function(t,e,a,i){t.preventDefault(),t.stopPropagation(),e*=canvasScale,a*=canvasScale;for(var s=0;s<this.aHitAreas.length;s++)this.aHitAreas[s].oData.isDown&&(this.aHitAreas[s].oData.isDown=!1,this.aHitAreas[s].aTouchIdentifiers=new Array,this.aHitAreas[s].oData.multiTouch&&(this.aHitAreas[s].oData.x=e,this.aHitAreas[s].oData.y=a,this.aHitAreas[s].callback(this.aHitAreas[s].id,this.aHitAreas[s].oData)))},t.prototype.move=function(t,e,a,i,s){if(!this.pauseIsOn&&(e*=canvasScale,a*=canvasScale,this.mouseX=e,this.mouseY=a,s))for(var h=0;h<this.aHitAreas.length;h++)if(this.aHitAreas[h].rect){var o=canvas.width*this.aHitAreas[h].align[0],d=canvas.height*this.aHitAreas[h].align[1];if(e>o+this.aHitAreas[h].area[0]&&a>d+this.aHitAreas[h].area[1]&&e<o+this.aHitAreas[h].area[2]&&a<d+this.aHitAreas[h].area[3])this.aHitAreas[h].oData.hasLeft=!1,this.aHitAreas[h].oData.isDraggable&&!this.aHitAreas[h].oData.isDown&&(this.aHitAreas[h].oData.isDown=!0,this.aHitAreas[h].oData.isBeingDragged=!0,this.aHitAreas[h].oData.x=e,this.aHitAreas[h].oData.y=a,this.aHitAreas[h].aTouchIdentifiers.push(i),this.aHitAreas[h].oData.multiTouch&&this.aHitAreas[h].callback(this.aHitAreas[h].id,this.aHitAreas[h].oData)),this.aHitAreas[h].oData.isDraggable&&(this.aHitAreas[h].oData.isBeingDragged=!0,this.aHitAreas[h].oData.x=e,this.aHitAreas[h].oData.y=a,this.aHitAreas[h].callback(this.aHitAreas[h].id,this.aHitAreas[h].oData),this.aHitAreas[h]&&(this.aHitAreas[h].oData.isBeingDragged=!1));else if(this.aHitAreas[h].oData.isDown&&!this.aHitAreas[h].oData.hasLeft){for(var r=0;r<this.aHitAreas[h].aTouchIdentifiers.length;r++)this.aHitAreas[h].aTouchIdentifiers[r]==i&&(this.aHitAreas[h].aTouchIdentifiers.splice(r,1),r-=1);0==this.aHitAreas[h].aTouchIdentifiers.length&&(this.aHitAreas[h].oData.hasLeft=!0,this.aHitAreas[h].oData.isBeingDragged||(this.aHitAreas[h].oData.isDown=!1),this.aHitAreas[h].oData.multiTouch&&this.aHitAreas[h].callback(this.aHitAreas[h].id,this.aHitAreas[h].oData))}}},t.prototype.keyDown=function(t){for(var e=0;e<this.aKeys.length;e++)t.keyCode==this.aKeys[e].keyCode&&(t.preventDefault(),this.aKeys[e].oData.isDown=!0,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},t.prototype.keyUp=function(t){for(var e=0;e<this.aKeys.length;e++)t.keyCode==this.aKeys[e].keyCode&&(t.preventDefault(),this.aKeys[e].oData.isDown=!1,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},t.prototype.checkKeyFocus=function(){window.focus(),this.aKeys.length>0&&(window.removeEventListener("keydown",this.keyDownEvtFunc,!1),window.removeEventListener("keyup",this.keyUpEvtFunc,!1),window.addEventListener("keydown",this.keyDownEvtFunc,!1),window.addEventListener("keyup",this.keyUpEvtFunc,!1))},t.prototype.addKey=function(t,e,a,i){null==a&&(a=new Object),this.aKeys.push({id:t,callback:e,oData:a,keyCode:i}),this.checkKeyFocus()},t.prototype.removeKey=function(t){for(var e=0;e<this.aKeys.length;e++)this.aKeys[e].id==t&&(this.aKeys.splice(e,1),e-=1)},t.prototype.addHitArea=function(t,e,a,i,s,h){void 0===h&&(h=!1),null==a&&(a=new Object),h&&this.removeHitArea(t),s.scale||(s.scale=1),s.align||(s.align=[0,0]);var o=new Array;switch(i){case"image":var d;d=new Array(s.aPos[0]-s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]-s.oImgData.oData.oAtlasData[s.id].height/2*s.scale,s.aPos[0]+s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]+s.oImgData.oData.oAtlasData[s.id].height/2*s.scale),this.aHitAreas.push({id:t,aTouchIdentifiers:o,callback:e,oData:a,rect:!0,area:d,align:s.align});break;case"rect":this.aHitAreas.push({id:t,aTouchIdentifiers:o,callback:e,oData:a,rect:!0,area:s.aRect,align:s.align})}},t.prototype.removeHitArea=function(t){for(var e=0;e<this.aHitAreas.length;e++)this.aHitAreas[e].id==t&&(this.aHitAreas.splice(e,1),e-=1)},t.prototype.resetAll=function(){for(var t=0;t<this.aHitAreas.length;t++)this.aHitAreas[t].oData.isDown=!1,this.aHitAreas[t].oData.isBeingDragged=!1,this.aHitAreas[t].aTouchIdentifiers=new Array;this.isDown=!1},t}();t.UserInput=e}(Utils||(Utils={})),function(t){var e=function(){function t(t){this.updateFreq=10,this.updateInc=0,this.frameAverage=0,this.display=1,this.log="",this.render=function(t){this.frameAverage+=this.delta/this.updateFreq,++this.updateInc>=this.updateFreq&&(this.updateInc=0,this.display=this.frameAverage,this.frameAverage=0),t.textAlign="left",ctx.font="10px Helvetica",t.fillStyle="#333333",t.beginPath(),t.rect(0,this.canvasHeight-15,40,15),t.closePath(),t.fill(),t.fillStyle="#ffffff",t.fillText(Math.round(1e3/(1e3*this.display))+" fps "+this.log,5,this.canvasHeight-5)},this.canvasHeight=t}return t.prototype.update=function(t){this.delta=t},t}();t.FpsMeter=e}(Utils||(Utils={})),function(t){var e=function(){function t(){this.x=0,this.y=0,this.targY=0,this.incY=0,this.renderState=null}return t.prototype.render=function(){var t,e;this.oImgData=assetLib.getData("bg"+bgId),isWide()?("game"==gameState?(t=canvas.width-controlDepth,e=canvas.height-tableHeight):(t=canvas.width,e=canvas.height),t>e?ctx.drawImage(this.oImgData.img,0,.75*(1-e/t)*this.oImgData.img.height,this.oImgData.img.width,e/t*this.oImgData.img.height,0,0,t,e):ctx.drawImage(this.oImgData.img,(1-t/e)/2*this.oImgData.img.width,0,t/e*this.oImgData.img.width,this.oImgData.img.width,0,0,t,e)):("game"==gameState?(t=canvas.width,e=canvas.height-tableHeight-controlDepth):(t=canvas.width,e=canvas.height),t>e?ctx.drawImage(this.oImgData.img,0,.75*(1-e/t)*this.oImgData.img.height,this.oImgData.img.width,e/t*this.oImgData.img.height,0,0,t,e):ctx.drawImage(this.oImgData.img,(1-t/e)/2*this.oImgData.img.width,0,t/e*this.oImgData.img.width,this.oImgData.img.width,0,0,t,e))},t}();t.Background=e}(Elements||(Elements={})),function(t){var e=function(){function t(t,e){this.timer=.3,this.endTime=0,this.posY=0,this.numberSpace=17,this.incY=0,this.flareRot=0,this.tutInc=-1,this.tutScale=0,this.hintInc=0,this.oSplashLogoImgData=assetLib.getData("splashLogo"),this.oUiElementsImgData=assetLib.getData("uiElements"),this.panelType=t,this.aButs=e,this.oTopFlareImgData=assetLib.getData("flare")}return t.prototype.update=function(){this.incY+=10*delta},t.prototype.startTween1=function(){this.posY=500,TweenLite.to(this,.5,{posY:0,ease:"Back.easeOut"}),this.butsY=0},t.prototype.showGrowHint=function(){var t=this;growHintState=1,this.hinttween&&this.hinttween.kill(),this.hintInc=0,this.hinttween=TweenLite.to(this,.3,{hintInc:1,ease:"Back.easeOut",onComplete:function(){t.hinttween=TweenLite.to(t,.3,{hintInc:0,ease:"Back.easein",delay:5,onComplete:function(){growHintState=2}})}})},t.prototype.startTutTween=function(){var t=this;this.tutTween&&this.tutTween.kill(),this.tutInc=0,this.tutScale=0,this.tutTween=TweenLite.to(this,.5,{tutScale:1,ease:"Back.easeOut",delay:1,onComplete:function(){t.tutTween=TweenLite.to(t,1,{tutInc:1,ease:"Cubic.easeOut",delay:.5,onComplete:function(){t.tutTween=TweenLite.to(t,.5,{tutScale:0,ease:"Cubic.easeIn",onComplete:function(){t.startTutTween()}})}})}})},t.prototype.stopTutTween=function(){this.tutTween&&this.tutTween.kill(),this.tutInc=-1},t.prototype.switchBut=function(t,e,a,i,s){void 0===i&&(i=null),void 0===s&&(s=null);for(var h=null,o=0;o<this.aButs.length;o++)this.aButs[o].id==t&&(this.aButs[o].id=e,this.aButs[o].idOver=a,h=this.aButs[o],i&&(this.aButs[o].aPos=i),s&&(this.aButs[o].align=s));return h},t.prototype.removeBut=function(t){for(var e=0;e<this.aButs.length;e++)this.aButs[e].id==t&&(this.aButs.splice(e,1),e-=1)},t.prototype.render=function(t){switch(void 0===t&&(t=!0),t||this.addButs(ctx),this.panelType){case"splash":ctx.fillStyle="rgba(0, 0, 0, 0.35)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.drawImage(this.oSplashLogoImgData.img,canvas.width/2-this.oSplashLogoImgData.img.width/2,canvas.height/2-this.oSplashLogoImgData.img.height/2-this.posY);break;case"start":this.flareRot+=delta/3;ctx.save(),ctx.translate(canvas.width/2+this.posY,.5*canvas.height),ctx.rotate(this.flareRot),ctx.scale(1,1),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.translate(-(canvas.width/2+this.posY),-.5*canvas.height),ctx.translate(canvas.width/2+this.posY,.5*canvas.height),ctx.rotate(2*-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore();var e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].x,a=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.titleLogo].height;ctx.drawImage(this.oUiElementsImgData.img,e,a,i,s,canvas.width/2-i/2-this.posY,.25*canvas.height-s/2,i,s),addText(0,25,175,"center",canvas.width/2-this.posY,canvas.height/2+205,"producedFor","#FFFFFF");break;case"credits":ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.drawImage(this.oSplashLogoImgData.img,canvas.width/2-this.oSplashLogoImgData.img.width/2,canvas.height/2-this.oSplashLogoImgData.img.height/2-this.posY),ctx.fillStyle="#FFFFFF",ctx.textAlign="center",ctx.font="20px Helvetica",ctx.fillText("v0.1.8",canvas.width/2,canvas.height-25);break;case"gameOver":break;case"game":if(!firstHairTouch&&this.tutInc>=0&&0==tabId&&0==toolId){var h=getSpriteData(assetLib.getData("uiElements"),"finger");ctx.save(),ctx.translate(head.x-200*this.tutInc*head.scale+100*head.scale,head.y-900*head.scale+200*this.tutInc*head.scale),ctx.rotate(.5*-this.tutInc-20*radian),ctx.globalAlpha=.5*this.tutScale,ctx.drawImage(h.img,h.bX,h.bY,h.bWidth,h.bHeight,-h.bWidth/2*head.scale,0,h.bWidth*head.scale,h.bHeight*head.scale),ctx.restore()}if(this.hintInc>0){h=getSpriteData(assetLib.getData("uiElements"),"bubble0");ctx.drawImage(h.img,h.bX,h.bY,h.bWidth,h.bHeight,head.x-140*head.scale-h.bWidth*this.hintInc,head.y-780*head.scale-h.bHeight*this.hintInc,h.bWidth*this.hintInc,h.bHeight*this.hintInc)}break;case"pause":ctx.fillStyle="rgba(0, 0, 0, 0.75)",ctx.fillRect(0,0,canvas.width,canvas.height)}t&&this.addButs(ctx)},t.prototype.addButs=function(t){for(var e=!1,a=0;a<this.aButs.length;a++)if(this.aButs[a].isOver){e=!0;break}for(a=0;a<this.aButs.length;a++){var i,s,h,o,d,r=0;0!=this.incY&&this.aButs[a].flash&&(r=this.aButs[a].isOver?3*Math.sin(2*(this.incY+2.5*a)):3*Math.sin(this.incY+2.5*a)),this.aButs[a].scale||(this.aButs[a].scale=1),s=this.aButs[a].oImgData.oData.oAtlasData[this.aButs[a].id].x,h=this.aButs[a].oImgData.oData.oAtlasData[this.aButs[a].id].y,o=this.aButs[a].oImgData.oData.oAtlasData[this.aButs[a].id].width,d=this.aButs[a].oImgData.oData.oAtlasData[this.aButs[a].id].height;var n=canvas.width*this.aButs[a].align[0],g=canvas.height*this.aButs[a].align[1];i=g+this.aButs[a].aPos[1]>canvas.height/2?this.butsY:-this.butsY,this.aButs[a].aOverData=new Array(n+this.aButs[a].aPos[0]-o/2*this.aButs[a].scale-r/2,g+this.aButs[a].aPos[1]-d/2*this.aButs[a].scale+i+r/2,n+this.aButs[a].aPos[0]+o/2*this.aButs[a].scale-r/2,g+this.aButs[a].aPos[1]+d/2*this.aButs[a].scale+i+r/2),this.aButs[a].isOver&&this.aButs[a].flash&&(t.save(),t.translate(n+this.aButs[a].aPos[0],g+this.aButs[a].aPos[1]),t.scale(1+r/30,1+r/30),t.globalAlpha=1,t.rotate(this.incY/7),t.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),t.restore()),t.drawImage(this.aButs[a].oImgData.img,s,h,o,d,this.aButs[a].aOverData[0],this.aButs[a].aOverData[1],o*this.aButs[a].scale+r,d*this.aButs[a].scale-r),(this.aButs[a].isOver||this.aButs[a].flash)&&(t.save(),this.aButs[a].isOver?t.globalAlpha=1:t.globalAlpha=e?Math.max(Math.sin(this.incY/2),0)/2:Math.max(Math.sin(this.incY/2),0),t.filter="brightness(120%)",t.drawImage(this.aButs[a].oImgData.img,s,h,o,d,this.aButs[a].aOverData[0],this.aButs[a].aOverData[1],o*this.aButs[a].scale+r,d*this.aButs[a].scale-r),t.restore())}},t}();t.Panel=e}(Elements||(Elements={})),function(t){var e=function(){function t(){this.oTextData={},this.inc=0,this.createTextObjects()}return t.prototype.createTextObjects=function(){for(var t in assetLib.textData.langText.text[curLang])this.oTextData[t]={},this.oTextData[t].aLineData=this.getCharData(assetLib.textData.langText.text[curLang][t]["@text"],assetLib.textData.langText.text[curLang][t]["@fontId"]),this.oTextData[t].aLineWidths=this.getLineWidths(this.oTextData[t].aLineData),this.oTextData[t].blockWidth=this.getBlockWidth(this.oTextData[t].aLineData),this.oTextData[t].blockHeight=this.getBlockHeight(this.oTextData[t].aLineData,assetLib.textData.langText.text[curLang][t]["@fontId"]),this.oTextData[t].lineHeight=parseInt(assetLib.textData["fontData"+assetLib.textData.langText.text[curLang][t]["@fontId"]].text.common["@lineHeight"]),this.oTextData[t].oFontImgData=assetLib.getData("font"+assetLib.textData.langText.text[curLang][t]["@fontId"])},t.prototype.getLineWidths=function(t){for(var e,a=new Array,i=0;i<t.length;i++){e=0;for(var s=0;s<t[i].length;s++)e+=parseInt(t[i][s]["@xadvance"]),0==s?e-=parseInt(t[i][s]["@xoffset"]):s==t[i].length-1&&(e+=parseInt(t[i][s]["@xoffset"]));a.push(e)}return a},t.prototype.getBlockWidth=function(t){for(var e,a=0,i=0;i<t.length;i++){e=0;for(var s=0;s<t[i].length;s++)e+=parseInt(t[i][s]["@xadvance"]),0==s?e-=parseInt(t[i][s]["@xoffset"]):s==t[i].length-1&&(e+=parseInt(t[i][s]["@xoffset"]));e>a&&(a=e)}return a},t.prototype.getBlockHeight=function(t,e){return t.length*parseInt(assetLib.textData["fontData"+e].text.common["@lineHeight"])},t.prototype.getCharData=function(t,e){for(var a=new Array,i=0;i<t.length;i++){a[i]=new Array;for(var s=0;s<t[i].length;s++)for(var h=0;h<assetLib.textData["fontData"+e].text.chars.char.length;h++)t[i][s].charCodeAt(0)==assetLib.textData["fontData"+e].text.chars.char[h]["@id"]&&a[i].push(assetLib.textData["fontData"+e].text.chars.char[h])}return a},t.prototype.renderText=function(t){var e,a=this.oTextData[t.text].aLineData,i=this.oTextData[t.text].oFontImgData,s=0,h=0,o=0,d=1,r=0;t.lineOffsetY&&(o=t.lineOffsetY),t.scale&&(d=t.scale);var n=1*d;t.maxWidth&&this.oTextData[t.text].blockWidth*d>t.maxWidth&&(n=t.maxWidth/this.oTextData[t.text].blockWidth),t.anim&&(this.inc+=7*delta);for(var g=0;g<a.length;g++){e=0,"centre"==t.alignX&&(s=this.oTextData[t.text].aLineWidths[g]/2),"centre"==t.alignY&&(h=this.oTextData[t.text].blockHeight/2+o*(a.length-1)/2);for(var l=0;l<a[g].length;l++){var c=a[g][l]["@x"],u=a[g][l]["@y"],m=a[g][l]["@width"],I=a[g][l]["@height"];t.anim&&(r=Math.sin(this.inc+l/2)*(I/15*n)),ctx.drawImage(i.img,c,u,m,I,t.x+(e+parseInt(a[g][l]["@xoffset"])-s)*n,t.y+(parseInt(a[g][l]["@yoffset"])+g*this.oTextData[t.text].lineHeight+g*o-h)*n+r,m*n,I*n),e+=parseInt(a[g][l]["@xadvance"])}}},t}();t.TextDisplay=e}(Utils||(Utils={})),function(t){var e=function(){function e(){this.headId=0,this.scale=1,this.headRot=0,this.inc=0,this.targRot=0,this.startHairId=0,this.hairPosId=0,this.hairWidth=18,this.hairSegs=7,this.aHairCols=new Array([98,53,34],[238,225,52],[252,183,11],[182,27,8],[173,87,42],[127,43,7],[51,51,51],[128,9,4]),this.oneShot=!0,this.hairVolMax=2,this.hairVolMin=.3,this.headCenterX=0,this.headCenterY=0,this.headRadius=0,this.maxLen=600,this.mirrorId=0,this.aNearRadius=new Array(150,0,500,100,2e3,25,100,100,100,100,50,50,50,300,0,25,25,100),this.ambientHeadRot=0,this.actionHeadrot=0,this.wetRate=35,this.soapRate=100,this.aTouchPos=new Array,this.browY=0,this.browRot=0,this.mouthId=0,this.eyeX=0,this.eyeY=0,this.eyeInc=0,this.eyesOpen=!0,this.blinkInc=0,this.forceEyeClosed=!1,this.parallaxX=0,this.parallaxY=0,this.eyeOffsetX=96,this.eyeOffsetY=0,this.aNoseOffset=new Array(0,-27,-10),this.aHatOffset=new Array(0,0,0,0,0,0,20,24,0,6,-3,-32),this.aJewelOffset=new Array(5,7,3,2,4,3,4,40,0,0,-4,6),this.bubbleInc=0,this.mouthInc=0,this.mouthHold=!1,this.baldState=0,this.lastValidAngle=0,this.handState=0,this.handX=0,this.handY=0,this.handRot=0,this.waveRate=0,this.bodyX=0,this.bodyY=0,this.earringRot=0,this.prevParallaxX=0,this.wiggleTime=0,this.wiggleAmplitude=0,this.aStartClothes=new Array(9,10,13,14,16,17,18,20),this.highlightId="",this.highlightInc=0,this.wiggleHairTime=0,this.wiggleHairAmplitude=0,this.wiggleHairRot=0,this.aLashOffset02=new Array([20,-27],[20,-25],[20,-25]),this.aLashOffset00=new Array([13,-28],[13,-23],[13,-25]),this.aLashOffset01=new Array([46,-22],[51,-8],[49,-17]),this.aLashOffset12=new Array([22,33],[22,30],[24,29]),this.aLashOffset10=new Array([10,37],[8,35],[8,33]),this.aLashOffset11=new Array([46,11],[51,9],[57,-2]),this.emojiInc=0,this.forceEmoji=!1,this.hairChanged=!1,this.handFlip=1,this.winkState=0,this.winkInc=0,this.sortInc=0,this.startComboId=0,this.aStartCombos=new Array({curSkinTint:1,eyeId:0,noseId:0,glassesId:-1,startHairId:3,bgId:1,curEyeTint:0,tBackHairLen:450,tFrontHairType:9,tBackHairType:7,tFrontFrizz:0,tBackFrizz:0,tSeedCol:5,tSeed:1,tSeedRate:.75},{curSkinTint:2,eyeId:2,noseId:2,glassesId:5,startHairId:2,bgId:8,curEyeTint:2,tBackHairLen:500,tFrontHairType:2,tBackHairType:4,tFrontFrizz:0,tBackFrizz:0,tSeedCol:4,tSeed:1,tSeedRate:.75}),playSound("reset",.7),triggerVocalPos(),this.startComboId=saveDataHandler.getStartComboId()%this.aStartCombos.length,this.startHairId=Math.floor(Math.random()*this.aHairCols.length),flowerId=-1,glassesId=-1,hatId=-1,jewelId=-1,earringId=-1,bgId=aAllowedBgs[Math.floor(Math.random()*aAllowedBgs.length)],this.mouthHold=!1,this.mouthInc=1,this.mouthId=7,this.eyeOffsetX=100,this.eyeOffsetY=5,curBrowTint=0,curEyeTint=Math.floor(Math.random()*aEyeTints.length),curLipTint=Math.floor(3*Math.random()),browId=aAllowedBrows[Math.floor(Math.random()*aAllowedBrows.length)],noseId=Math.floor(3*Math.random()),eyeId=Math.floor(3*Math.random()),lashId=aAllowedLashes[Math.floor(Math.random()*aAllowedLashes.length)],Math.random()>.5?(clothId=0,curVestTint=Math.floor(Math.random()*aVestTints.length)):clothId=this.aStartClothes[Math.floor(Math.random()*this.aStartClothes.length)],Math.random()>.8?(glassesId=aAllowedGlasses[Math.floor(Math.random()*aAllowedGlasses.length)],curGlassesTint=Math.floor(Math.random()*aGlassesTints.length)):curGlassesTint=0,Math.random()>.5&&(jewelId=aAllowedJewels[Math.floor(Math.random()*aAllowedJewels.length)]),Math.random()>.5&&(earringId=aAllowedEarrings[Math.floor(Math.random()*aAllowedEarrings.length)]),firstRun?(curSkinTint=this.aStartCombos[this.startComboId].curSkinTint,eyeId=this.aStartCombos[this.startComboId].eyeId,noseId=this.aStartCombos[this.startComboId].noseId,glassesId=this.aStartCombos[this.startComboId].glassesId,this.startHairId=this.aStartCombos[this.startComboId].startHairId,bgId=this.aStartCombos[this.startComboId].bgId,curEyeTint=this.aStartCombos[this.startComboId].curEyeTint):curSkinTint=Math.floor(Math.random()*aSkinTints.length),aBrowTints[0]=this.aHairCols[this.startHairId],aEyeShadowTints[0]=aEyeLidTints[curSkinTint],curEyeShadowTint=curSkinTint,this.addHair(),this.startAmbientHead(),this.startParallaxX(),this.startParallaxY(),this.browMove(),this.handAction(Math.floor(2*Math.random())),this.bounce(),this.ambientHeadRot=.4*Math.random()-.2,this.updateTableHeight(),firstRun=!1}return e.prototype.wink=function(){this.winkState=1,this.winkInc=.5},e.prototype.pose=function(){var t=this,e=Math.floor(6*Math.random());switch(triggerVocalPos(),this.mouthHold=!1,this.mouthInc=1,this.mouthId=7,this.eyeX=0,this.eyeY=0,this.eyeInc=1,curCat&&(0==e&&(e=1),3==e&&(e=4)),this.poseTween&&this.poseTween.kill(),e){case 0:this.handAction(0),this.dip(0),this.targRot=-15*radian,this.poseTween=TweenLite.to(this,1,{targRot:0,ease:"Bounce.easeOut",delay:1,onComplete:function(){}});break;case 1:this.handAction(1),this.dip(1),this.targRot=15*radian,this.poseTween=TweenLite.to(this,1,{targRot:0,ease:"Bounce.easeOut",delay:1,onComplete:function(){}});break;case 2:this.handAction(2),this.dip(2),this.targRot=0,Math.random()>.7&&(this.mouthId=8,playSound("tongue"));break;case 3:this.handAction(3),this.dip(3),this.targRot=-8*radian,this.poseTween=TweenLite.to(this,1,{targRot:0,ease:"Bounce.easeOut",delay:1,onComplete:function(){t.eyesOpen=!0,t.blinkInc=5*Math.random()+2}}),Math.random()>.7&&(this.mouthId=8,playSound("tongue"));break;case 4:this.handAction(4),this.dip(4),this.targRot=8*radian,this.poseTween=TweenLite.to(this,1,{targRot:0,ease:"Bounce.easeOut",delay:1,onComplete:function(){t.eyesOpen=!0,t.blinkInc=5*Math.random()+2}}),Math.random()>.7&&(this.mouthId=8,playSound("tongue"));break;case 5:this.handAction(5),this.dip(2),this.targRot=0}Math.random()>.9&&8!=this.mouthId&&this.wink()},e.prototype.dip=function(t){var e=this;switch(this.bodyTween&&this.bodyTween.kill(),this.parallaxTweenX&&this.parallaxTweenX.kill(),this.parallaxTweenY&&this.parallaxTweenY.kill(),t){case 0:this.bodyTween=TweenLite.to(this,.5,{parallaxX:-.5,parallaxY:-.5,bodyX:0*this.scale,bodyY:15*this.scale,ease:"Cubic.easeOut",onComplete:function(){e.bodyTween=TweenLite.to(e,1,{bodyX:0,bodyY:0,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX(),e.startParallaxY()}})}});break;case 1:this.bodyTween=TweenLite.to(this,.5,{parallaxX:.5,parallaxY:-.5,bodyX:-0*this.scale,bodyY:15*this.scale,ease:"Cubic.easeOut",onComplete:function(){e.bodyTween=TweenLite.to(e,1,{bodyX:0,bodyY:0,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX(),e.startParallaxY()}})}});break;case 2:this.bodyTween=TweenLite.to(this,1.5,{parallaxX:0,parallaxY:0,bodyX:0,bodyY:30*this.scale,ease:"Elastic.easeOut",onComplete:function(){e.bodyTween=TweenLite.to(e,.5,{bodyX:0,bodyY:0,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX(),e.startParallaxY()}})}});break;case 3:this.bodyTween=TweenLite.to(this,.5,{parallaxX:-.5,parallaxY:-.5,bodyY:20*this.scale,ease:"Cubic.easeInOut",onComplete:function(){e.bodyTween=TweenLite.to(e,1,{bodyX:0,bodyY:0,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX(),e.startParallaxY()}})}});break;case 4:this.bodyTween=TweenLite.to(this,.5,{parallaxX:.5,parallaxY:-.5,bodyY:20*this.scale,ease:"Cubic.easeInOut",onComplete:function(){e.bodyTween=TweenLite.to(e,1,{bodyX:0,bodyY:0,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX(),e.startParallaxY()}})}})}},e.prototype.handAction=function(t){var e=this;switch(this.handTween&&this.handTween.kill(),t){case 0:this.handState=1,this.handX=-300,this.handY=300,this.handRot=45*radian,this.waveRate=.5*Math.random()+.5,this.handFlip=1,this.handTween=TweenLite.to(this,.3,{handY:100,handX:-275,handRot:0,ease:"Cubic.easeOut",onComplete:function(){firstHairTouch||panel.startTutTween(),e.handTween=TweenLite.to(e,.5,{handY:300,handX:-300,handRot:45*radian,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}});break;case 1:this.handState=1,this.handX=-300,this.handY=300,this.handRot=45*radian,this.waveRate=.5*Math.random()+.5,this.handFlip=-1,this.handTween=TweenLite.to(this,.3,{handY:100,handX:-275,handRot:0,ease:"Cubic.easeOut",onComplete:function(){firstHairTouch||panel.startTutTween(),e.handTween=TweenLite.to(e,.5,{handY:300,handX:-300,handRot:45*radian,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}});break;case 2:this.handState=2,this.handX=-300,this.handY=300,this.handRot=45*radian,this.waveRate=.5*Math.random()+.5,this.handFlip=-1,this.handTween=TweenLite.to(this,.3,{handY:100,handX:-275,handRot:0,ease:"Cubic.easeOut",onComplete:function(){e.handTween=TweenLite.to(e,.5,{handY:300,handX:-300,handRot:45*radian,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}});break;case 3:this.handState=3,this.handX=-300,this.handY=300,this.handRot=45*radian,this.handFlip=1,this.handTween=TweenLite.to(this,.3,{handY:100,handX:-275,handRot:0,ease:"Cubic.easeOut",onComplete:function(){e.handTween=TweenLite.to(e,.5,{handY:300,handX:-300,handRot:45*radian,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}});break;case 4:this.handState=3,this.handX=-300,this.handY=300,this.handRot=45*radian,this.handFlip=-1,this.handTween=TweenLite.to(this,.3,{handY:100,handX:-275,handRot:0,ease:"Cubic.easeOut",onComplete:function(){e.handTween=TweenLite.to(e,.5,{handY:300,handX:-300,handRot:45*radian,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}});break;case 5:this.handState=4,this.handX=0,this.handY=300,this.handRot=0,this.handTween=TweenLite.to(this,.3,{handY:100,ease:"Cubic.easeOut",onComplete:function(){e.handTween=TweenLite.to(e,.5,{handY:300,ease:"Cubic.easeIn",delay:.5*Math.random()+.5,onComplete:function(){e.handState=0}})}})}},e.prototype.bounce=function(){var t=this;this.bodyTween&&this.bodyTween.kill(),this.bodyY=200*this.scale,this.bodyTween=TweenLite.to(this,1,{bodyY:0,ease:"Cubic.easeOut",onComplete:function(){t.nod()}})},e.prototype.highlightItem=function(t){this.highlightId=t,this.highlightTween&&this.highlightTween.kill(),this.highlightInc=1,this.highlightTween=TweenLite.to(this,.3,{highlightInc:0,ease:"Quad.easeIn",onComplete:function(){}})},e.prototype.shake=function(){var t=this;triggerVocalPos();var e=.3*Math.random()+.2;this.parallaxX>0&&(e=-e),this.parallaxTweenX&&this.parallaxTweenX.kill(),this.parallaxTweenX=TweenLite.to(this,.1,{parallaxX:e,ease:"Cubic.easeInOut",onComplete:function(){t.parallaxTweenX=TweenLite.to(t,.1,{parallaxX:-e,ease:"Cubic.easeInOut",onComplete:function(){t.parallaxTweenX=TweenLite.to(t,.5,{parallaxX:0,ease:"Elastic.easeOut",onComplete:function(){t.startParallaxX()}})}})}})},e.prototype.nod=function(){var t=this;curCat&&curCat.tailBoost();var e=.2*Math.random()+.1;this.parallaxTweenY&&this.parallaxTweenY.kill(),this.parallaxTweenY=TweenLite.to(this,.3,{parallaxY:e,ease:"Cubic.easeInOut",onComplete:function(){t.parallaxTweenY=TweenLite.to(t,.3,{parallaxY:-e,ease:"Cubic.easeInOut",onComplete:function(){t.parallaxTweenY=TweenLite.to(t,.5,{parallaxY:0,ease:"Back.easeOut",onComplete:function(){t.startParallaxY()}})}})}})},e.prototype.startAmbientHead=function(){var t,e=this;this.ambientTween&&this.ambientTween.kill(),t=1==touchArea?2*Math.random()+1:1*Math.random()+.5,this.ambientTween=TweenLite.to(this,t,{ambientHeadRot:.08*Math.random()-.04,ease:"Cubic.easeInOut",onComplete:function(){e.startAmbientHead()}})},e.prototype.startParallaxX=function(){var t,e=this;this.parallaxTweenX&&this.parallaxTweenX.kill(),t=1==touchArea?2*Math.random()+2:1*Math.random()+1,this.parallaxTweenX=TweenLite.to(this,t,{parallaxX:1*Math.random()-.5,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxX()}})},e.prototype.startParallaxY=function(){var t,e=this;this.parallaxTweenY&&this.parallaxTweenY.kill(),t=1==touchArea?2*Math.random()+2:1*Math.random()+1,this.parallaxTweenY=TweenLite.to(this,t,{parallaxY:1*Math.random()-.5,ease:"Cubic.easeInOut",onComplete:function(){e.startParallaxY()}})},e.prototype.browMove=function(){var t=this;this.browTween&&this.browTween.kill(),this.browTween=TweenLite.to(this,.2*Math.random()+.2,{browY:20*Math.random()-10,browRot:.06*Math.random()-.03,ease:"Back.easeOut",delay:3*Math.random(),onComplete:function(){t.browMove()}})},e.prototype.addHair=function(){this.aHair0=new Array,this.aHair1=new Array;var t=0,e=Math.floor(16*Math.random()),a=Math.floor(10*Math.random()),i=Math.floor(7*Math.random()),s=Math.floor(11*Math.random()),h=.6,o=0;Math.random();Math.random()>.7&&Math.random();var d,r,n=75*Math.random()+75,g=10*Math.random()+10,l=300*Math.random()+250,c=this.getFrizz(),u=this.getFrizz(),m=this.getHairCol(this.startHairId,0);firstRun?(l=this.aStartCombos[this.startComboId].tBackHairLen,e=this.aStartCombos[this.startComboId].tFrontHairType,a=this.aStartCombos[this.startComboId].tBackHairType,c=this.aStartCombos[this.startComboId].tFrontFrizz,u=this.aStartCombos[this.startComboId].tBackFrizz,s=this.aStartCombos[this.startComboId].tSeedCol,i=this.aStartCombos[this.startComboId].tSeed,h=this.aStartCombos[this.startComboId].tSeedRate):!firstRun&&Math.random()>.95&&(o=1),13==e&&(a=9);for(var I=0;I<aHairData[this.hairPosId].length;I++){var y=aHairData[this.hairPosId][I].x,p=aHairData[this.hairPosId][I].y;d=new Array;var x=20*Math.random()-10;if(0==aHairData[this.hairPosId][I].id){for(var w=50*Math.random()+n,b=0;b<this.hairSegs;b++)switch(e){case 0:0==b?d.push({x:0,y:0,rot:45*radian,addRot:0}):d.push({x:0,y:0,rot:.5*Math.random()-.002*y,addRot:0});break;case 1:0==b?d.push({x:0,y:0,rot:-45*radian,addRot:0}):d.push({x:0,y:0,rot:-.5*Math.random()+.002*y,addRot:0});break;case 2:if(0==b)r=Math.PI-.001*y+45*radian,d.push({x:0,y:0,rot:r,addRot:0});else if(b<2){var f=.2*b+.2*Math.random()-.1;r+=f,d.push({x:0,y:0,rot:f,addRot:0})}else 3==b?d.push({x:0,y:0,rot:-90*radian-r+.2*Math.random()-.1,addRot:0}):d.push({x:0,y:0,rot:.2*Math.random()-.1,addRot:0});break;case 3:if(w=35*Math.random()+.9*l,0==b){var v=y/200;r=.5*Math.PI+v+(.05*Math.random()-.025),d.push({x:0,y:0,rot:r,addRot:0})}else{var A=-.15-.1*(Math.abs(y)/100)+(.05*Math.random()-.025);r+=A,d.push({x:0,y:0,rot:A,addRot:0})}break;case 4:aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:-.01*b+-.5*Math.random(),addRot:0}):d.push({x:0,y:0,rot:.01*b+.5*Math.random(),addRot:0});break;case 5:0==b?d.push({x:0,y:0,rot:Math.PI+.005*y,addRot:0}):d.push({x:0,y:0,rot:-.2,addRot:0});break;case 6:0==b?d.push({x:0,y:0,rot:0,addRot:0}):d.push({x:0,y:0,rot:.2*Math.random()-.1,addRot:0});break;case 7:0==b?d.push({x:0,y:0,rot:Math.PI+.01*y,addRot:0}):d.push({x:0,y:0,rot:.5,addRot:0});break;case 8:w=25*Math.random()+.5*l,0==b?d.push({x:0,y:0,rot:Math.atan2(p,y)-90*radian,addRot:0}):d.push({x:0,y:0,rot:(b%2-.5)*Math.PI*1.5+.2*Math.random()-.1,addRot:0});break;case 9:w=25*Math.random()+l,0==b?aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:Math.sin(b)-(65-.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(b)+(65+.2*y)*radian,addRot:0}):aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:Math.sin(b)-(40+b*b)*radian+.2+.2*Math.random()-.1,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(b)+(40+b*b)*radian-.2+.2*Math.random()-.1,addRot:0});break;case 10:w=50*Math.random()+l,0==b?y>0?d.push({x:0,y:0,rot:(-55- -.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-(-.2*y-55)*radian,addRot:0}):y>0?d.push({x:0,y:0,rot:Math.sin(2*b)+.2*Math.random()-.1,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(2*b)+.2*Math.random()-.1,addRot:0});break;case 11:0==b?d.push({x:0,y:0,rot:200*radian,addRot:0}):b<4?d.push({x:0,y:0,rot:Math.PI*(.05*Math.random()+.2)+.002*y,addRot:0}):d.push({x:0,y:0,rot:0,addRot:0});break;case 12:0==b?d.push({x:0,y:0,rot:130*radian,addRot:0}):b<5?d.push({x:0,y:0,rot:Math.PI*(.05*Math.random()+.2)+.002*y,addRot:0}):d.push({x:0,y:0,rot:0,addRot:0});break;case 13:w=50*Math.random()+l,0==b?y>0?d.push({x:0,y:0,rot:(-(20*Math.random()+60)- -.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-(-(20*Math.random()+60)+-.2*y)*radian,addRot:0}):b<4?y>0?d.push({x:0,y:0,rot:15*radian,addRot:0}):d.push({x:0,y:0,rot:-15*radian,addRot:0}):d.push({x:0,y:0,rot:.2*Math.random()-.1,addRot:0});break;case 14:0==b?y>50?(w=0,d.push({x:0,y:0,rot:0,addRot:0})):(w=200,d.push({x:0,y:0,rot:5*radian+.02*Math.random()-.01,addRot:0})):y>50?d.push({x:0,y:0,rot:0,addRot:0}):d.push({x:0,y:0,rot:.02*Math.pow(b,1.5),addRot:0});break;case 15:0==b?y>-75&&y<75?(w=200-Math.abs(y),d.push({x:0,y:0,rot:.6*Math.random()-.3-135*radian,addRot:0})):(w=0,d.push({x:0,y:0,rot:180*radian,addRot:0})):b%2==0?d.push({x:0,y:0,rot:90*radian,addRot:0}):d.push({x:0,y:0,rot:-90*radian,addRot:0})}this.aHair0.push({x:y,y:p,vol:Math.random()*(this.hairVolMax-this.hairVolMin)+this.hairVolMin,len:w,aSegs:d,aCol:this.setStartCol(m,x,i,s,h,y,p),wet:0,soap:0,id:t,colAdd:x,shimmer:o,frizz:c,ran:Math.random()})}else if(2==aHairData[this.hairPosId][I].id){for(w=25*Math.random()+g,b=0;b<this.hairSegs;b++)2==e?(w=25*Math.random()+n,0==b?d.push({x:0,y:0,rot:Math.PI-.001*y,addRot:0}):d.push({x:0,y:0,rot:.05*b+.2*Math.random()-.1,addRot:0})):4==e?(w=25*Math.random()+n,aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:-.01*b+-.5*Math.random(),addRot:0}):d.push({x:0,y:0,rot:.01*b+.5*Math.random(),addRot:0})):5==e?(w=25*Math.random()+n,0==b?d.push({x:0,y:0,rot:Math.PI+.002*y,addRot:0}):d.push({x:0,y:0,rot:-.2,addRot:0})):6==e?(w=25*Math.random()+n,0==b?d.push({x:0,y:0,rot:0,addRot:0}):d.push({x:0,y:0,rot:.2*Math.random()-.1,addRot:0})):7==e?(w=25*Math.random()+n,y<0?0==b?d.push({x:0,y:0,rot:Math.PI+.01*y,addRot:0}):d.push({x:0,y:0,rot:.75,addRot:0}):0==b?d.push({x:0,y:0,rot:Math.PI+.01*y,addRot:0}):d.push({x:0,y:0,rot:-.75,addRot:0})):8==e?(w=25*Math.random()+.25*l,0==b?d.push({x:0,y:0,rot:Math.atan2(p,y)-90*radian,addRot:0}):d.push({x:0,y:0,rot:(b%2-.5)*Math.PI*1.5+.2*Math.random()-.1,addRot:0})):9==e?(w=25*Math.random()+.5*l,0==b?aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:Math.sin(b)-(65-.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(b)+(65+.2*y)*radian,addRot:0}):aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:Math.sin(b)-(40+b*b)*radian+.2+.2*Math.random()-.1,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(b)+(40+b*b)*radian-.2+.2*Math.random()-.1,addRot:0})):12==e?(w=0,d.push({x:0,y:0,rot:.4*Math.random()-.2,addRot:0})):13==e?(w=50*Math.random()+.7*l,0==b?y>0?d.push({x:0,y:0,rot:(-(20*Math.random()+60)- -.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-(-(20*Math.random()+60)+-.2*y)*radian,addRot:0}):b<4?y>0?d.push({x:0,y:0,rot:15*radian,addRot:0}):d.push({x:0,y:0,rot:-15*radian,addRot:0}):d.push({x:0,y:0,rot:.2*Math.random()-.1,addRot:0})):14==e?0==b?y>50?(w=0,d.push({x:0,y:0,rot:0,addRot:0})):(w=200,d.push({x:0,y:0,rot:5*radian+.02*Math.random()-.01,addRot:0})):y>50?d.push({x:0,y:0,rot:0,addRot:0}):d.push({x:0,y:0,rot:.02*Math.pow(b,1.5),addRot:0}):15==e?(w=0,d.push({x:0,y:0,rot:0,addRot:0})):d.push({x:0,y:0,rot:.4*Math.random()-.2,addRot:0});this.aHair0.push({x:aHairData[this.hairPosId][I].x,y:aHairData[this.hairPosId][I].y,vol:Math.random()*(.5*this.hairVolMax-this.hairVolMin)+this.hairVolMin,len:w,aSegs:d,aCol:this.setStartCol(m,x,i,s,h,y,p),wet:0,soap:0,id:t,colAdd:x,shimmer:o,frizz:c,ran:Math.random()})}else if(1==aHairData[this.hairPosId][I].id){for(w=50*Math.random()+l,b=0;b<this.hairSegs;b++)switch(a){case 0:0==b?d.push({x:0,y:0,rot:-.2,addRot:0}):d.push({x:0,y:0,rot:.4*Math.random()+.1-.001*Math.pow(b,4),addRot:0});break;case 1:0==b?d.push({x:0,y:0,rot:.2,addRot:0}):d.push({x:0,y:0,rot:-.4*Math.random()-.1+.001*Math.pow(b,4),addRot:0});break;case 2:0==b?d.push({x:0,y:0,rot:.002*-y+.2*Math.random()-.1,addRot:0}):y>0?d.push({x:0,y:0,rot:.6*Math.random()-.3+5e-4*Math.pow(b,4),addRot:0}):d.push({x:0,y:0,rot:.6*Math.random()-.3-5e-4*Math.pow(b,4),addRot:0});break;case 3:aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:-.3*Math.random(),addRot:0}):d.push({x:0,y:0,rot:.3*Math.random(),addRot:0});break;case 4:y>0?0==b?d.push({x:0,y:0,rot:.001*-y,addRot:0}):d.push({x:0,y:0,rot:-(.5*Math.random()+.2*b),addRot:0}):0==b?d.push({x:0,y:0,rot:.001*-y,addRot:0}):d.push({x:0,y:0,rot:.5*Math.random()+.2*b,addRot:0});break;case 5:0==b?d.push({x:0,y:0,rot:.001*-y,addRot:0}):d.push({x:0,y:0,rot:(b%2-.5)*Math.PI*.5*(.4*b)+.2*Math.random()-.1,addRot:0});break;case 6:0==b?y>0?d.push({x:0,y:0,rot:(-100- -.2*y)*radian,addRot:0}):d.push({x:0,y:0,rot:-(-.2*y-100)*radian,addRot:0}):aHairData[this.hairPosId][I].x>0?d.push({x:0,y:0,rot:Math.sin(1*b)+.1*Math.random()-.05+.001*p,addRot:0}):d.push({x:0,y:0,rot:-Math.sin(1*b)+.1*Math.random()-.05-.001*p,addRot:0});break;case 7:0==b?d.push({x:0,y:0,rot:.006*-y,addRot:0}):d.push({x:0,y:0,rot:(.1+.1*Math.random())*y*.01,addRot:0});break;case 8:w=50*Math.random()+300,0==b?d.push({x:0,y:0,rot:Math.atan2(p,y)-90*radian,addRot:0}):d.push({x:0,y:0,rot:(b%2-.5)*Math.PI*1.5+.2*Math.random()-.1,addRot:0});break;case 9:w=25*Math.random()+.5*l,0==b?d.push({x:0,y:0,rot:.003*-y,addRot:0}):d.push({x:0,y:0,rot:(.1+.1*Math.random())*y*.002,addRot:0})}this.aHair1.push({x:aHairData[this.hairPosId][I].x,y:aHairData[this.hairPosId][I].y,vol:Math.random()*(this.hairVolMax-this.hairVolMin)+this.hairVolMin,len:w,aSegs:d,aCol:this.setStartCol(m,x,i,s,h,y,p),wet:0,soap:0,id:t,colAdd:x,shimmer:o,frizz:u,ran:Math.random()})}t++}},e.prototype.setStartCol=function(t,e,a,i,s,h,o){var d,r=new Array;switch(a){case 0:d=aHairTints[i];for(var n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs((h+190)/368)*s),255),0));return r;case 1:d=aHairTints[i];for(n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs(1-(h+190)/368)*s),255),0));return r;case 2:d=aHairTints[i];for(n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs((o+230)/460)*s),255),0));return r;case 3:d=aHairTints[i];for(n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs(1-(o+230)/460)*s),255),0));return r;case 4:d=aHairTints[i];for(n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs(Math.sin((h+190)/368*5))*s),255),0));return r;case 5:d=aHairTints[i];for(n=0;n<3;n++)r.push(Math.max(Math.min(t[n]+(d[n]+e-t[n])*(Math.abs(Math.sin((o+230)/460*5))*s),255),0));return r;case 6:return t}},e.prototype.getFrizz=function(){return Math.random()>.9?1:0},e.prototype.getHairCol=function(t,e){for(var a=new Array,i=0;i<3;i++)a.push(Math.max(Math.min(this.aHairCols[t][i]+e,255),0));return a},e.prototype.mixHairCol=function(t,e,a){for(var i=new Array,s=0;s<3;s++)i.push(Math.max(Math.min(e.aCol[s]+(t[s]+e.colAdd-e.aCol[s])*a,255),0));return i},e.prototype.depthSortHairs=function(t){return t.slice().sort((function(t,e){var a,i,s,h,o,d,r,n,g=t.aSegs,l=e.aSegs,c=null!==(i=null===(a=g[0])||void 0===a?void 0:a.y)&&void 0!==i?i:0,u=null!==(h=null===(s=g[g.length-1])||void 0===s?void 0:s.y)&&void 0!==h?h:0,m=u-c,I=null!==(d=null===(o=l[0])||void 0===o?void 0:o.y)&&void 0!==d?d:0,y=null!==(n=null===(r=l[l.length-1])||void 0===r?void 0:r.y)&&void 0!==n?n:0,p=y-I,x=u,w=y;return 0==t.len?-1:0==e.len?1:m>=0&&p>=0?w-x:m<0&&p<0?x-w:p-m}))},e.prototype.normalizeAngle=function(t){return Math.atan2(Math.sin(t),Math.cos(t))},e.prototype.getAverageAngle=function(){if(this.aTouchPos.length<2)return this.lastValidAngle;for(var t=0,e=0,a=1;a<this.aTouchPos.length;a++)t+=this.aTouchPos[a].x-this.aTouchPos[a-1].x,e+=this.aTouchPos[a].y-this.aTouchPos[a-1].y;if(0===t&&0===e)return this.lastValidAngle;var i=this.normalizeAngle(Math.atan2(e,t)),s=this.normalizeAngle(i-Math.PI/2);return this.lastValidAngle=s,s},e.prototype.getAverageSpeed=function(){if(this.aTouchPos.length<2)return null;for(var t=0,e=1;e<this.aTouchPos.length;e++){var a=this.aTouchPos[e].x-this.aTouchPos[e-1].x,i=this.aTouchPos[e].y-this.aTouchPos[e-1].y;t+=Math.sqrt(a*a+i*i)}var s=this.aTouchPos.length-1,h=delta*s;return h>0?t/h:0},e.prototype.stopTouch=function(){if(this.targRot=0,this.forceEyeClosed=!1,this.eyesOpen=!0,4==aHairToolOrder[toolId]?this.shake():aHairToolOrder[toolId]>0&&Math.random()>.8&&(this.nod(),Math.random()>.7?triggerGasp():triggerMmn()),1==this.baldState?(this.baldState=2,this.mouthHold=!1,this.mouthInc=2,this.mouthId=1,triggerGasp()):(this.mouthHold=!1,this.mouthInc=.5),6==aHairToolOrder[toolId]&&triggerGasp(),10==aHairToolOrder[toolId]){for(var t=0,e=0;e<this.aHair0.length;e++)if(0==this.aHair0[e].len){for(var a=0;a<this.aHair0[e].aSegs.length;a++)this.aHair0[e].aSegs[a].rot=0;t++}t>75&&0==growHintState&&panel.showGrowHint()}(this.forceEmoji||Math.random()>.8&&this.emojiInc<=0&&this.hairChanged)&&this.triggerEmojis(),this.hairChanged=!1},e.prototype.triggerEmojis=function(){var e=5*Math.random()+3;playSound("hearts"+Math.floor(4*Math.random()),.4),this.forceEmoji&&this.emojiInc<=3?e=30:triggerMmn();for(var a=0;a<e;a++){var i=new t.Emoji(this.x,this.y-700*this.scale,(1*Math.random()+1)*this.scale*.5,200*Math.random()+100,1*Math.random()+1,(270*Math.random()+135)*radian,(100*Math.random()+250)*this.scale,!1,0);aEffects.push(i)}this.emojiInc=5,this.mouthHold=!1,this.mouthInc=2,this.mouthId=7,this.forceEmoji=!1},e.prototype.updateTableHeight=function(){tableHeight=isWide()?150:Math.max(.2*(canvas.height-controlDepth),150)},e.prototype.update=function(){this.updateTableHeight(),vocalInc-=delta,this.winkInc>0&&(this.winkInc-=delta,this.winkInc<0&&(this.winkInc=0,this.winkState=0)),this.emojiInc>0&&(this.emojiInc-=delta,this.emojiInc<0&&(this.emojiInc=0)),void 0===this.prevParallaxX&&(this.prevParallaxX=this.parallaxX+this.parallaxY),void 0===this.wiggleTime&&(this.wiggleTime=0),void 0===this.earringRot&&(this.earringRot=0);var t=this.parallaxX-this.prevParallaxX,e=Math.abs(t)/delta,a=.05,i=1.5;this.wiggleAmplitude||(this.wiggleAmplitude=0),this.wiggleAmplitude+=(Math.min(2*e,1)-this.wiggleAmplitude)*delta*10,this.wiggleTime+=delta*i*Math.PI*2;var s=0;if(1==touchArea&&4==aHairToolOrder[toolId]&&(s=.2*Math.random()-.1),this.earringRot=Math.sin(this.wiggleTime)*this.wiggleAmplitude*a+s,1/delta<15?this.wiggleHairRot=0:(void 0===this.wiggleHairTime&&(this.wiggleHairTime=0),void 0===this.wiggleHairRot&&(this.wiggleHairRot=0),a=.1,i=.6,this.wiggleHairAmplitude||(this.wiggleHairAmplitude=0),this.wiggleHairAmplitude+=(Math.min(2*e,1)-this.wiggleHairAmplitude)*delta*10,this.wiggleHairTime+=delta*i*Math.PI*2,this.wiggleHairRot=Math.sin(this.wiggleHairTime)*this.wiggleHairAmplitude*a),this.prevParallaxX=this.parallaxX+this.parallaxY,!this.mouthHold&&(this.mouthInc-=delta,this.mouthInc<0)){for(var h=this.mouthId;h==this.mouthId;)this.mouthId=Math.floor(5*Math.random())+3;this.mouthInc=3*Math.random()+1}if(this.blinkInc-=delta,this.blinkInc<.1&&(this.eyesOpen=!1,this.blinkInc<0&&!this.forceEyeClosed&&(this.eyesOpen=!0,this.blinkInc=5*Math.random()+2)),this.aTouchPos.push({x:touchX,y:touchY}),this.aTouchPos.length>10&&this.aTouchPos.shift(),this.inc+=delta,isWide()?(this.y=canvas.height+2+this.bodyY,this.x=(canvas.width-controlDepth-70)/2+this.bodyX,this.scale=Math.min(.6*canvas.height/640,.6*(canvas.width-controlDepth)/440)):(this.y=canvas.height-controlDepth+2+this.bodyY,this.x=canvas.width/2+this.bodyX,this.scale=Math.min(.6*(canvas.height-controlDepth)/640,.5*canvas.width/440)),this.headBotY=this.y-248*this.scale-tableHeight,this.sortInc-=delta,this.sortInc<0&&(this.aHair0=this.depthSortHairs(this.aHair0),this.sortInc=.1),1==touchArea)switch(aHairToolOrder[toolId]){case 2:this.forceEyeClosed=!0,this.eyesOpen=!1,this.mouthHold=!1,this.mouthId=2;break;case 3:this.forceEyeClosed=!0,this.eyesOpen=!1,this.mouthHold=!1,this.mouthId=4;break;case 4:touchX>this.x?this.targRot=.05*Math.sin(10*this.inc)-.2:this.targRot=.2+.05*Math.sin(10*this.inc),this.forceEyeClosed=!0,this.eyesOpen=!1,this.mouthHold=!1,this.mouthId=1;break;case 5:this.mouthHold=!1,this.mouthId=2;break;case 6:this.mouthHold=!1,this.mouthId=1;break;case 10:this.mouthHold=!1,this.mouthId=0}if(this.eyeInc-=delta,this.eyeInc<0){this.eyeTween&&this.eyeTween.kill();var o=void 0,d=void 0;1==touchArea?(o=Math.atan2(touchY-(this.headBotY-260*this.scale),touchX-this.x),d=7,this.eyeInc=.2*Math.random()+.2):(o=Math.random()*Math.PI*2,d=7*Math.random(),this.eyeInc=3*Math.random()+1),this.eyeTween=TweenLite.to(this,.2,{eyeX:d*Math.cos(o),eyeY:d*Math.sin(o),ease:"Cubic.easeOut"})}var r=this.actionHeadrot-this.targRot;r=(r+Math.PI)%(2*Math.PI)-Math.PI,this.actionHeadrot-=.05*r,this.headRot=this.actionHeadrot+this.ambientHeadRot},e.prototype.angleDiff=function(t,e){for(var a=t-e;a<-Math.PI;)a+=2*Math.PI;for(;a>Math.PI;)a-=2*Math.PI;return a},e.prototype.drawDashedCurve=function(t,e,a){if(void 0===e&&(e=4),void 0===a&&(a=3),!(t.length<2)){var i=0,s=[e,a],h=0;ctx.beginPath();for(var o=0;o<t.length-1;o++){var d=t[o],r=t[o+1],n=r.x-d.x,g=r.y-d.y,l=Math.sqrt(n*n+g*g);if(0!==l)for(var c=0;c<l;){var u=s[i]-h,m=l-c,I=Math.min(u,m),y=c/l,p=(c+I)/l,x=d.x+n*y,w=d.y+g*y,b=d.x+n*p,f=d.y+g*p;0===i&&(ctx.moveTo(x,w),ctx.lineTo(b,f)),c+=I,(h+=I)>=s[i]&&(h=0,i=(i+1)%2)}}ctx.stroke()}},e.prototype.renderHair=function(e){var a,i,s,h,o,d,r,n;this.aNearHair=new Array;var g=getSpriteData(assetLib.getData("head0"),"head"+curSkinTint);ctx.lineCap="round";for(var l=0;l<this["aHair"+e].length;l++){var c=this.headRot,u=!0;0==(d=this["aHair"+e][l]).len&&(u=!1),d.wet=Math.max(d.wet-.1*delta,0),d.soap=Math.max(d.soap-.1*delta,0),a=(d.x-0)*this.scale,i=(d.y-g.bHeight/2)*this.scale,0==e?(r=20*-this.parallaxX,n=20*this.parallaxY):(r=10*this.parallaxX,n=5*-this.parallaxY),s=this.x+(a*Math.cos(c)-i*Math.sin(c))+r,h=this.headBotY+(a*Math.sin(c)+i*Math.cos(c))+n,o=d.len/this.hairSegs*this.scale,ctx.strokeStyle="rgb("+Math.min(Math.max(d.aCol[0]+d.colAdd-d.wet*this.wetRate+d.soap*this.soapRate+Math.sin(5*this.inc+.25*(s+h)+1*(r+n))*d.shimmer*20,0),255)+","+Math.min(Math.max(d.aCol[1]+d.colAdd-d.wet*this.wetRate+d.soap*this.soapRate+Math.sin(6*this.inc+.25*(s+h)+1*(r+n))*d.shimmer*20,0),255)+","+Math.min(Math.max(d.aCol[2]+d.colAdd-d.wet*this.wetRate+d.soap*this.soapRate+Math.sin(7*this.inc+.25*(s+h)+1*(r+n))*d.shimmer*20,0),255)+")";var m=d.vol-Math.max(d.wet*(d.vol-.5),0);0==e&&(u?m<.9&&(ctx.fillStyle=ctx.strokeStyle,ctx.beginPath(),ctx.arc(s,h,this.hairWidth*this.scale*.45,0,2*Math.PI),ctx.fill()):(ctx.fillStyle=ctx.strokeStyle,ctx.beginPath(),ctx.arc(s,h,5*this.scale,0,2*Math.PI),ctx.fill())),u&&(ctx.beginPath(),ctx.lineWidth=this.hairWidth*this.scale*m,0==d.frizz&&ctx.moveTo(s,h));var I=[],y=s,p=h;1==d.frizz&&I.push({x:s,y:h}),c-=this.headRot/2,0==e?c+=this.wiggleHairRot*d.len*7e-4*(.2+.8*d.ran):c-=this.wiggleHairRot*d.len*7e-4*(.2+.8*d.ran);for(var x=0;x<d.aSegs.length;x++)if(c+=d.aSegs[x].rot+d.aSegs[x].addRot,y+=o*Math.cos(c+Math.PI/2),p+=o*Math.sin(c+Math.PI/2),0==e&&(p+=2*this.parallaxY),I.push({x:y,y:p}),d.aSegs[x].x=y,d.aSegs[x].y=p,1==touchArea){var w=touchX-y,b=touchY-p,f=Math.sqrt(w*w+b*b);f<Math.max(this.aNearRadius[aHairToolOrder[toolId]],o)&&this.aNearHair.push({hairId:l,segId:x,dist:1-f/Math.max(this.aNearRadius[aHairToolOrder[toolId]],o)})}if(0==d.frizz){for(var v=0;v<I.length-1;v++){var A=I[v],D=I[v+1],H=(A.x+D.x)/2,T=(A.y+D.y)/2;u&&ctx.quadraticCurveTo(A.x,A.y,H,T)}if(I.length>1){var M=I[I.length-1];u&&ctx.lineTo(M.x,M.y)}u&&ctx.stroke()}else if(u){ctx.lineWidth=this.hairWidth*this.scale*d.vol;var S=Math.round(5*(1+d.vol));this.drawDashedCurve(I,S,2*S)}}if(1==touchArea){var k,Y=Math.floor(Math.random()*this.aNearHair.length),L=void 0;this.aNearHair.length>0&&(this.hairChanged=!0);for(l=0;l<this.aNearHair.length;l++)switch(o=(d=this["aHair"+e][this.aNearHair[l].hairId]).len/this.hairSegs,aHairToolOrder[toolId]){case 1:var C=touchX-this.headCenterX,B=touchY-this.headCenterY;if((Math.sqrt(C*C+B*B)>this.headRadius||0==e)&&(L=Math.min(this.aNearHair[l].segId+1,d.aSegs.length-1),d.len=d.len*Math.min(L/this.hairSegs+Math.random()*(1-L/this.hairSegs)*5,1),l==Y&&Math.random()>.5)){var W=new t.Shard(touchX,touchY,15*Math.random()+7,200*Math.random()+100,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!0,"rgb("+d.aCol[0]+","+d.aCol[1]+","+d.aCol[2]+")");aEffects.push(W)}break;case 6:d.len=Math.min(d.len+50*delta,this.maxLen);for(x=0;x<d.aSegs.length;x++)d.aSegs[x].rot+=.01*Math.random()-.005;firstGrow||(firstGrow=!0,this.forceEmoji=!0);break;case 2:d.wet=Math.min(d.wet+delta,1),d.soap=Math.max(d.soap-.5*delta,0);for(x=0;x<d.aSegs.length;x++)d.aSegs[x].rot-=this.normalizeAngle(d.aSegs[x].rot)*(.01*(x+1));if(0==l&&Math.random()>.5){W=new t.Particle(touchX,touchY,15*Math.random()+7,200*Math.random()+100,.5*Math.random()+.5,360*Math.random()*radian,100*Math.random(),!0,aWaterTints[Math.floor(Math.random()*aWaterTints.length)]);aEffects.push(W)}d.frizz=0;break;case 3:if(d.soap=Math.min(d.soap+.5*delta,1),0==l&&Math.random()>.5){W=new t.Particle(touchX,touchY,25*Math.random()+10,50*Math.random()+25,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!1,"#FFFFFF");0==l&&(this.bubbleInc-=delta,this.bubbleInc<0&&(this.bubbleInc=.1,playSound("bubble"+Math.floor(4*Math.random()),.5))),aEffects.push(W)}for(x=0;x<d.aSegs.length;x++)d.aSegs[x].addRot=Math.sin(5*this.inc+x+d.id)*(x/d.aSegs.length*(.005*o));d.aCol=this.mixHairCol(this.aHairCols[this.startHairId],d,.01),d.shimmer=Math.max(d.shimmer-.5*delta,0);break;case 14:for(x=0;x<d.aSegs.length;x++)d.aSegs[x].addRot=Math.sin(5*this.inc+x+d.id)*(x/d.aSegs.length*(.001*o));d.frizz=1;break;case 4:d.wet=Math.max(d.wet-.3*delta,0),d.soap=Math.max(d.soap-delta,0);var X=d.aSegs[0],R=Math.atan2(X.y-touchY,X.x-touchX)-Math.PI/2;R=(R+Math.PI)%(2*Math.PI)-Math.PI,k=this.angleDiff(R,X.rot),X.rot+=.02*k,X.rot=(X.rot+Math.PI)%(2*Math.PI)-Math.PI;for(x=0;x<d.aSegs.length;x++)d.aSegs[x].addRot=Math.sin(40*this.inc+x+d.id)*(x/d.aSegs.length*(.005*o)),x>0&&(d.aSegs[x].rot-=.001*d.aSegs[x].rot);firstBlow||(firstBlow=!0,this.forceEmoji=!0);break;case 5:if(d.aCol=this.mixHairCol(aHairTints[curHairTint],d,.03),d.shimmer=Math.max(d.shimmer-delta,0),0==l&&Math.random()>.5){W=new t.Particle(touchX,touchY,10*Math.random()+5,25*Math.random()+15,1*Math.random()+1,360*Math.random()*radian,50*Math.random(),!1,"rgb("+aHairTints[curHairTint][0]+","+aHairTints[curHairTint][1]+","+aHairTints[curHairTint][2]+")");aEffects.push(W)}0==l&&(this.bubbleInc-=delta,this.bubbleInc<0&&(this.bubbleInc=.1,playSound("colour"+Math.floor(4*Math.random()),.5))),firstColour||(firstColour=!0,this.forceEmoji=!0);break;case 15:if(d.shimmer=Math.min(d.shimmer+2*delta,1),d.aCol=this.mixHairCol(aHairTints[curHairTint],d,.03),0==l&&Math.random()>.5){W=new t.Particle(touchX,touchY,10*Math.random()+5,25*Math.random()+15,1*Math.random()+1,360*Math.random()*radian,50*Math.random(),!1,"rgb("+aHairTints[curHairTint][0]+","+aHairTints[curHairTint][1]+","+aHairTints[curHairTint][2]+")");aEffects.push(W)}0==l&&(this.bubbleInc-=delta,this.bubbleInc<0&&(this.bubbleInc=.1,playSound("colour"+Math.floor(4*Math.random()),.5))),firstShimmer||(firstShimmer=!0,this.forceEmoji=!0);break;case 0:C=touchX-this.headCenterX,B=touchY-this.headCenterY;if(!(Math.sqrt(C*C+B*B)<this.headRadius&&touchY<this.headBotY-200*this.scale)||0==e){var P=this.aNearHair[l].segId,E=this.normalizeAngle(this.getAverageAngle()),O=this.getAverageSpeed(),F=this.aNearHair[l].dist,j=d.aSegs.length-1,z=Math.max(1,j-P),G=Math.max(1,d.aSegs.length-P),U=new Array(d.aSegs.length),K=0;for(x=0;x<d.aSegs.length;x++)K+=d.aSegs[x].rot,U[x]=K;for(x=P;x<d.aSegs.length;x++){var N=0;for(v=0;v<x;v++)N+=d.aSegs[v].rot;var V=d.aSegs[x],q=this.normalizeAngle(N+V.rot),J=this.normalizeAngle(E-q),_=1-(x-P)/z,Q=1-x/Math.max(1,j),Z=1;V.rot+=J*O*5e-5*Z*F,V.rot=this.normalizeAngle(V.rot)}for(x=P+1;x<d.aSegs.length;x++){var $=0;for(v=0;v<=x;v++)$+=d.aSegs[v].rot;var tt=U[x],et=this.normalizeAngle(tt-$),at=(x-P)/G;d.aSegs[x].rot+=et*Math.pow(at,2)}}break;case 7:for(x=1;x<d.aSegs.length;x++)(x+d.id)%2==0?d.aSegs[x].rot=Math.min(d.aSegs[x].rot+(.25+x/d.aSegs.length*.75)*delta*.5,.7*Math.PI):d.aSegs[x].rot=Math.max(d.aSegs[x].rot-(.25+x/d.aSegs.length*.75)*delta*.5,.7*-Math.PI);break;case 9:for(x=1;x<d.aSegs.length;x++)d.aSegs[x].rot<0?d.aSegs[x].rot=Math.min(d.aSegs[x].rot+(.25+x/d.aSegs.length*.75)*delta*.5,.7*Math.PI):d.aSegs[x].rot=Math.max(d.aSegs[x].rot-(.25+x/d.aSegs.length*.75)*delta*.5,.7*-Math.PI);d.frizz=0;break;case 8:for(x=1;x<d.aSegs.length;x++)d.x>0?d.aSegs[x].rot=d.aSegs[x].rot-(.1+x/d.aSegs.length*.9)*delta*.2:d.aSegs[x].rot=d.aSegs[x].rot+(.1+x/d.aSegs.length*.9)*delta*.2,d.aSegs[x].rot=this.normalizeAngle(d.aSegs[x].rot);break;case 17:for(x=0;x<d.aSegs.length;x++)d.x>0&&1==e||d.x<0&&0==e?d.aSegs[x].rot-=(.3+x/d.aSegs.length*.7)*Math.sin(1*x)*delta*.3:d.aSegs[x].rot+=(.3+x/d.aSegs.length*.7)*Math.sin(1*x)*delta*.3,d.aSegs[x].rot=this.normalizeAngle(d.aSegs[x].rot);break;case 16:for(x=0;x<d.aSegs.length;x++)d.x>0?d.aSegs[x].rot+=(.3+x/d.aSegs.length*.7)*Math.sin(.5*x+d.id)*delta*.3:d.aSegs[x].rot-=(.3+x/d.aSegs.length*.7)*Math.sin(.5*x+d.id)*delta*.3,d.aSegs[x].rot=this.normalizeAngle(d.aSegs[x].rot);break;case 10:C=touchX-this.headCenterX,B=touchY-this.headCenterY;if((Math.sqrt(C*C+B*B)>this.headRadius||0==e)&&(L=Math.min(this.aNearHair[l].segId+1,d.aSegs.length-1),d.len>d.len*(L/this.hairSegs)&&(d.len=Math.max(d.len-500*delta,0)),0==d.len&&0==this.baldState&&(this.baldState=1),l==Y&&Math.random()>.5)){W=new t.Shard(touchX,touchY,3*Math.random()+3,200*Math.random()+100,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!0,"rgb("+d.aCol[0]+","+d.aCol[1]+","+d.aCol[2]+")");aEffects.push(W)}break;case 11:d.vol=Math.min(d.vol+.8*delta,this.hairVolMax);for(P=this.aNearHair[l].segId,E=this.normalizeAngle(this.getAverageAngle()),O=this.getAverageSpeed(),F=this.aNearHair[l].dist,j=d.aSegs.length-1,z=Math.max(1,j-P),G=Math.max(1,d.aSegs.length-P),U=new Array(d.aSegs.length),K=0,x=0;x<d.aSegs.length;x++)K+=d.aSegs[x].rot,U[x]=K;for(x=P;x<d.aSegs.length;x++){for(N=0,v=0;v<x;v++)N+=d.aSegs[v].rot;V=d.aSegs[x],q=this.normalizeAngle(N+V.rot),J=this.normalizeAngle(E-q),_=1-(x-P)/z,Q=1-x/Math.max(1,j),Z=Math.max(0,Math.min(1,.8*_+.5*Q));V.rot+=J*O*1e-5*Z*F,V.rot=this.normalizeAngle(V.rot)}break;case 12:if(d.vol=Math.max(d.vol-.8*delta,this.hairVolMin),l==Y&&Math.random()>.7){W=new t.Shard(touchX,touchY,10*Math.random()+5,200*Math.random()+100,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!0,"rgb("+d.aCol[0]+","+d.aCol[1]+","+d.aCol[2]+")");aEffects.push(W)}break;case 13:for(P=this.aNearHair[l].segId,E=this.normalizeAngle(this.getAverageAngle()),O=this.getAverageSpeed(),F=this.aNearHair[l].dist,j=d.aSegs.length-1,z=Math.max(1,j-P),G=Math.max(1,d.aSegs.length-P),U=new Array(d.aSegs.length),K=0,x=0;x<d.aSegs.length;x++)K+=d.aSegs[x].rot,U[x]=K;for(x=P;x<d.aSegs.length;x++){for(N=0,v=0;v<x;v++)N+=d.aSegs[v].rot;V=d.aSegs[x],q=this.normalizeAngle(N+V.rot),J=this.normalizeAngle(E-q),_=1-(x-P)/z,Q=1-x/Math.max(1,j),Z=Math.max(0,Math.min(1,.8*_+.5*Q));V.rot+=J*O*5e-6*Z*F,V.rot=this.normalizeAngle(V.rot)}}}},e.prototype.renderHighlight=function(){switch(ctx.save(),this.highlightId){case"jewel":if(jewelId>-1){ctx.globalAlpha=this.highlightInc;var t=getSpriteData(assetLib.getData("jewellery"),"jewel"+jewelId),e=this.x-t.bWidth/2*this.scale,a=this.y-tableHeight-(178+this.aJewelOffset[jewelId])*this.scale;this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,e,a,t.bWidth*this.scale,t.bHeight*this.scale,"rgb(255,255,255)")}break;case"brow":ctx.globalAlpha=this.highlightInc;t=getSpriteData(assetLib.getData("head0"),"brow"+browId);ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot),ctx.scale(-1,1),ctx.rotate(this.browRot);var i=-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX,s=-t.bHeight/2-270+this.eyeOffsetY+this.browY+35*this.parallaxY;this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)");t=getSpriteData(assetLib.getData("head0"),"brow"+browId);ctx.rotate(-this.browRot),ctx.scale(-1,1),ctx.rotate(this.browRot),i=-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX,s=-t.bHeight/2-270+this.eyeOffsetY+this.browY+35*this.parallaxY,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)");break;case"lash":if(-1!=lashId&&this.eyesOpen){ctx.globalAlpha=this.highlightInc;t=getSpriteData(assetLib.getData("head1"),"lash0"+lashId);ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot);var h=-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX+this["aLashOffset0"+lashId][eyeId][0],o=-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset0"+lashId][eyeId][1];this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,h,o,t.bWidth,t.bHeight,"rgb(255,255,255)");t=getSpriteData(assetLib.getData("head1"),"lash0"+lashId);ctx.scale(-1,1),h=-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX+this["aLashOffset0"+lashId][eyeId][0],o=-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset0"+lashId][eyeId][1],this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,h,o,t.bWidth,t.bHeight,"rgb(255,255,255)")}break;case"nose":ctx.globalAlpha=this.highlightInc;t=getSpriteData(assetLib.getData("head0"),"nose"+curSkinTint.toString()+noseId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-35*this.parallaxX,-t.bHeight/2-144+this.aNoseOffset[noseId]+35*this.parallaxY,t.bWidth,t.bHeight),ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot),i=-t.bWidth/2-35*this.parallaxX,s=-t.bHeight/2-144+this.aNoseOffset[noseId]+35*this.parallaxY,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgba(255,255,255, .5)");break;case"earring":if(earringId>-1){ctx.globalAlpha=this.highlightInc,ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot);var d=-(t=getSpriteData(assetLib.getData("jewellery"),"earring"+earringId)).bWidth/2+198+5*this.parallaxX,r=15*this.parallaxY-157;ctx.save(),ctx.translate(d,r),ctx.rotate(this.headRot+this.earringRot),i=-t.bWidth/2,s=0,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)"),ctx.restore(),ctx.scale(-1,1),d=-t.bWidth/2+198+5*this.parallaxX,r=15*this.parallaxY-157,ctx.save(),ctx.translate(d,r),ctx.rotate(this.headRot-this.earringRot),i=-t.bWidth/2,s=0,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)"),ctx.restore()}break;case"flower":if(flowerId>-1)ctx.globalAlpha=this.highlightInc,ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot),i=-(t=getSpriteData(assetLib.getData("faceItems"),"flower"+flowerId)).bWidth/2+184-35*this.parallaxX,s=-t.bHeight/2-280+40*this.parallaxY,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)");break;case"hat":if(hatId>-1){ctx.globalAlpha=this.highlightInc,ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot);t=getSpriteData(assetLib.getData("faceItems"),"hat"+hatId);hatId<=5?(i=-t.bWidth/2-20*this.parallaxX,s=-t.bHeight-290+this.aHatOffset[hatId]+10*this.parallaxY):(i=-t.bWidth/2-35*this.parallaxX,s=-t.bHeight-312+this.aHatOffset[hatId]+40*this.parallaxY),this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)")}break;case"glasses":if(glassesId>-1)ctx.globalAlpha=this.highlightInc,ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot),i=-(t=getSpriteData(assetLib.getData("faceItems"),"glasses"+glassesId)).bWidth/2-40*this.parallaxX,s=-t.bHeight/2+this.eyeOffsetY-200+40*this.parallaxY,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,i,s,t.bWidth,t.bHeight,"rgb(255,255,255)")}ctx.restore()},e.prototype.render=function(){this.renderHair(1);var t=getSpriteData(assetLib.getData("head0"),"neck"+curSkinTint);if(ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,this.x-t.bWidth/2*this.scale,this.y-t.bHeight*this.scale-tableHeight,t.bWidth*this.scale,t.bHeight*this.scale),jewelId>=0){t=getSpriteData(assetLib.getData("jewellery"),"jewel"+jewelId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,this.x-t.bWidth/2*this.scale,this.y-tableHeight-(178+this.aJewelOffset[jewelId])*this.scale,t.bWidth*this.scale,t.bHeight*this.scale)}clothId=Math.max(Math.min(clothId,aToolCount[3]-1),0);t=getSpriteData(assetLib.getData("clothes"),"cloth"+clothId);if(0==clothId){var e=this.x-t.bWidth/2*this.scale,a=this.y-t.bHeight*this.scale-tableHeight;this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,e,a,t.bWidth*this.scale,t.bHeight*this.scale,"rgb("+aVestTints[curVestTint][0]+","+aVestTints[curVestTint][1]+","+aVestTints[curVestTint][2]+")")}else ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,this.x-t.bWidth/2*this.scale,this.y-t.bHeight*this.scale-tableHeight,t.bWidth*this.scale,t.bHeight*this.scale);ctx.save(),ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot);t=getSpriteData(assetLib.getData("head0"),"ear"+curSkinTint);if(ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+184+5*this.parallaxX,-t.bHeight/2-208+15*this.parallaxY,t.bWidth,t.bHeight),earringId>=0){var i=-(t=getSpriteData(assetLib.getData("jewellery"),"earring"+earringId)).bWidth/2+198+5*this.parallaxX,s=15*this.parallaxY-157;ctx.save(),ctx.translate(i,s),ctx.rotate(-this.headRot+this.earringRot),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,0,t.bWidth,t.bHeight),ctx.restore()}t=getSpriteData(assetLib.getData("head0"),"ear"+curSkinTint);if(ctx.scale(-1,1),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+184-5*this.parallaxX,-t.bHeight/2-208+15*this.parallaxY,t.bWidth,t.bHeight),earringId>=0){i=-(t=getSpriteData(assetLib.getData("jewellery"),"earring"+earringId)).bWidth/2+198+5*this.parallaxX,s=15*this.parallaxY-157;ctx.save(),ctx.translate(i,s),ctx.rotate(this.headRot-this.earringRot),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,0,t.bWidth,t.bHeight),ctx.restore()}if(ctx.scale(-1,1),hatId>=0&&hatId<=5){t=getSpriteData(assetLib.getData("faceItems"),"hat"+hatId);var h=0;1==touchArea&&4==aHairToolOrder[toolId]&&(h=10*Math.random()-5),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-20*this.parallaxX,-t.bHeight-290+this.aHatOffset[hatId]+10*this.parallaxY+h,t.bWidth,t.bHeight)}t=getSpriteData(assetLib.getData("head0"),"head"+curSkinTint);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-20*this.parallaxX,-t.bHeight+20*this.parallaxY,t.bWidth,t.bHeight),this.headCenterX=this.x,this.headCenterY=this.headBotY-t.bHeight/2*this.scale,this.headRadius=t.bWidth/2*this.scale;t=getSpriteData(assetLib.getData("head0"),"nose"+curSkinTint.toString()+noseId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-35*this.parallaxX,-t.bHeight/2-144+this.aNoseOffset[noseId]+35*this.parallaxY,t.bWidth,t.bHeight);var o=this.mouthId;1==tabId&&1==toolId&&(o=3);t=getSpriteData(assetLib.getData("head0"),"mouth"+o+curLipTint);var d=0;if(8==o&&(d=10),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-30*this.parallaxX,-t.bHeight/2-72+d+35*this.parallaxY,t.bWidth,t.bHeight),this.eyesOpen&&(1!=tabId||5!=toolId)||1==this.winkState){t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId+"0");ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight);t=getSpriteData(assetLib.getData("head0"),"eye"+curEyeTint+"1");var r=this.eyeX;8==this.mouthId&&(r=-10),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+1.5*r-35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+.5*this.eyeY+35*this.parallaxY,t.bWidth,t.bHeight);t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId.toString()+curEyeShadowTint+"2");if(ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight),-1!=lashId){t=getSpriteData(assetLib.getData("head1"),"lash0"+lashId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX+this["aLashOffset0"+lashId][eyeId][0],-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset0"+lashId][eyeId][1],t.bWidth,t.bHeight)}}else{t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId.toString()+curEyeShadowTint+"3");if(ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight),-1!=lashId){t=getSpriteData(assetLib.getData("head1"),"lash1"+lashId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX+this["aLashOffset1"+lashId][eyeId][0],-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset1"+lashId][eyeId][1],t.bWidth,t.bHeight)}}if(!this.eyesOpen||1==tabId&&5==toolId||0!=this.winkState){t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId.toString()+curEyeShadowTint+"3");if(ctx.scale(-1,1),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight),-1!=lashId){t=getSpriteData(assetLib.getData("head1"),"lash1"+lashId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX+this["aLashOffset1"+lashId][eyeId][0],-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset1"+lashId][eyeId][1],t.bWidth,t.bHeight)}}else{var t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId.toString()+"0");ctx.scale(-1,1),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight);var t=getSpriteData(assetLib.getData("head0"),"eye"+curEyeTint+"1");r=this.eyeX;8==this.mouthId&&(r=10),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX-1.5*r+35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+.5*this.eyeY+35*this.parallaxY,t.bWidth,t.bHeight);t=getSpriteData(assetLib.getData("head1"),"eye"+eyeId.toString()+curEyeShadowTint+"2");if(ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX,-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY,t.bWidth,t.bHeight),-1!=lashId){t=getSpriteData(assetLib.getData("head1"),"lash0"+lashId);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX+this["aLashOffset0"+lashId][eyeId][0],-t.bHeight/2-208+this.eyeOffsetY+35*this.parallaxY+this["aLashOffset0"+lashId][eyeId][1],t.bWidth,t.bHeight)}}t=getSpriteData(assetLib.getData("head0"),"brow"+browId);ctx.scale(-1,1),ctx.rotate(this.browRot);var n=-t.bWidth/2+this.eyeOffsetX-35*this.parallaxX,g=-t.bHeight/2-270+this.eyeOffsetY+this.browY+35*this.parallaxY;this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,n,g,t.bWidth,t.bHeight,"rgb("+aBrowTints[curBrowTint][0]+","+aBrowTints[curBrowTint][1]+","+aBrowTints[curBrowTint][2]+")");t=getSpriteData(assetLib.getData("head0"),"brow"+browId);ctx.rotate(-this.browRot),ctx.scale(-1,1),ctx.rotate(this.browRot),n=-t.bWidth/2+this.eyeOffsetX+35*this.parallaxX,g=-t.bHeight/2-270+this.eyeOffsetY+this.browY+35*this.parallaxY,this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,n,g,t.bWidth,t.bHeight,"rgb("+aBrowTints[curBrowTint][0]+","+aBrowTints[curBrowTint][1]+","+aBrowTints[curBrowTint][2]+")"),ctx.restore(),this.renderHair(0);var l=!1;if((hatId>=6||flowerId>=0||glassesId>=0)&&(ctx.save(),ctx.translate(this.x,this.headBotY),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot),l=!0),glassesId>=0){t=getSpriteData(assetLib.getData("faceItems"),"glasses"+glassesId),h=0;1==touchArea&&4==aHairToolOrder[toolId]&&(h=10*Math.random()-5);var c=-t.bWidth/2-40*this.parallaxX,u=-t.bHeight/2-200+this.eyeOffsetY+40*this.parallaxY+h;this.drawTintedImage(ctx,t.img,t.bX,t.bY,t.bWidth,t.bHeight,c,u,t.bWidth,t.bHeight,"rgb("+aGlassesTints[curGlassesTint][0]+","+aGlassesTints[curGlassesTint][1]+","+aGlassesTints[curGlassesTint][2]+")")}if(hatId>=6){t=getSpriteData(assetLib.getData("faceItems"),"hat"+hatId),h=0;1==touchArea&&4==aHairToolOrder[toolId]&&(h=10*Math.random()-5),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2-35*this.parallaxX,-t.bHeight-312+this.aHatOffset[hatId]+40*this.parallaxY+h,t.bWidth,t.bHeight)}if(flowerId>=0){t=getSpriteData(assetLib.getData("faceItems"),"flower"+flowerId),h=0;1==touchArea&&4==aHairToolOrder[toolId]&&(h=10*Math.random()-5),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2+184-35*this.parallaxX+h,-t.bHeight/2-280+40*this.parallaxY,t.bWidth,t.bHeight)}switch(l&&ctx.restore(),this.highlightInc>0&&this.renderHighlight(),this.handState){case 1:t=getSpriteData(assetLib.getData("head1"),"hand"+curSkinTint.toString()+0);ctx.save(),ctx.translate(this.x+this.handX*this.scale*this.handFlip,this.y-tableHeight+this.handY*this.scale),ctx.scale(this.scale*this.handFlip,this.scale),ctx.rotate(this.handRot+.1*Math.sin(15*this.inc*this.waveRate)*this.handFlip),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,-t.bHeight,t.bWidth,t.bHeight),ctx.restore();break;case 2:t=getSpriteData(assetLib.getData("head1"),"hand"+curSkinTint.toString()+0);ctx.save(),ctx.translate(this.x+this.handX*this.scale*this.handFlip,this.y-tableHeight+this.handY*this.scale),ctx.scale(this.scale*this.handFlip,this.scale),ctx.rotate(this.handRot+.1*Math.sin(15*this.inc*this.waveRate)*this.handFlip),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,-t.bHeight,t.bWidth,t.bHeight),ctx.restore();t=getSpriteData(assetLib.getData("head1"),"hand"+curSkinTint.toString()+0);ctx.save(),ctx.translate(this.x+this.handX*this.scale*-this.handFlip,this.y-tableHeight+this.handY*this.scale),ctx.scale(this.scale*-this.handFlip,this.scale),ctx.rotate(this.handRot+.1*Math.sin(15*this.inc*this.waveRate)*-this.handFlip),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,-t.bHeight,t.bWidth,t.bHeight),ctx.restore();break;case 3:t=getSpriteData(assetLib.getData("head1"),"hand"+curSkinTint.toString()+1);ctx.save(),ctx.translate(this.x+this.handX*this.scale*this.handFlip,this.y-tableHeight+this.handY*this.scale),ctx.scale(this.scale*this.handFlip,this.scale),ctx.rotate(this.handRot),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,-t.bHeight,t.bWidth,t.bHeight),ctx.restore();break;case 4:t=getSpriteData(assetLib.getData("head1"),"hand"+curSkinTint.toString()+2);ctx.save(),ctx.translate(this.x+this.handX*this.scale,this.y-tableHeight+this.handY*this.scale),ctx.scale(this.scale,this.scale),ctx.rotate(this.handRot),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,-t.bWidth/2,-t.bHeight,t.bWidth,t.bHeight),ctx.restore()}if(isWide()){t=getSpriteData(assetLib.getData("uiElements"),"table");ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,0,canvas.height-tableHeight,canvas.width-controlDepth,tableHeight)}else{t=getSpriteData(assetLib.getData("uiElements"),"table");ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,0,canvas.height-controlDepth-tableHeight,canvas.width,tableHeight)}},e.prototype.drawTintedImage=function(t,e,a,i,s,h,o,d,r,n,g){var l=document.createElement("canvas");l.width=r,l.height=n;var c=l.getContext("2d");c.drawImage(e,a,i,s,h,0,0,r,n),c.globalCompositeOperation="source-atop",c.fillStyle=g,c.fillRect(0,0,r,n),c.globalCompositeOperation="source-over",t.drawImage(l,o,d)},e}();t.Head=e}(Elements||(Elements={})),function(t){var e=function(){function e(){this.posX=0,this.posY=0,this.minY=80,this.toolWidth=140,this.startMoveX=0,this.startMoveY=0,this.startTouchX=0,this.startTouchY=0,this.gap=150,this.checkMoveX=0,this.checkMoveY=0,this.tabOffset=0,this.tintState=0,this.paletteBuffer=0,this.paletteBorder=4,this.paletteHeight=70,this.oPalettePos={x:0,y:0,width:0,height:0},this.aTabCols=new Array("#F4B46A","#F17EB0","#1DA4C3","#EF6B44","#3EB785","#4043A6","#B665E7"),this.prevToolId=-1,this.highlightX=0,this.highlightY=0,this.resetPos()}return e.prototype.resetPos=function(){this.posY=this.posX=this.minY,this.tintState=0,toolId=0==tabId?0:-1,this.prevToolId=-1},e.prototype.checkTintClick=function(t,e){switch(playSound("tint",.5),tabId){case 0:curHairTint=this.getPaletteCol(t,aHairTints);break;case 1:if(0==toolId)curSkinTint=this.getPaletteCol(t,aSkinTints),aEyeShadowTints[0]=aEyeLidTints[curSkinTint],curEyeShadowTint<=3&&(curEyeShadowTint=curSkinTint);else if(1==toolId)curLipTint=this.getPaletteCol(t,aLipTints);else if(toolId>=2&&toolId<=4)curEyeTint=this.getPaletteCol(t,aEyeTints);else if(toolId>=6&&toolId<=9)curBrowTint=this.getPaletteCol(t,aBrowTints);else if(5==toolId){var a=this.getPaletteCol(t,aEyeShadowTints);curEyeShadowTint=0==a?curSkinTint:a+3}break;case 2:curGlassesTint=this.getPaletteCol(t,aGlassesTints);break;case 4:curVestTint=this.getPaletteCol(t,aVestTints)}},e.prototype.getPaletteCol=function(t,e){return Math.max(Math.min(Math.floor((t-this.paletteBuffer-this.paletteBorder)/((this.oPalettePos.width-2*this.paletteBorder)/e.length)),e.length-1),0)},e.prototype.checkClick=function(t,e){if(this.prevToolId=toolId,isWide()){for(var a=0;a<aToolCount[tabId]/2;a++)if(e-this.posY>a*this.gap-this.toolWidth/2&&e-this.posY<a*this.gap+this.toolWidth/2){toolId=t<canvas.width-controlDepth/2?2*a:2*a+1,playSound("tool",.5);break}}else for(a=0;a<aToolCount[tabId]/2;a++)if(t-this.posX>a*this.gap-this.toolWidth/2&&t-this.posX<a*this.gap+this.toolWidth/2){toolId=e<canvas.height-controlDepth/2?2*a:2*a+1,playSound("tab",.5);break}saveDataHandler.isUnlocked(tabId,toolId)?this.selectTool():(rewardId=toolId,showRewardAd())},e.prototype.toolExplode=function(){for(var e=this,a=0;a<10;a++)setTimeout((function(){var a=new t.Particle(e.highlightX,e.highlightY,25*Math.random()+10,50*Math.random()+25,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!1,"hsl("+Math.floor(360*Math.random())+", 100%, 50%)");aEffects.push(a)}),50*a)},e.prototype.selectTool=function(){switch(tabId){case 0:5==aHairToolOrder[toolId]||15==aHairToolOrder[toolId]?this.tintState=1:this.tintState=0;break;case 1:this.tintState=toolId>=0&&toolId<=9?1:0,this.updateMakeUpItem();break;case 2:this.tintState=toolId<6?1:0,this.updateFaceItem();break;case 4:this.tintState=0==toolId?1:0,this.updateClothItem();break;case 3:this.updateJewelItem();break;case 5:this.updateItemItem();break;case 6:this.updateBgItem()}this.prevToolId!=toolId&&window.PokiSDK.measure("progress","start",(++toolHitCount).toString()),1==this.tintState?hideMirrorBut():(updateGameButs(),updateGameTouch())},e.prototype.updateFaceItem=function(){switch(toolId){case 0:case 1:case 2:case 3:case 4:case 5:glassesId==toolId&&this.prevToolId==toolId?(glassesId=-1,toolId=-1,this.tintState=0,playSound("remove",.5)):(glassesId=toolId,head.highlightItem("glasses"),triggerWear(),Math.random()>.9&&head.triggerEmojis());break;case 6:case 7:case 8:case 9:case 10:case 11:flowerId==toolId-6&&this.prevToolId==toolId?(flowerId=-1,toolId=-1,playSound("remove",.5)):(flowerId=toolId-6,head.highlightItem("flower"),triggerWear(),Math.random()>.9&&head.triggerEmojis());break;case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:hatId==toolId-12&&this.prevToolId==toolId?(hatId=-1,toolId=-1,playSound("remove",.5)):(hatId=toolId-12,head.highlightItem("hat"),triggerWear(),Math.random()>.9&&head.triggerEmojis())}-1!=toolId&&Math.random()>.7&&head.nod()},e.prototype.updateMakeUpItem=function(){switch(toolId){case 2:case 3:case 4:eyeId!=toolId-2&&triggerWear(),eyeId=toolId-2;break;case 6:case 7:case 8:case 9:browId!=toolId-6&&(head.highlightItem("brow"),triggerWear()),browId=toolId-6;break;case 10:case 11:case 12:lashId==toolId-10&&this.prevToolId==toolId?(lashId=-1,toolId=-1,playSound("remove",.5)):(lashId!=toolId-10&&(head.highlightItem("lash"),triggerWear()),lashId=toolId-10,Math.random()>.9&&head.triggerEmojis());break;case 13:case 14:case 15:noseId!=toolId-13&&(head.highlightItem("nose"),triggerWear()),noseId=toolId-13}-1!=toolId&&Math.random()>.7&&head.nod()},e.prototype.updateItemItem=function(){var e;switch(toolId){case 0:e=!0;for(var a=0;a<aItems.length;a++)aItems[a].id==toolId-1&&(aItems[a].remove(),e=!1,curCat=null,saveDataHandler.setCat(0),playSound("remove",.5));e&&(curCat=new t.Cat(toolId-1),aItems.push(curCat),saveDataHandler.setCat(1),Math.random()>.9&&head.triggerEmojis());break;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:e=!0;for(a=0;a<aItems.length;a++)aItems[a].id>=0&&(aItems[a].remove(),playSound("remove",.5),saveDataHandler.setTableItem(-1),aItems[a].id==toolId-1&&(e=!1));if(e){triggerWear();var i=new t.Item(toolId-1);aItems.push(i),saveDataHandler.setTableItem(toolId-1),Math.random()>.9&&head.triggerEmojis()}}-1!=toolId&&Math.random()>.7&&head.nod()},e.prototype.updateBgItem=function(){switch(toolId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:bgId!=toolId&&triggerWear(),bgId=toolId,Math.random()>.9&&head.triggerEmojis()}-1!=toolId&&Math.random()>.7&&head.nod()},e.prototype.updateClothItem=function(){clothId!=toolId&&triggerWear(),clothId=toolId,-1!=toolId&&Math.random()>.7&&head.nod(),Math.random()>.9&&head.triggerEmojis()},e.prototype.updateJewelItem=function(){switch(-1!=toolId&&Math.random()>.7&&head.nod(),toolId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:earringId==toolId&&this.prevToolId==toolId?(earringId=-1,toolId=-1,playSound("remove",.5)):(triggerWear(),earringId=toolId,head.highlightItem("earring"),Math.random()>.9&&head.triggerEmojis());break;case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:jewelId==toolId-12&&this.prevToolId==toolId?(jewelId=-1,toolId=-1,playSound("remove",.5)):(triggerWear(),jewelId=toolId-12,head.highlightItem("jewel"),Math.random()>.9&&head.triggerEmojis())}},e.prototype.addTick=function(t,e,a){var i=!1;switch(tabId){case 1:(browId>-1&&browId==t-6||lashId>-1&&lashId==t-10||noseId>-1&&noseId==t-13||eyeId>-1&&eyeId==t-2)&&(i=!0);break;case 2:(glassesId>-1&&glassesId==t||flowerId>-1&&flowerId==t-6||hatId>-1&&hatId==t-12)&&(i=!0);break;case 4:clothId>-1&&clothId==t&&(i=!0);break;case 3:(jewelId>-1&&jewelId==t-12||earringId>-1&&earringId==t)&&(i=!0);break;case 5:for(var s=!1,h=0;h<aItems.length;h++)aItems[h].id==t-1&&(s=!0);s&&(i=!0);break;case 6:bgId>-1&&bgId==t&&(i=!0)}if(i){var o=getSpriteData(assetLib.getData("uiElements"),"tick"+tabId);ctx.drawImage(o.img,o.bX,o.bY,o.bWidth,o.bHeight,e-o.bWidth/2+115,a-o.bHeight/2+23,o.bWidth,o.bHeight)}},e.prototype.fillRoundedRect=function(t,e,a,i,s,h){t.beginPath(),t.moveTo(e+h,a),t.lineTo(e+i-h,a),t.quadraticCurveTo(e+i,a,e+i,a+h),t.lineTo(e+i,a+s-h),t.quadraticCurveTo(e+i,a+s,e+i-h,a+s),t.lineTo(e+h,a+s),t.quadraticCurveTo(e,a+s,e,a+s-h),t.lineTo(e,a+h),t.quadraticCurveTo(e,a,e+h,a),t.closePath(),t.fill()},e.prototype.update=function(){},e.prototype.renderReward=function(t,e,a){if(!saveDataHandler.isUnlocked(tabId,t)){var i=getSpriteData(assetLib.getData("tools"),"rewardIcon");ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,e-i.bWidth/2+118,a-i.bHeight/2+19,i.bWidth,i.bHeight)}},e.prototype.render=function(){var t,e,a;if(this.oPalettePos={x:0,y:0,width:0,height:this.paletteHeight},isWide()){ctx.fillStyle=this.aTabCols[tabId],ctx.fillRect(canvas.width-controlDepth,0,controlDepth,canvas.height),aToolCount[tabId]<11?this.posY=this.minY+.5*(canvas.height-aToolCount[tabId]/2*this.gap):this.posY=Math.max(Math.min(this.posY,this.minY),-Math.ceil(aToolCount[tabId]/2)*this.gap+canvas.height+this.toolWidth/2),this.posX=canvas.width-10-this.toolWidth-10-this.toolWidth/2;for(var i=0;i<aToolCount[tabId]/2;i++){a=2*i,0==tabId&&(a=aHairToolOrder[2*i]);var s=getSpriteData(assetLib.getData("tools"),"tool"+tabId.toString()+a);t=this.posX-s.bWidth/2,e=this.posY-s.bHeight/2+this.gap*i,ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,t,e,s.bWidth,s.bHeight),this.addTick(2*i,t,e),this.renderReward(2*i,t,e),a=2*i+1,0==tabId&&(a=aHairToolOrder[2*i+1]);s=getSpriteData(assetLib.getData("tools"),"tool"+tabId.toString()+a);t=this.posX+10+this.toolWidth-s.bWidth/2,e=this.posY-s.bHeight/2+this.gap*i,ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,t,e,s.bWidth,s.bHeight),this.addTick(2*i+1,t,e),this.renderReward(2*i+1,t,e),2*i==toolId?(this.highlightX=this.posX,this.highlightY=this.posY+this.gap*i):2*i+1==toolId&&(this.highlightX=this.posX+10+this.toolWidth,this.highlightY=this.posY+this.gap*i)}this.tabOffset=0,this.oPalettePos.x=this.paletteBuffer,this.oPalettePos.y=canvas.height-this.paletteBuffer-this.oPalettePos.height,this.oPalettePos.width=canvas.width-controlDepth-2*this.paletteBuffer}else{ctx.fillStyle=this.aTabCols[tabId],ctx.fillRect(0,canvas.height-controlDepth,canvas.width,controlDepth),aToolCount[tabId]<11?this.posX=this.minY+.5*(canvas.width-aToolCount[tabId]/2*this.gap):this.posX=Math.max(Math.min(this.posX,this.minY),-Math.ceil(aToolCount[tabId]/2)*this.gap+canvas.width+this.toolWidth/2),this.posY=canvas.height-10-this.toolWidth-10-this.toolWidth/2;for(i=0;i<aToolCount[tabId]/2;i++){a=2*i,0==tabId&&(a=aHairToolOrder[2*i]);s=getSpriteData(assetLib.getData("tools"),"tool"+tabId.toString()+a);t=this.posX-s.bWidth/2+this.gap*i,e=this.posY-s.bHeight/2,ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.posX-s.bWidth/2+this.gap*i,this.posY-s.bHeight/2,s.bWidth,s.bHeight),this.addTick(2*i,t,e),this.renderReward(2*i,t,e),a=2*i+1,0==tabId&&(a=aHairToolOrder[2*i+1]);s=getSpriteData(assetLib.getData("tools"),"tool"+tabId.toString()+a);t=this.posX-s.bWidth/2+this.gap*i,e=this.posY+10+this.toolWidth-s.bHeight/2,ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.posX-s.bWidth/2+this.gap*i,this.posY+10+this.toolWidth-s.bHeight/2,s.bWidth,s.bHeight),this.addTick(2*i+1,t,e),this.renderReward(2*i+1,t,e),2*i==toolId?(this.highlightX=this.posX+this.gap*i,this.highlightY=this.posY):2*i+1==toolId&&(this.highlightX=this.posX+this.gap*i,this.highlightY=this.posY+10+this.toolWidth)}this.tabOffset=78,this.oPalettePos.x=this.paletteBuffer,this.oPalettePos.y=canvas.height-controlDepth-this.tabOffset-this.paletteBuffer-this.oPalettePos.height-5,this.oPalettePos.width=canvas.width-2*this.paletteBuffer}if(toolId>=0)if(tabId>0||0==tabId&&Math.sin(10*head.inc)>.5){s=getSpriteData(assetLib.getData("tools"),"toolHighlight0");ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.highlightX-s.bWidth/2,this.highlightY-s.bHeight/2,s.bWidth,s.bHeight)}else{s=getSpriteData(assetLib.getData("tools"),"toolHighlight1");ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.highlightX-s.bWidth/2,this.highlightY-s.bHeight/2,s.bWidth,s.bHeight)}if(1==this.tintState||2==this.tintState){var h=void 0,o=void 0;switch(tabId){case 0:h=curHairTint,o=aHairTints;break;case 1:0==toolId?(h=curSkinTint,o=aSkinTints):1==toolId?(h=curLipTint,o=aLipTints):toolId>=2&&toolId<=4?(h=curEyeTint,o=aEyeTints):toolId>=6&&toolId<=9?(h=curBrowTint,o=aBrowTints):5==toolId&&(o=aEyeShadowTints,(h=curEyeShadowTint)<=3?h=0:h-=3);break;case 2:h=curGlassesTint,o=aGlassesTints;break;case 4:h=curVestTint,o=aVestTints}1==this.tintState?ctx.fillStyle="#82786A":2==this.tintState&&(ctx.fillStyle="rgba(0, 0, 0, 0)"),ctx.fillRect(this.oPalettePos.x,this.oPalettePos.y,this.oPalettePos.width,this.oPalettePos.height);var d=(this.oPalettePos.width-2*this.paletteBorder)/o.length;for(i=0;i<o.length;i++){1==this.tintState?ctx.fillStyle="rgb("+o[i][0]+","+o[i][1]+","+o[i][2]+")":2==this.tintState&&(ctx.fillStyle="rgba("+o[i][0]+","+o[i][1]+","+o[i][2]+", .1)");var r=.95*d,n=.95*(this.oPalettePos.height-2*this.paletteBorder),g=this.oPalettePos.x+this.paletteBorder+d*i+d/2-r/2,l=this.oPalettePos.y+this.oPalettePos.height/2-n/2,c=Math.min(6,r/2,n/2);this.fillRoundedRect(ctx,g,l,r,n,c)}if(1==this.tintState){s=getSpriteData(assetLib.getData("uiElements"),"tickPalette");ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.oPalettePos.x+this.paletteBorder+d*h+.95*d-17-s.bWidth/2,this.oPalettePos.y+this.paletteBorder+20-s.bHeight/2,s.bWidth,s.bHeight)}}},e}();t.Tools=e}(Elements||(Elements={})),function(t){var e=function(){function t(t,e,a,i,s,h,o,d,r){void 0===a&&(a=1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===h&&(h=360*Math.random()*radian),void 0===o&&(o=0),void 0===d&&(d=!1),void 0===r&&(r="#FFFFFF"),this.x=0,this.y=0,this.inc=0,this.removeMe=!1,this.time=0,this.ranNum=10*Math.random(),this.gravityInc=0,this.radius=0,this.maxRadius=a,this.dir=h,this.speed=i,this.time=s,d&&(this.gravityInc=500),this.x=t+o*Math.cos(this.dir),this.y=e+o*Math.sin(this.dir),this.colour=r}return t.prototype.update=function(){this.inc+=delta,this.radius=this.maxRadius+easeInCubic(this.inc/this.time)*(0-this.maxRadius),this.x+=this.speed*this.radius*.1*Math.cos(this.dir)*delta,this.y+=this.speed*this.radius*.1*Math.sin(this.dir)*delta,this.y+=this.gravityInc*delta,this.inc>=this.time&&(this.removeMe=!0)},t.prototype.render=function(){this.radius>0&&(ctx.beginPath(),ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),ctx.fillStyle=this.colour,ctx.fill())},t}();t.Particle=e}(Elements||(Elements={})),function(t){var e=function(){function t(t,e,a,i,s,h,o,d,r){void 0===a&&(a=1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===h&&(h=360*Math.random()*radian),void 0===o&&(o=0),void 0===d&&(d=!1),void 0===r&&(r="#FFFFFF"),this.x=0,this.y=0,this.inc=0,this.removeMe=!1,this.time=0,this.ranNum=10*Math.random(),this.thickness=10*Math.random()+5,this.rot=Math.random()*Math.PI,this.vy=500*Math.random()-400,this.radius=0,this.maxRadius=a,this.dir=h,this.speed=i,this.time=s,this.hasGravity=d,this.x=t+o*Math.cos(this.dir),this.y=e+o*Math.sin(this.dir),this.colour=r}return t.prototype.update=function(){this.inc+=delta,this.radius=this.maxRadius+easeInCubic(this.inc/this.time)*(0-this.maxRadius),this.x+=this.speed*this.radius*.1*Math.cos(this.dir)*delta,this.y+=this.speed*this.radius*.1*Math.sin(this.dir)*delta,this.hasGravity&&(this.vy+=1e3*delta,this.y+=this.vy*delta),this.inc>=this.time&&(this.removeMe=!0)},t.prototype.render=function(){this.radius>0&&(ctx.beginPath(),ctx.strokeStyle=this.colour,ctx.lineWidth=this.thickness,ctx.moveTo(this.x+this.radius*Math.cos(this.rot),this.y+this.radius*Math.sin(this.rot)),ctx.lineTo(this.x-this.radius*Math.cos(this.rot),this.y-this.radius*Math.sin(this.rot)),ctx.stroke())},t}();t.Shard=e}(Elements||(Elements={})),function(t){var e=function(){function t(t,e,a,i,s,h,o,d,r){void 0===a&&(a=1),void 0===i&&(i=0),void 0===s&&(s=1),void 0===h&&(h=360*Math.random()*radian),void 0===o&&(o=0),void 0===d&&(d=!1),void 0===r&&(r=0),this.x=0,this.y=0,this.inc=0,this.removeMe=!1,this.time=0,this.ranNum=10*Math.random(),this.gravityInc=0,this.radius=0,this.maxRadius=a,this.dir=h,this.speed=i,this.time=s,d&&(this.gravityInc=500),this.x=t+o*Math.cos(this.dir),this.y=e+o*Math.sin(this.dir),this.id=0}return t.prototype.update=function(){this.inc+=delta,this.radius=this.maxRadius+easeInCubic(this.inc/this.time)*(0-this.maxRadius),this.x+=this.speed*this.radius*.3*Math.cos(this.dir)*delta,this.y+=this.speed*this.radius*.3*Math.sin(this.dir)*delta,this.y+=this.gravityInc*delta,this.inc>=this.time&&(this.removeMe=!0)},t.prototype.render=function(){if(this.radius>0){var t=getSpriteData(assetLib.getData("uiElements"),"emoji"+this.id);ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,this.x-t.bWidth/2*this.radius,this.y-t.bHeight/2*this.radius,t.bWidth*this.radius,t.bHeight*this.radius)}},t}();t.Emoji=e}(Elements||(Elements={})),function(t){var e=function(){function e(t){this.x=0,this.y=0,this.inc=0,this.removeMe=!1,this.itemTot=5,this.bottom=canvas.height,this.cutScale=1,this.gravity=50,this.state=0,this.vy=0,this.aPos=new Array({x:-5,y:24,hitY:300,aCols:["#044C6E","#62884D","#A6C158"]},{x:-15.5,y:13,hitY:400,aCols:["#00486B","#FEB1B0"]},{x:16,y:14,hitY:350,aCols:["#A95FB9","#A95FB9"]},{x:-36,y:93,hitY:400,aCols:["#FAF5E5","#658554"]},{x:-8,y:32,hitY:300,aCols:["#FC4F4F"]},{x:14,y:30,hitY:350,aCols:["#406E22","#CC3F40"]},{x:-6,y:78,hitY:300,aCols:["#FFF1B8","#FFBC00","#317C34"]},{x:-28,y:51,hitY:350,aCols:["#216A4B","#BA79CD","#8C52AB"]},{x:8,y:27,hitY:400,aCols:["#287856","#5E87D7"]}),this.growTime=0,this.id=t,isWide()?this.y=canvas.height-tableHeight-(200*Math.random()+200):this.y=canvas.height-controlDepth-tableHeight-(200*Math.random()+200),this.setPos(),this.puff()}return e.prototype.remove=function(){this.puff(),this.removeMe=!0},e.prototype.puff=function(){for(var e=0;e<5;e++){var a=new t.Particle(this.x,this.y,25*Math.random()+10,50*Math.random()+25,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!1,"#FFFFFF");aEffects.push(a)}},e.prototype.setPos=function(){isWide()?(this.bottom=canvas.height-35,this.x=head.x+250*head.scale+.75*(canvas.width-controlDepth-170-(head.x+250*head.scale))):(this.bottom=canvas.height-controlDepth-90,this.x=canvas.width-80)},e.prototype.cut=function(){this.state=1,this.growTime=5,this.y==this.bottom&&(this.vy=-1,this.y=this.bottom-20),playSound("plantCut");for(var e=this.aPos[this.id].aCols,a=0;a<50;a++){var i=new t.Shard(this.x,this.y-this.aPos[this.id].hitY,4*Math.random()+3,200*Math.random()+100,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!0,e[Math.floor(Math.random()*e.length)]);aEffects.push(i)}},e.prototype.regrow=function(){this.state=0,this.cutScale=.01,this.y==this.bottom&&(this.vy=-1,this.y=this.bottom-20),TweenLite.to(this,.5,{cutScale:1,ease:"Quint.easeOut",onComplete:function(){}})},e.prototype.update=function(){this.setPos(),0==this.state&&1==touchArea&&-1!==[1,10,11].indexOf(aHairToolOrder[toolId])&&touchY>this.y-400&&touchX>this.x-120?this.cut():1==this.state&&(this.growTime-=delta,this.growTime<=0&&this.regrow()),this.y<this.bottom&&(this.vy+=this.gravity*delta,this.y+=this.vy),this.y>this.bottom&&(Math.abs(this.vy)>5?(this.vy*=-.5,this.y=this.bottom-1,playSound("vaseBounce",.5)):(this.vy=0,this.y=this.bottom))},e.prototype.render=function(t){void 0===t&&(t=!1);var e=0;t&&(e=isWide()?40-(tableHeight-15):40-(tableHeight-70-20));var a=0;1==touchArea&&4==aHairToolOrder[toolId]&&(a=-5*Math.random());var i=(s=getSpriteData(assetLib.getData("items"),"item0"+this.id)).bHeight;if(ctx.drawImage(s.img,s.bX,s.bY,s.bWidth,s.bHeight,this.x-s.bWidth/2,this.y-i+a+e,s.bWidth,i),0==this.state){var s=getSpriteData(assetLib.getData("items"),"item1"+this.id);ctx.drawImage(s.img,s.bX,s.bY+s.bHeight*(1-this.cutScale),s.bWidth,s.bHeight*this.cutScale,this.x-(s.bWidth/2-this.aPos[this.id].x),this.y-i+a-s.bHeight*this.cutScale+this.aPos[this.id].y+e,s.bWidth,s.bHeight*this.cutScale)}},e}();t.Item=e}(Elements||(Elements={})),function(t){var e=function(){function e(t){this.x=0,this.y=0,this.removeMe=!1,this.scale=1,this.tailRot=0,this.inc=0,this.headRot=0,this.earRot=0,this.headState=0,this.eyeId=0,this.eyeState=0,this.eyeInc=1,this.headY=0,this.tailRate=5,this.tailRange=.1,this.tailPhase=0,this.earTwitchRot=0,this.earTwitchInc=0,this.canTouch=!0,this.id=t,this.setPos(),this.puff(),setTimeout((function(){playSound("cat0")}),800)}return e.prototype.remove=function(){this.puff(),this.removeMe=!0},e.prototype.setPos=function(){isWide()?(this.x=80,this.y=canvas.height-15):(this.x=80,this.y=canvas.height-controlDepth-70-20),this.bottom=canvas.height},e.prototype.puff=function(){for(var e=0;e<5;e++){var a=new t.Particle(this.x+75,this.y-100,25*Math.random()+10,50*Math.random()+25,1*Math.random()+1,360*Math.random()*radian,100*Math.random(),!1,"#FFFFFF");aEffects.push(a)}},e.prototype.twitchEar=function(){var t=this;this.earTwitchTween=TweenLite.to(this,.3,{earTwitchRot:(40*Math.random()-20)*radian,ease:"Cubic.easeOut",onComplete:function(){t.earTwitchTween=TweenLite.to(t,.5*Math.random()+.5,{earTwitchRot:0,ease:"Back.easeOut",delay:2*Math.random(),onComplete:function(){}})}})},e.prototype.duck=function(){var t=this;this.headState=1,this.headTween&&this.headTween.kill(),this.eyeId=3,this.eyeInc=1,1==touchArea?playSound("cat1"):Math.random()>.3&&playSound("cat"+Math.floor(3*Math.random()+2),.8),this.headTween=TweenLite.to(this,.3,{headY:1,headRot:0*radian,earRot:-30*radian,ease:"Cubic.easeOut",onComplete:function(){t.headTween=TweenLite.to(t,1,{headY:0,ease:"Cubic.easeInOut",delay:1,onComplete:function(){t.headState=0}})}})},e.prototype.tailBoost=function(){var t=this;this.tailTween&&this.tailTween.kill(),this.headState=2,this.tailTween=TweenLite.to(this,.5,{tailRange:.2,tailRate:20,headRot:-20*radian,ease:"Cubic.easeOut",onComplete:function(){t.tailTween=TweenLite.to(t,1,{tailRange:.1,tailRate:5,ease:"Cubic.easeIn",delay:2,onComplete:function(){t.headState=0}})}})},e.prototype.update=function(){if(this.inc+=delta,this.setPos(),0===this.headState){var t=Math.atan2(userInput.mouseY-(this.y-120*this.scale),userInput.mouseX-(this.x+95*this.scale))+20*radian;this.headRot-=.05*(this.headRot-Math.min(Math.max(t,-.5),.3)),this.earRot-=.1*this.earRot,this.earTwitchInc-=delta,this.earTwitchInc<0&&(this.earTwitchInc=4*Math.random()+5,this.twitchEar()),userInput.mouseX<this.x+200*this.scale&&userInput.mouseY>this.y-300*this.scale?this.canTouch&&(this.duck(),this.canTouch=!1):this.canTouch||(this.canTouch=!0)}this.tailPhase+=this.tailRate*delta,this.tailRot=Math.sin(this.tailPhase)*this.tailRange-0*radian,0==this.eyeState&&(this.eyeInc-=delta,this.eyeInc<0&&(Math.random()>.8?(this.eyeId=3,this.eyeInc=.2):(this.eyeInc=1*Math.random()+1,this.eyeId=Math.floor(3*Math.random()))))},e.prototype.render=function(t){void 0===t&&(t=!1);var e=0;t&&(e=isWide()?-(tableHeight-15)+50*this.scale:-(tableHeight-70-20)+50*this.scale);var a=0;1==touchArea&&4==aHairToolOrder[toolId]&&(a=-.1*Math.random());var i=getSpriteData(assetLib.getData("items"),"cTail");ctx.save(),ctx.translate(this.x+10*this.scale,this.y-25*this.scale+e),ctx.scale(this.scale,this.scale),ctx.rotate(this.tailRot+a),ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,-i.bWidth,-i.bHeight,i.bWidth,i.bHeight),ctx.restore();i=getSpriteData(assetLib.getData("items"),"cBody");ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,this.x,this.y-i.bHeight+e,i.bWidth,i.bHeight),ctx.save(),ctx.translate(this.x+130*this.scale,this.y-(175-40*this.headY)*this.scale+e),ctx.scale(this.scale,this.scale),ctx.rotate(this.headRot);i=getSpriteData(assetLib.getData("items"),"cEar0");ctx.save(),ctx.translate(-0,-75),ctx.rotate(this.earRot+a-this.earTwitchRot),ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,-i.bWidth,.75*-i.bHeight,i.bWidth,i.bHeight),ctx.restore();i=getSpriteData(assetLib.getData("items"),"cEar1");ctx.save(),ctx.translate(20,-60),ctx.rotate(-this.earRot-a+this.earTwitchRot),ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,0,-i.bHeight,i.bWidth,i.bHeight),ctx.restore();var s=this.eyeId;0!=a&&(s=3);i=getSpriteData(assetLib.getData("items"),"cHead"+s);ctx.drawImage(i.img,i.bX,i.bY,i.bWidth,i.bHeight,-75,.75*-i.bHeight,i.bWidth,i.bHeight),ctx.restore()},e}();t.Cat=e}(Elements||(Elements={})),function(t){var e=function(){function t(){this.x=0,this.y=0,this.frame=0,this.rot=0,this.inc=0,this.prevX=0,this.prevY=0,this.flipX=!1,this.addRot=0,this.playSnip=!1}return t.prototype.update=function(){var t,e;switch(this.inc+=delta,this.x=userInput.mouseX,this.y=userInput.mouseY,this.id=toolId.toString(),1==toolId||17==toolId?1==touchArea?Math.floor(10*this.inc)%2==0?(this.id+="0",this.playSnip&&(1==toolId?playSound("scissors0"+Math.floor(5*Math.random())):17==toolId&&playSound("scissors1"),this.playSnip=!1)):(this.id+="1",this.playSnip=!0):this.id+="0":this.id+=14==toolId&&1==touchArea?"1":"0",toolId){case 10:case 11:case 12:case 13:case 16:case 9:case 14:this.directAim(),1==touchArea?this.addRot+=.2*Math.sin(25*this.inc):this.addRot=0;break;case 8:this.directAim(),1==touchArea?this.addRot+=.1*Math.sin(75*this.inc):this.addRot=0;break;case 0:1==touchArea?(this.directAim(),this.addRot+=.05*Math.sin(20*this.inc)):this.addRot=0;break;case 15:t=head.x-userInput.mouseX,e=head.y-700*head.scale-userInput.mouseY,this.rot=Math.atan2(e,t);break;case 1:case 17:this.directAim();break;case 2:case 3:case 6:case 5:case 7:this.rot=0,this.addRot=1==touchArea?.1*Math.sin(50*this.inc):0,this.flipX=!1;break;case 4:t=head.x-userInput.mouseX,e=head.y-700*head.scale-userInput.mouseY,this.rot=Math.atan2(e,t),this.flipX=Math.abs(this.rot)>Math.PI/2,1==touchArea?this.addRot+=.1*Math.sin(75*this.inc):this.addRot=0}},t.prototype.directAim=function(){var t=userInput.mouseX-this.prevX,e=userInput.mouseY-this.prevY;if(0!==t||0!==e){var a=Math.atan2(e,t)-this.rot;a=Math.atan2(Math.sin(a),Math.cos(a)),this.rot+=.2*a,this.rot=Math.atan2(Math.sin(this.rot),Math.cos(this.rot))}this.prevX=userInput.mouseX,this.prevY=userInput.mouseY},t.prototype.render=function(){var t=getSpriteData(assetLib.getData("uiElements"),"cursor"+this.id);ctx.save(),ctx.translate(this.x,this.y),this.flipX?(ctx.scale(1,-1),ctx.rotate(-this.rot+this.addRot)):ctx.rotate(this.rot+this.addRot);var e=.5*-t.bWidth;"80"==this.id&&(e=.75*-t.bWidth),ctx.drawImage(t.img,t.bX,t.bY,t.bWidth,t.bHeight,e,-t.bHeight/2,t.bWidth,t.bHeight),ctx.restore()},t}();t.Cursor=e}(Elements||(Elements={})),function(t){var e=function(){function t(t){this.dataGroupNum=2,this.addedIndex=50,this.aLockedTools=new Array([7,11,12],[9,12],[3,11,15,22],[5,10,17,22],[5,12,19],[0,5,6,8],[3,4,10]),this.saveDataId=t;var e,a="test",i=!1;try{e=window.localStorage,i=!0}catch(t){console.log("local storage denied"),i=!1,this.canStore=!1}if(i)try{e.setItem(a,"1"),e.removeItem(a),this.canStore=!0}catch(t){this.canStore=!1}this.clearData(),this.setInitialData()}return t.prototype.clearData=function(){this.aLevelStore=new Array,this.aLevelStore.push(0),this.aLevelStore.push(0),this.aLevelStore.push(0);for(var t=0;t<47;t++)this.aLevelStore.push(0);for(t=0;t<this.aLockedTools.length;t++)for(var e=0;e<this.aLockedTools[t].length;e++)this.aLevelStore.push(t.toString()+"0")},t.prototype.resetData=function(){this.clearData(),this.saveData()},t.prototype.setInitialData=function(){if(this.canStore&&"undefined"!=typeof Storage)if(null!=localStorage.getItem(this.saveDataId)&&""!=localStorage.getItem(this.saveDataId)){this.aLevelStore=localStorage.getItem(this.saveDataId).split(",");for(var t=0;t<this.aLevelStore.length;t++)t<this.addedIndex&&(this.aLevelStore[t]=parseInt(this.aLevelStore[t]))}else this.saveData()},t.prototype.getStartComboId=function(){return this.aLevelStore[2]},t.prototype.addStartComboId=function(){this.aLevelStore[2]++,this.saveData()},t.prototype.setTableItem=function(t){this.aLevelStore[0]=t+1,this.saveData()},t.prototype.getTableItem=function(){return this.aLevelStore[0]-1},t.prototype.setCat=function(t){this.aLevelStore[1]=t,this.saveData()},t.prototype.getCat=function(){return parseInt(this.aLevelStore[1])},t.prototype.isUnlocked=function(t,e){var a=!0,i=this.aLockedTools[t].indexOf(e);if(void 0===i)return!1;for(var s=0,h=this.addedIndex;h<this.aLevelStore.length;h++)if(parseInt(this.aLevelStore[h].charAt(0))==t){if(s==i&&0==parseInt(this.aLevelStore[h].charAt(1))){a=!1;break}s++}return a},t.prototype.unlockItem=function(t,e){var a=this.aLockedTools[t].indexOf(e);if(void 0!==a){for(var i=0,s=this.addedIndex;s<this.aLevelStore.length;s++)if(parseInt(this.aLevelStore[s].charAt(0))==t){if(i==a){this.aLevelStore[s]=t.toString()+"1";break}i++}this.saveData()}},t.prototype.saveData=function(){if(this.canStore&&"undefined"!=typeof Storage){for(var t="",e=0;e<this.aLevelStore.length;e++)t+=this.aLevelStore[e],e<this.aLevelStore.length-1&&(t+=",");localStorage.setItem(this.saveDataId,t)}},t}();t.SaveDataHandler=e}(Utils||(Utils={}));var previousTime,canvasX,canvasY,sound,music,assetLib,preAssetLib,delta,curSoundLoop,requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60,(new Date).getTime())},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d",{alpha:!0}),maxWidth=850,minWidth=850,maxHeight=850,minHeight=850,canvasScale=1,isRotated=!1,div=document.getElementById("canvas-wrapper"),assetIdInc=0,audioType=0,muted=!1,splashTimer=0,isMobile=!1,gameState="loading",aLangs=new Array("EN"),curLang="",isBugBrowser=!1,isIE10=!1,radian=Math.PI/180,ios9FirstTouch=!1,hasFocus=!0,saveDataHandler=new Utils.SaveDataHandler("divahairsalon_v1"),testVar=">";navigator.userAgent.match(/MSIE\s([\d]+)/)&&(isIE10=!0);var deviceAgent=navigator.userAgent.toLowerCase();(deviceAgent.match(/(iphone|ipod|ipad)/)||deviceAgent.match(/(android)/)||deviceAgent.match(/(iemobile)/)||deviceAgent.match(/iphone/i)||deviceAgent.match(/ipad/i)||deviceAgent.match(/ipod/i)||deviceAgent.match(/blackberry/i)||deviceAgent.match(/bada/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(isMobile=!0,deviceAgent.match(/(android)/)&&!/Chrome/.test(navigator.userAgent)&&(isBugBrowser=!0));var userInput=new Utils.UserInput(canvas,isBugBrowser);function visibleResume(){hasFocus||(userInput&&userInput.checkKeyFocus(),"suspended"==Howler.ctx.state&&Howler.ctx.resume(),muted||"pause"==gameState||"splash"==gameState||"loading"==gameState||(Howler.mute(!1),playMusic())),hasFocus=!0}function visiblePause(){hasFocus=!1,Howler.mute(!0),music.pause()}function playMusic(){music.playing()||music.play()}function isStock(){var t=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return t&&parseFloat(t[1])<537}resizeCanvas(),window.onresize=function(){setTimeout((function(){resizeCanvas()}),1)},window.onpageshow=function(){hasFocus||(userInput&&userInput.checkKeyFocus(),muted||"pause"==gameState||"splash"==gameState||"loading"==gameState||(Howler.mute(!1),playMusic())),hasFocus=!0},window.onpagehide=function(){hasFocus=!1,Howler.mute(!0),music.pause()},window.addEventListener("load",(function(){setTimeout((function(){resizeCanvas()}),0),window.addEventListener("orientationchange",(function(){setTimeout((function(){resizeCanvas()}),500),setTimeout((function(){resizeCanvas()}),2e3)}),!1)}));var panel,background,ua=navigator.userAgent,isSharpStock=/SHL24|SH-01F/i.test(ua)&&isStock(),isXperiaAStock=/SO-04E/i.test(ua)&&isStock(),isFujitsuStock=/F-01F/i.test(ua)&&isStock();isIE10||isSharpStock||isXperiaAStock||isFujitsuStock||void 0===window.AudioContext&&void 0===window.webkitAudioContext&&-1!=navigator.userAgent.indexOf("Android")?audioType=0:(audioType=1,sound=new Howl({src:["audio/sound.mp3"],sprite:{addVol:[0,148.07256235827666],blowDry:[1500,1344.8299319727894],brush:[4e3,575.2154195011334],bubble0:[5500,652.176870748299],bubble1:[7e3,652.176870748299],bubble2:[8500,652.176870748299],bubble3:[1e4,1304.0136054421775],cat0:[12500,786.757369614513],cat1:[14e3,762.9024943310653],cat2:[15500,539.9546485260771],cat3:[17e3,1155.8956916099773],cat4:[19500,718.5487528344687],colour0:[21e3,193.10657596371783],colour1:[22500,89.54648526077236],colour2:[24e3,86.41723356009123],colour3:[25500,75.28344671201737],comb:[27e3,559.0022675736961],crimp:[28500,434.82993197278927],curl:[3e4,451.7913832199554],plantCut:[31500,897.0068027210871],remove:[33e3,366.66666666666714],reset:[34500,1468.6621315192738],reward:[37e3,1918.4126984126947],scissors00:[39500,124.28571428571189],scissors01:[41e3,124.28571428571189],scissors02:[42500,152.97052154195256],scissors03:[44e3,152.97052154195256],scissors04:[45500,143.42403628118205],scissors1:[47e3,148.20861678004604],shaver:[48500,965.5555555555537],shimmer:[5e4,1009.569160997735],shower:[52500,1190.362811791381],silence:[55e3,502.8798185941028],straighten:[56500,792.6984126984138],tab:[58e3,109.3424036281192],takePhoto:[59500,575.6462585034044],tongue:[61e3,254.3990929705231],vaseBounce:[62500,168.29931972789325],vocalPos0:[64e3,1084.7619047619048],vocalPos1:[66500,2063.6734693877515],vocalPos2:[7e4,1204.1269841269866],vocalPos3:[72500,783.5147392290196],vocalPos4:[74e3,1061.882086167799],vocalPos5:[76500,732.7891156462556],vocalPos6:[78e3,1077.8004535147402],vocalPos7:[80500,933.4467120181387],wear0:[82e3,606.6666666666691],wear1:[83500,583.9682539682514],wear2:[85e3,699.9092970521588],wear3:[86500,642.5623582766491],frizz:[88e3,881.8594104308346],hearts0:[89500,1212.3582766439968],hearts1:[92e3,2298.095238095243],hearts2:[95500,1918.4126984126947],hearts3:[98e3,1723.2199546485276],mirror0:[100500,674.3764172335602],mirror1:[102e3,627.0748299319706],mirror2:[103500,674.3764172335602],pieceSuccess0:[105e3,1973.6961451247198],pieceSuccess1:[107500,1861.7687074829946],pieceSuccess2:[11e4,1985.1473922902442],pieceSuccess3:[112500,1891.0430839002288],pieceSuccess4:[115e3,1980.8163265306148],tool:[117500,269.9319727891094],tint:[119e3,131.20181405895437],grow:[120500,445.28344671201125],mmn0:[122e3,491.723356009075],mmn1:[123500,965.5555555555537],mmn2:[125e3,738.9115646258517],mmn3:[126500,443.15192743763987],mmn4:[128e3,733.106575963717],mmn5:[129500,667.5510204081547],mmn6:[131e3,804.6258503401305],mmn7:[132500,369.2063492063369],mmn8:[134e3,1066.8707482993227],gasp0:[136500,482.51700680270915],gasp1:[138e3,799.4104308390035],gasp2:[139500,571.4058956916119],gasp3:[141e3,532.1541950113442]}}),music=new Howl({src:["audio/music.mp3"],volume:0,loop:!0}));var panelFrame,oLogoBut,musicTween,head,tools,curCat,aEffects,aItems,cursor,totalScore=0,levelScore=0,levelNum=0,aTutorials=new Array,oLogoData={},oImageIds={},controlDepth=310,touchX=0,touchY=0,toolCount=14,firstRun=!0,aToolCount=new Array(18,16,24,24,24,10,12),aHairToolOrder=new Array(0,1,2,3,4,6,5,15,10,7,8,14,17,16,9,13,11,12),vocalInc=0,touchArea=0,toolId=0,hatId=-1,earringId=-1,glassesId=-1,flowerId=-1,tableHeight=140,firstTouch=!1,aWaterTints=new Array("#C7F5FA","#9CF6FF","#74F3FF","#61E6FC","#51D1FC"),aHairTints=new Array([1,235,225],[77,253,16],[255,246,0],[255,168,0],[255,0,0],[255,0,220],[202,28,253],[107,87,255],[47,168,255],[51,51,51],[240,240,240]),aGlassesTints=new Array([255,255,255],[51,51,51],[220,33,195],[182,54,219],[114,99,222],[76,165,229],[47,219,212],[107,236,62],[247,241,60],[255,182,0],[216,30,30]),aSkinTints=new Array([255,181,166],[236,159,106],[207,126,78],[142,67,31]),aLipTints=new Array([252,101,99],[255,76,9],[255,19,120],[158,35,42],[231,15,5]),aBrowTints=new Array([0,0,0],[135,30,30],[146,41,131],[126,54,147],[91,82,151],[84,134,170],[80,176,171],[121,193,96],[223,220,119],[184,135,79],[53,53,53],[233,233,233]),aEyeTints=new Array([63,133,229],[0,189,152],[0,189,28],[250,122,0],[255,84,107],[255,79,220],[167,52,232],[108,62,116]),aEyeLidTints=new Array([244,132,127],[232,120,82],[217,98,57],[189,65,33]),aEyeShadowTints=new Array([0,0,0],[102,153,255],[41,154,75],[255,166,0],[255,56,208],[255,237,107],[107,255,153],[255,224,3],[57,210,255],[80,207,199],[221,164,224]),aVestTints=new Array([201,2,174],[160,25,200],[88,72,203],[48,142,210],[17,200,192],[80,218,33],[230,223,31],[215,123,17],[197,0,0],[51,51,51],[240,240,240]),aAllowedBrows=new Array(0,1,2),aAllowedLashes=new Array(0,1),aAllowedGlasses=new Array(0,1,2,4,5),aAllowedFlowers=new Array(0,1,2,4,5),aAllowedHats=new Array(0,1,2,4,5,6,7,8,9,11),aAllowedEarrings=new Array(0,1,2,3,4,6,7,8,9,11),aAllowedJewels=new Array(0,1,2,3,4,6,7,8,9,11),aAllowedClothes=new Array(0,1,2,3,4,6,7,8,9,10,11,13,14,15,16,17,18,20,21,22,23),aAllowedBgs=new Array(0,1,2,5,6,7,8,9,11),rewardId=null,curEyeShadowTint=0,curEyeTint=0,curBrowTint=0,curHairTint=0,curGlassesTint=0,curSkinTint=0,curLipTint=0,tabId=0,browId=0,clothId=0,jewelId=-1,lashId=-1,curVestTint=0,firstMeaningful=!1,toolHitCount=0,bgId=0,noseId=0,eyeId=0,encodedCharString="",firstHairTouch=!1,firstBlow=!1,firstColour=!1,firstShimmer=!1,firstGrow=!1,encodeTest="",growHintState=0,aItemShadowOffsets=new Array(8,6,-5,10,20),aHairData=new Array([{id:2,x:164,y:-115},{id:2,x:168,y:-103},{id:2,x:172,y:-91},{id:2,x:176,y:-79},{id:2,x:178,y:-67},{id:2,x:180,y:-55},{id:2,x:181,y:-42},{id:2,x:181,y:-31},{id:2,x:181,y:-19},{id:2,x:158,y:-126},{id:2,x:-165,y:-115},{id:2,x:-169,y:-103},{id:2,x:-173,y:-91},{id:2,x:-176,y:-79},{id:2,x:-178,y:-67},{id:2,x:-181,y:-55},{id:2,x:-181,y:-42},{id:2,x:-182,y:-31},{id:2,x:-181,y:-19},{id:2,x:-158,y:-126},{id:0,x:-5,y:-202},{id:0,x:0,y:-193},{id:0,x:3,y:-219},{id:0,x:8,y:-193},{id:0,x:18,y:-192},{id:0,x:26,y:-190},{id:0,x:35,y:-189},{id:0,x:43,y:-187},{id:0,x:53,y:-184},{id:0,x:63,y:-183},{id:0,x:72,y:-180},{id:0,x:13,y:-201},{id:0,x:23,y:-200},{id:0,x:33,y:-199},{id:0,x:42,y:-196},{id:0,x:52,y:-193},{id:0,x:61,y:-190},{id:0,x:70,y:-187},{id:0,x:79,y:-182},{id:0,x:87,y:-176},{id:0,x:11,y:-229},{id:0,x:33,y:-226},{id:0,x:77,y:-211},{id:0,x:88,y:-205},{id:0,x:131,y:-158},{id:0,x:116,y:-174},{id:0,x:123,y:-166},{id:0,x:106,y:-174},{id:0,x:115,y:-167},{id:0,x:147,y:-139},{id:0,x:139,y:-149},{id:0,x:17,y:-220},{id:0,x:26,y:-218},{id:0,x:58,y:-210},{id:0,x:61,y:-200},{id:0,x:31,y:-208},{id:0,x:41,y:-206},{id:0,x:50,y:-202},{id:0,x:70,y:-196},{id:0,x:79,y:-192},{id:0,x:20,y:-209},{id:0,x:37,y:-216},{id:0,x:48,y:-214},{id:0,x:22,y:-228},{id:0,x:44,y:-223},{id:0,x:55,y:-219},{id:0,x:67,y:-215},{id:0,x:97,y:-198},{id:0,x:107,y:-191},{id:0,x:69,y:-206},{id:0,x:79,y:-201},{id:0,x:88,y:-196},{id:0,x:11,y:-211},{id:0,x:88,y:-186},{id:0,x:116,y:-183},{id:0,x:124,y:-175},{id:0,x:147,y:-147},{id:0,x:153,y:-137},{id:0,x:132,y:-166},{id:0,x:140,y:-157},{id:0,x:99,y:-175},{id:0,x:98,y:-181},{id:0,x:99,y:-189},{id:0,x:108,y:-182},{id:0,x:-8,y:-193},{id:0,x:3,y:-202},{id:0,x:-18,y:-192},{id:0,x:-26,y:-190},{id:0,x:-35,y:-189},{id:0,x:-44,y:-187},{id:0,x:-54,y:-184},{id:0,x:-63,y:-183},{id:0,x:-72,y:-180},{id:0,x:-14,y:-201},{id:0,x:-24,y:-200},{id:0,x:-34,y:-199},{id:0,x:-43,y:-196},{id:0,x:-53,y:-193},{id:0,x:-61,y:-190},{id:0,x:-70,y:-187},{id:0,x:-80,y:-182},{id:0,x:-88,y:-176},{id:0,x:-11,y:-229},{id:0,x:-34,y:-226},{id:0,x:-78,y:-211},{id:0,x:-88,y:-205},{id:0,x:-132,y:-158},{id:0,x:-117,y:-174},{id:0,x:-124,y:-166},{id:0,x:-107,y:-174},{id:0,x:-115,y:-167},{id:0,x:-147,y:-139},{id:0,x:-140,y:-149},{id:0,x:-17,y:-220},{id:0,x:-27,y:-218},{id:0,x:-59,y:-210},{id:0,x:-61,y:-200},{id:0,x:-32,y:-208},{id:0,x:-42,y:-206},{id:0,x:-51,y:-202},{id:0,x:-70,y:-196},{id:0,x:-80,y:-192},{id:0,x:-20,y:-209},{id:0,x:-2,y:-228},{id:0,x:-7,y:-220},{id:0,x:-37,y:-216},{id:0,x:-49,y:-214},{id:0,x:-23,y:-228},{id:0,x:-45,y:-223},{id:0,x:-56,y:-219},{id:0,x:-67,y:-215},{id:0,x:-98,y:-198},{id:0,x:-108,y:-191},{id:0,x:-70,y:-206},{id:0,x:-79,y:-201},{id:0,x:-89,y:-196},{id:0,x:-11,y:-211},{id:0,x:-89,y:-186},{id:0,x:-117,y:-183},{id:0,x:-125,y:-175},{id:0,x:-148,y:-147},{id:0,x:-153,y:-137},{id:0,x:-133,y:-166},{id:0,x:-141,y:-157},{id:0,x:-100,y:-175},{id:0,x:-98,y:-181},{id:0,x:-2,y:-211},{id:0,x:-99,y:-189},{id:0,x:-109,y:-182},{id:1,x:5,y:130},{id:1,x:-16,y:129},{id:1,x:9,y:111},{id:1,x:143,y:-35},{id:1,x:6,y:77},{id:1,x:27,y:75},{id:1,x:46,y:74},{id:1,x:66,y:67},{id:1,x:86,y:58},{id:1,x:103,y:46},{id:1,x:120,y:29},{id:1,x:133,y:9},{id:1,x:142,y:-8},{id:1,x:19,y:92},{id:1,x:35,y:95},{id:1,x:58,y:87},{id:1,x:77,y:82},{id:1,x:100,y:71},{id:1,x:117,y:55},{id:1,x:127,y:38},{id:1,x:-3,y:92},{id:1,x:29,y:109},{id:1,x:50,y:106},{id:1,x:72,y:100},{id:1,x:93,y:89},{id:1,x:115,y:74},{id:1,x:131,y:54},{id:1,x:142,y:24},{id:1,x:26,y:130},{id:1,x:47,y:124},{id:1,x:38,y:-76},{id:1,x:24,y:-104},{id:1,x:11,y:-78},{id:1,x:50,y:-101},{id:1,x:64,y:-72},{id:1,x:77,y:-97},{id:1,x:68,y:118},{id:1,x:90,y:107},{id:1,x:110,y:91},{id:1,x:131,y:74},{id:1,x:142,y:58},{id:1,x:151,y:36},{id:1,x:156,y:13},{id:1,x:155,y:-7},{id:1,x:152,y:-27},{id:1,x:150,y:-49},{id:1,x:145,y:-62},{id:1,x:135,y:-45},{id:1,x:125,y:-79},{id:1,x:113,y:-57},{id:1,x:102,y:-90},{id:1,x:89,y:-67},{id:1,x:-147,y:-35},{id:1,x:-10,y:77},{id:1,x:-30,y:75},{id:1,x:-51,y:74},{id:1,x:-71,y:67},{id:1,x:-90,y:58},{id:1,x:-107,y:46},{id:1,x:-124,y:29},{id:1,x:-137,y:9},{id:1,x:-146,y:-8},{id:1,x:-23,y:93},{id:1,x:-43,y:92},{id:1,x:-62,y:87},{id:1,x:-81,y:82},{id:1,x:-104,y:71},{id:1,x:-121,y:55},{id:1,x:-131,y:38},{id:1,x:-13,y:111},{id:1,x:-34,y:107},{id:1,x:-54,y:106},{id:1,x:-76,y:100},{id:1,x:-97,y:89},{id:1,x:-119,y:74},{id:1,x:-135,y:54},{id:1,x:-146,y:24},{id:1,x:-2,y:-106},{id:1,x:-39,y:126},{id:1,x:-60,y:122},{id:1,x:-42,y:-76},{id:1,x:-28,y:-104},{id:1,x:-15,y:-78},{id:1,x:-54,y:-101},{id:1,x:-68,y:-72},{id:1,x:-81,y:-97},{id:1,x:-79,y:115},{id:1,x:-97,y:106},{id:1,x:-115,y:92},{id:1,x:-133,y:76},{id:1,x:-146,y:58},{id:1,x:-155,y:36},{id:1,x:-160,y:13},{id:1,x:-159,y:-7},{id:1,x:-157,y:-27},{id:1,x:-154,y:-49},{id:1,x:-149,y:-62},{id:1,x:-139,y:-45},{id:1,x:-129,y:-79},{id:1,x:-117,y:-57},{id:1,x:-106,y:-90},{id:1,x:-93,y:-67}],[{id:0,x:33,y:-226}]);function loadLang(t){if(void 0===t&&(t="en"),null!=t)curLang=t;else{var e=new window.URLSearchParams(window.location.search);curLang=e.get("lang"),console.log(curLang)}(curLang=t)&&null!=curLang&&null!=curLang||(curLang="en"),loadPreAssets()}function initSplash(){window.PokiSDK.gameLoadingFinished(),gameState="splash","ar"==curLang&&(document.body.style.direction="rtl"),resizeCanvas(),1!=audioType||muted||(playMusic(),hasFocus||music.pause()),initGame()}function initStartScreen(){gameState="start",userInput.removeHitArea("moreGames"),1==audioType&&music.fade(music.volume(),.25,500),levelScore=0,totalScore=0,levelNum=0,background=new Elements.Background;var t={oImgData:assetLib.getData("uiButs"),aPos:[0,140],align:[.5,.5],id:oImageIds.quickGameBut,idOver:oImageIds.quickGameButOver,flash:!0},e={oImgData:assetLib.getData("uiButs"),aPos:[40,40],align:[0,0],id:oImageIds.infoBut,idOver:oImageIds.infoButOver};userInput.addHitArea("startGame",butEventHandler,null,"image",t),userInput.addHitArea("credits",butEventHandler,null,"image",e);var a=new Array(t,e);(panel=new Elements.Panel(gameState,a)).startTween1(),previousTime=(new Date).getTime(),updateStartScreenEvent()}function addMuteBut(t){if(1==audioType){var e=oImageIds.muteBut0;muted&&(e=oImageIds.muteBut1);var a={oImgData:assetLib.getData("uiButs"),aPos:[-65,65],align:[1,0],id:e,idOver:e};userInput.addHitArea("mute",butEventHandler,null,"image",a);for(var i=0;i<t.length;i++)if(t[i].id==oImageIds.muteBut0||t[i].id==oImageIds.muteBut1)return;t.push(a)}}function initCreditsScreen(){gameState="credits";var t={oImgData:assetLib.getData("uiButs"),aPos:[65,-65],align:[0,1],id:oImageIds.backBut,idOver:oImageIds.backButOver};userInput.addHitArea("backFromCredits",butEventHandler,null,"image",t);var e=new Array(t);addMuteBut(e),(panel=new Elements.Panel(gameState,e)).startTween1(),previousTime=(new Date).getTime(),updateCreditsScreenEvent()}function backToGame(){gameState="game";var t=new Array;(panel=new Elements.Panel(gameState,t)).startTween1(),updateGameButs(),updateGameTouch(),previousTime=(new Date).getTime(),updateGameEvent()}function initGame(){window.PokiSDK.measure("progress","launch"),gameState="game",1==audioType&&music.fade(music.volume(),.25,1e3),background=new Elements.Background,aEffects=new Array;var t=new Array;panel=new Elements.Panel(gameState,t),head=new Elements.Head,tools=new Elements.Tools,cursor=new Elements.Cursor,saveDataHandler.addStartComboId(),panel.startTween1(),aItems=new Array,saveDataHandler.getCat()&&(curCat=new Elements.Cat(-1),aItems.push(curCat));var e=saveDataHandler.getTableItem();if(e>-1){var a=new Elements.Item(e);aItems.push(a)}updateGameButs(),updateGameTouch(),trackRewardOptions(),previousTime=(new Date).getTime(),updateGameEvent()}function updateGameTouch(){userInput.removeHitArea("gameTouch"),userInput.addHitArea("gameTouch",butEventHandler,{isDraggable:!0,multiTouch:!0},"rect",{aRect:[0,0,canvas.width,canvas.height]},!0)}function blockGameButs(){userInput.removeHitArea("resetHit"),userInput.removeHitArea("downloadHit"),userInput.removeHitArea("mirrorHit"),userInput.removeHitArea("infoHit");for(var t=0;t<6;t++)userInput.removeHitArea("tabHit")}function removeGameButs(){panel.removeBut(oImageIds.resetBut),panel.removeBut(oImageIds.downloadBut),panel.removeBut(oImageIds.mirror0),panel.removeBut(oImageIds.infoBut);for(var t=0;t<7;t++)panel.removeBut(oImageIds["tab0"+t]),panel.removeBut(oImageIds["tab1"+t])}function hideMirrorBut(){userInput.removeHitArea("mirrorHit"),panel.removeBut(oImageIds.mirror0)}function updateGameButs(){blockGameButs(),removeGameButs();var t;if(isWide()){var e={oImgData:assetLib.getData("uiButs"),aPos:[45,45],align:[0,0],id:oImageIds.infoBut,idOver:oImageIds.infoBut};userInput.addHitArea("infoHit",butEventHandler,null,"image",e),panel.aButs.push(e);var a={oImgData:assetLib.getData("uiButs"),aPos:[-(controlDepth+65),60],align:[1,0],id:oImageIds.resetBut,idOver:oImageIds.resetBut};userInput.addHitArea("resetHit",butEventHandler,null,"image",a),panel.aButs.push(a);var i={oImgData:assetLib.getData("uiButs"),aPos:[-(controlDepth+175),60],align:[1,0],id:oImageIds.downloadBut,idOver:oImageIds.downloadBut};if(userInput.addHitArea("downloadHit",butEventHandler,null,"image",i),panel.aButs.push(i),0==tools.tintState){var s={oImgData:assetLib.getData("items"),aPos:[(canvas.width-controlDepth-70)/2+40,-75],align:[0,1],id:oImageIds.mirror0,idOver:oImageIds.mirror0};userInput.addHitArea("mirrorHit",butEventHandler,null,"image",s),panel.aButs.push(s)}for(var h=0;h<7;h++)t={oImgData:assetLib.getData("uiElements"),aPos:[-(controlDepth+40),93*h-279+30],align:[1,.5],id:oImageIds["tab0"+h],idOver:oImageIds["tab0"+h]},userInput.addHitArea("tabHit",butEventHandler,{id:h},"image",t),panel.aButs.push(t)}else{e={oImgData:assetLib.getData("uiButs"),aPos:[175,45],align:[0,0],id:oImageIds.infoBut,idOver:oImageIds.infoBut};userInput.addHitArea("infoHit",butEventHandler,null,"image",e),panel.aButs.push(e);a={oImgData:assetLib.getData("uiButs"),aPos:[-65,60],align:[1,0],id:oImageIds.resetBut,idOver:oImageIds.resetBut};userInput.addHitArea("resetHit",butEventHandler,null,"image",a),panel.aButs.push(a);i={oImgData:assetLib.getData("uiButs"),aPos:[-175,60],align:[1,0],id:oImageIds.downloadBut,idOver:oImageIds.downloadBut};if(userInput.addHitArea("downloadHit",butEventHandler,null,"image",i),panel.aButs.push(i),0==tools.tintState){s={oImgData:assetLib.getData("items"),aPos:[40,-controlDepth-tableHeight+75],align:[.5,1],id:oImageIds.mirror0,idOver:oImageIds.mirror0};userInput.addHitArea("mirrorHit",butEventHandler,null,"image",s),panel.aButs.push(s)}for(h=0;h<7;h++)t={oImgData:assetLib.getData("uiElements"),aPos:[93*h-279,-(controlDepth+39)],align:[.5,1],id:oImageIds["tab1"+h],idOver:oImageIds["tab1"+h]},userInput.addHitArea("tabHit",butEventHandler,{id:h},"image",t),panel.aButs.push(t)}}function resetHead(){firstTouch&&window.PokiSDK.gameplayStop(),head=new Elements.Head,tools=new Elements.Tools,firstTouch=!1,panel.stopTutTween()}function initPause(){gameState="pause";var t={oImgData:assetLib.getData("uiButs"),aPos:[-120,150],align:[.5,.5],id:oImageIds.playBut,idOver:oImageIds.playButOver},e={oImgData:assetLib.getData("uiButs"),aPos:[0,150],align:[.5,.5],id:oImageIds.replayBut,idOver:oImageIds.replayButOver},a={oImgData:assetLib.getData("uiButs"),aPos:[120,150],align:[.5,.5],id:oImageIds.quitBut,idOver:oImageIds.quitButOver};userInput.addHitArea("playFromPause",butEventHandler,null,"image",t),userInput.addHitArea("restartFromPause",butEventHandler,null,"image",e),userInput.addHitArea("quitFromPause",butEventHandler,null,"image",a);var i=new Array(t,e,a);(panel=new Elements.Panel(gameState,i)).startTween1(),previousTime=(new Date).getTime(),background=new Elements.Background,updatePauseEvent()}function resumeGame(){gameState="game",background=new Elements.Background;var t={oImgData:assetLib.getData("uiButs"),aPos:[40,40],align:[0,0],id:oImageIds.pauseBut,idOver:oImageIds.pauseButOver};userInput.addHitArea("pause",butEventHandler,null,"image",t);var e=new Array(t);addMuteBut(e),(panel=new Elements.Panel(gameState,e)).startTween1(),previousTime=(new Date).getTime(),updateGameEvent()}function butEventHandler(t,e){switch(t){case"langSelect":curLang=e.lang,ctx.clearRect(0,0,canvas.width,canvas.height),userInput.removeHitArea("langSelect"),(preAssetLib=new Utils.AssetLoader(curLang,[{id:"preloadImage",file:"images/preloadImage.jpg"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets);break;case"infoHit":playSound("tab",.5),blockGameButs(),removeGameButs(),userInput.removeHitArea("gameTouch"),firstTouch&&(window.PokiSDK.gameplayStop(),firstTouch=!1),initCreditsScreen();break;case"backFromCredits":playSound("tab",.5),userInput.removeHitArea("backFromCredits"),userInput.removeHitArea("mute"),firstTouch||(window.PokiSDK.gameplayStart(),firstTouch=!0),backToGame();break;case"resetData":playSound("tab",.5),userInput.removeHitArea("backFromCredits"),userInput.removeHitArea("resetData"),userInput.removeHitArea("mute"),initStartScreen();break;case"resetHit":resetHead();break;case"downloadHit":window.PokiSDK.measure("custom","save_image","0"),saveImage(),playSound("takePhoto",.5);break;case"tabHit":tabId!=e.id&&showAd((function(){firstTouch||(window.PokiSDK.gameplayStart(),firstTouch=!0),tabId=e.id,tools.resetPos(),updateGameButs(),updateGameTouch(),playSound("tab",.5),trackRewardOptions(),window.PokiSDK.measure("custom","tab",tabId.toString())})),navigator.sendBeacon("https://leveldata.poki.io/weapons","3effbf87-3955-4200-9f3d-21e866ba2f70");break;case"mirrorHit":playSound("tab",.5),window.PokiSDK.measure("custom","mirror","1"),head.pose(),playSound("mirror"+Math.floor(3*Math.random()));break;case"gameTouch":if(firstTouch||(window.PokiSDK.gameplayStart(),firstTouch=!0),firstMeaningful||(window.PokiSDK.measure("game","meaningful","first"),firstMeaningful=!0),e.isDown&&!e.isBeingDragged){if(isWide()&&e.x<canvas.width-controlDepth||!isWide()&&e.y<canvas.height-controlDepth){if(1==tools.tintState&&(isWide()&&e.y>canvas.height-tools.paletteHeight-tools.paletteBuffer||!isWide()&&e.y>canvas.height-controlDepth-tools.tabOffset-tools.paletteHeight-tools.paletteBuffer))tools.checkTintClick(e.x,e.y);else if(0==tabId){switch(toolId){case 0:playSound("comb",.3*Math.random()+.2);break;case 1:break;case 2:loopSound("shower");break;case 3:playSound("bubble"+Math.floor(6*Math.random()));break;case 4:loopSound("blowDry");break;case 5:loopSound("grow",.5);break;case 6:playSound("bubble"+Math.floor(4*Math.random()));break;case 7:playSound("shimmer");break;case 8:loopSound("shaver");break;case 9:case 12:playSound("crimp",.5);break;case 11:playSound("frizz");break;case 10:case 13:playSound("curl",1);break;case 14:loopSound("straighten",.5);break;case 15:playSound("brush");break;case 16:playSound("addVol")}firstHairTouch||(panel.stopTutTween(),firstHairTouch=!0),head.eyeInc=0,touchArea=1,touchX=e.x,touchY=e.y,head.aTouchPos=new Array}}else touchArea=2,tools.startMoveX=tools.posX,tools.startMoveY=tools.posY,tools.checkMoveX=0,tools.checkMoveY=0,tools.startTouchX=e.x-tools.posX,tools.startTouchY=e.y-tools.posY;blockGameButs()}else e.isBeingDragged?1==touchArea?(touchX=e.x,touchY=e.y):2==touchArea&&(tools.posX=e.x-tools.startTouchX,tools.posY=e.y-tools.startTouchY,tools.checkMoveX+=Math.abs(tools.startMoveX-tools.posX),tools.checkMoveY+=Math.abs(tools.startMoveY-tools.posY)):(stopLoopSound(),2==tools.tintState&&(tools.tintState=1),1==touchArea&&head.stopTouch(),2==touchArea&&(!isMobile&&tools.checkMoveX<50&&tools.checkMoveY<50||isMobile&&tools.checkMoveX<50&&tools.checkMoveY<50)&&tools.checkClick(e.x,e.y),touchArea=0);break;case"mute":playSound("tab",.5),toggleMute(),muted?panel.switchBut(oImageIds.muteBut0,oImageIds.muteBut1,oImageIds.muteBut1Over):panel.switchBut(oImageIds.muteBut1,oImageIds.muteBut0,oImageIds.muteBut0Over)}}function trackRewardOptions(){for(var t=0;t<aToolCount[tabId];t++)saveDataHandler.isUnlocked(tabId,t)||window.PokiSDK.measure("rewarded","visible",tabId+"-"+t)}function showAd(t){window.PokiSDK.commercialBreak((function(){muted||(Howler.mute(!0),music.pause())})).then((function(){console.log("Commercial break finished, proceeding to game"),muted||(Howler.mute(!1),playMusic()),t()}))}function showRewardAd(){window.PokiSDK.measure("rewarded","click",tabId+"-"+toolId),window.PokiSDK.rewardedBreak((function(){muted||(Howler.mute(!0),music.pause())})).then((function(t){muted||(Howler.mute(!1),playMusic()),rewardAdSuccess(t),console.log("Rewarded break finished, proceeding to game")}))}function rewardAdSuccess(t){t?(playSound("reward"),setTimeout((function(){triggerVocalPos()}),1e3),curCat&&curCat.tailBoost(),saveDataHandler.unlockItem(tabId,rewardId),tools.selectTool(),head.forceEmoji=!0,head.triggerEmojis(),tools.toolExplode()):(console.log("fail"),toolId=tools.prevToolId)}function triggerWear(){setTimeout((function(){playSound("wear"+Math.floor(4*Math.random()))}),100),setTimeout((function(){playSound("pieceSuccess"+Math.floor(5*Math.random()),.2)}),50)}function triggerVocalPos(){vocalInc<=0&&(playSound("vocalPos"+Math.floor(8*Math.random())),vocalInc=2)}function triggerGasp(){vocalInc<=0&&(playSound("gasp"+Math.floor(4*Math.random())),vocalInc=2)}function triggerMmn(){vocalInc<=0&&(playSound("mmn"+Math.floor(9*Math.random())),vocalInc=2)}function updateGameEvent(){if("game"==gameState){delta=getDelta(),background.render(),head.update(),head.render(),aItems=sortByY(aItems,"bottom");for(var t=0;t<aItems.length;t++)aItems[t].update(),aItems[t].render(),aItems[t].removeMe&&(aItems.splice(t,1),t-=1);tools.update(),tools.render(),panel.update(),panel.render();for(t=0;t<aEffects.length;t++)aEffects[t].update(),aEffects[t].render(),aEffects[t].removeMe&&(aEffects.splice(t,1),t-=1);0==tabId&&(isWide()?userInput.mouseX<canvas.width-controlDepth-80&&userInput.mouseY<canvas.height-tableHeight&&(cursor.update(),isMobile||cursor.render()):userInput.mouseY<canvas.height-controlDepth-tableHeight&&(cursor.update(),isMobile||cursor.render())),checkButtonsOver(),requestAnimFrame(updateGameEvent)}}function updateCreditsScreenEvent(){"credits"==gameState&&(delta=getDelta(),background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updateCreditsScreenEvent))}function updateLevelComplete(){"levelComplete"==gameState&&(delta=getDelta(),background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updateLevelComplete))}function updateGameEndFail(){"gameEndFail"==gameState&&(delta=getDelta(),background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updateGameEndFail))}function updateSplashScreenEvent(){if("splash"==gameState){if(delta=getDelta(),(splashTimer+=delta)>2.5)return 1!=audioType||muted||(playMusic(),hasFocus||music.pause()),void initStartScreen();background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updateSplashScreenEvent)}}function updateStartScreenEvent(){"start"==gameState&&(delta=getDelta(),background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updateStartScreenEvent))}function updateLoaderEvent(){"loading"==gameState&&(delta=getDelta(),assetLib.render(),requestAnimFrame(updateLoaderEvent))}function updatePauseEvent(){"pause"==gameState&&(delta=getDelta(),background.render(),panel.update(),panel.render(),checkButtonsOver(),requestAnimFrame(updatePauseEvent))}function encodeInt(t){return(t<0?"!":"")+Math.abs(t).toString(36)}function encodeFloat(t){return(t<0?"!":"")+Math.round(Math.abs(100*t)).toString(36)}function encodeColorArray(t){return t.map((function(t){var e=Math.round(t).toString(36);return e.length<2?"0"+e:e})).join("")}function encodeArray(t,e){return void 0===e&&(e="_"),t.map(encodeFloat).join(e)}function encodeSegs(t){return t.map((function(t){return[t.x,t.y,t.rot,t.addRot].map(encodeFloat).join("_")})).join("|")}function encodeHairArray(t){return t.map(encodeHair).join("~")}function encodeHair(t){return[encodeFloat(t.x),encodeFloat(t.y),encodeFloat(t.vol),encodeFloat(t.len),encodeSegs(t.aSegs),encodeColorArray(t.aCol),encodeFloat(t.wet),encodeFloat(t.soap),encodeInt(t.id),encodeFloat(t.colAdd),encodeFloat(t.shimmer),encodeFloat(t.frizz),encodeFloat(t.ran)].join(";")}function encodeCharacter(t){var e=this;return[["flowerId","glassesId","hatId","jewelId","earringId","browId","jewelId2","earringId2","noseId","eyeId","bgId","clothId","curBrowTint","curVestTint","curEyeTint","curLipTint"].map((function(t){return encodeInt(e[t]||0)})).join(","),encodeHairArray(t.aHair0||[]),encodeHairArray(t.aHair1||[])].join("")}function decodeInt(t){return"!"===t[0]?-parseInt(t.slice(1),36):parseInt(t,36)}function decodeFloat(t){return(t.startsWith("!")?-1:1)*parseInt(t.replace("!",""),36)/100}function decodeColorArray(t){for(var e=[],a=0;a<t.length;a+=2)e.push(Math.round(parseInt(t.slice(a,a+2),36)));return e}function decodeArray(t,e){return void 0===e&&(e="_"),t.split(e).map(decodeFloat)}function decodeSegs(t){return t.split("|").map((function(t){var e=t.split("_").map(decodeFloat);return{x:e[0],y:e[1],rot:e[2],addRot:e[3]}}))}function decodeHair(t){var e=t.split(";"),a=e[0],i=e[1],s=e[2],h=e[3],o=e[4],d=e[5],r=e[6],n=e[7],g=e[8],l=e[9],c=e[10],u=e[11],m=e[12];return{x:decodeFloat(a),y:decodeFloat(i),vol:decodeFloat(s),len:decodeFloat(h),aSegs:decodeSegs(o),aCol:decodeColorArray(d),wet:decodeFloat(r),soap:decodeFloat(n),id:decodeInt(g),colAdd:decodeFloat(l),shimmer:decodeFloat(c),frizz:decodeFloat(u),ran:decodeFloat(m)}}function decodeHairArray(t){return t?t.split("~").map(decodeHair):[]}function decodeCharacter(t){var e=this,a=t.split(""),i=a[0],s=a[1],h=a[2],o=i.split(",").map(decodeInt);["flowerId","glassesId","hatId","jewelId","earringId","browId","jewelId2","earringId2","noseId","eyeId","bgId","clothId","curBrowTint","curVestTint","curEyeTint","curLipTint"].forEach((function(t,a){e[t]=o[a]})),head.aHair0=decodeHairArray(s),head.aHair1=decodeHairArray(h)}function saveImage(){background.render(),head.eyesOpen=!0,head.render();for(var t=0;t<aItems.length;t++)aItems[t].render(!0);var e=getSpriteData(assetLib.getData("uiElements"),"watermark");ctx.drawImage(e.img,e.bX,e.bY,e.bWidth,e.bHeight,10,10,e.bWidth,e.bHeight);var a=document.createElement("canvas");isWide()?(a.width=canvas.width-controlDepth-80,a.height=canvas.height-tableHeight):(a.width=canvas.width,a.height=canvas.height-controlDepth-tableHeight),a.getContext("2d").drawImage(canvas,0,0);try{window.Blob&&a.toBlob?a.toBlob((function(t){t?(saveAs(t,"divaHairSalon.jpg"),window.PokiSDK.measure("custom","save_image","1")):fallbackToDataUrl(a)}),"image/jpg",.95):fallbackToDataUrl(a)}catch(t){fallbackToDataUrl(a)}}function fallbackToDataUrl(t){var e=t.toDataURL("image/jpeg",.95),a=document.createElement("a");a.href=e,a.download="divaHairSalon.jpg",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.PokiSDK.measure("custom","save_image","2")}function easeOutCubic(t){return 1-Math.pow(1-t,3)}function easeInCubic(t){return t*t*t}function easeOutQuad(t){return 1-(1-t)*(1-t)}function easeOutExpo(t){return 1===t?1:1-Math.pow(2,-10*t)}function isWide(){return canvas.width>canvas.height}function twoDigit(t){var e=t.toString();return e.length<2&&(e="0"+e),e}function sortBy(t,e){return t.sort((function(t,a){return e(t)-e(a)}))}function getSpriteData(t,e){return{img:t.img,bX:t.oData.oAtlasData[oImageIds[e]].x,bY:t.oData.oAtlasData[oImageIds[e]].y,bWidth:t.oData.oAtlasData[oImageIds[e]].width,bHeight:t.oData.oAtlasData[oImageIds[e]].height}}function getMultiLineTextByChars(t,e,a){for(var i=new Array,s=getText(t,a);s.length>e;){var h=s.substring(0,e).lastIndexOf(" ");-1==h?(i.push(s.substring(0,e)+"-"),s=s.substring(e+1)):(i.push(s.substring(0,h)),s=s.substring(h+1))}return i.push(s),i}function addDirectText(t,e,a,i,s,h,o,d){if(void 0===d&&(d="#202020"),ctx.fillStyle=d,ctx.textAlign=i,a<getDirectWidth(t,e,o)){for(e--;a<getDirectWidth(t,e,o);)e--}ctx.font=e+"px "+assetLib.textData.langText["font"+t][curLang],ctx.fillText(o,s,h)}function addText(t,e,a,i,s,h,o,d){void 0===d&&(d="#202020"),ctx.fillStyle=d,ctx.textAlign=i;var r=e;if(a<getTextWidth(t,e,o)){for(e--;a<getTextWidth(t,e,o);)e--}"ar"==curLang&&(h-=e/15),h-=10*(1-e/r),ctx.font=e+"px "+assetLib.textData.langText["font"+t][curLang],ctx.fillText(getText(o,t),s,h)}function getText(t,e){var a=assetLib.textData.langText[t][curLang];if("tr"==curLang){for(var i,s="",h=0;h<a.length;)i=a.charAt(h),"Bangers"==assetLib.textData.langText["font"+e][curLang]&&"i"==i&&(i=""),s+=i,h++;a=s}return a}function getTextWidth(t,e,a){return ctx.font=e+"px "+assetLib.textData.langText["font"+t][curLang],ctx.measureText(getText(a,t)).width}function getDirectWidth(t,e,a){return ctx.font=e+"px "+assetLib.textData.langText["font"+t][curLang],ctx.measureText(a).width}function getCorrectedTextWidth(t,e,a,i){if(a<getTextWidth(t,e,i)){for(e--;a<getTextWidth(t,e,i);)e--}return ctx.font=e+"px "+assetLib.textData.langText["font"+t][curLang],ctx.measureText(getText(i,t)).width}function checkButtonsOver(){if(!isMobile)for(var t=0;t<panel.aButs.length;t++)panel.aButs[t].isOver=!1,userInput.mouseX>panel.aButs[t].aOverData[0]&&userInput.mouseX<panel.aButs[t].aOverData[2]&&userInput.mouseY>panel.aButs[t].aOverData[1]&&userInput.mouseY<panel.aButs[t].aOverData[3]&&(panel.aButs[t].isOver=!0)}function clearButtonOvers(){userInput.mouseX=-100,userInput.mouseY=-100}function getDelta(){var t=(new Date).getTime(),e=(t-previousTime)/1e3;return previousTime=t,e>.5&&(e=0),e}function sortByY(t,e){return t.sort((function(t,a){return t[e]-a[e]}))}function checkCircleHit(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])<=(t[2]+e[2])*(t[2]+e[2])}function getScaleImageToMax(t,e){return t.isSpriteSheet?e[0]/t.oData.spriteWidth<e[1]/t.oData.spriteHeight?Math.min(e[0]/t.oData.spriteWidth,1):Math.min(e[1]/t.oData.spriteHeight,1):e[0]/t.img.width<e[1]/t.img.height?Math.min(e[0]/t.img.width,1):Math.min(e[1]/t.img.height,1)}function getCentreFromTopLeft(t,e,a){var i=new Array;return i.push(t[0]+e.oData.spriteWidth/2*a),i.push(t[1]+e.oData.spriteHeight/2*a),i}function loadPreAssets(){(preAssetLib=new Utils.AssetLoader(curLang,[{id:"loader",file:"images/loader.png"},{id:"loadSpinner",file:"images/loadSpinner.png"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets)}function initLangSelect(){for(var t,e,a,i,s=0,h=0;h<aLangs.length&&(h+1)*(1*(t=preAssetLib.getData("lang"+aLangs[h])).img.width)+10*(h+2)<canvas.width;h++)s++;i=Math.ceil(aLangs.length/s);for(h=0;h<aLangs.length;h++){t=preAssetLib.getData("lang"+aLangs[h]),e=canvas.width/2-s/2*(1*t.img.width)-(s-1)/2*10,e+=h%s*(1*t.img.width+10),a=canvas.height/2-i/2*(1*t.img.height)-(i-1)/2*10,a+=Math.floor(h/s)%i*(1*t.img.height+10),ctx.drawImage(t.img,0,0,t.img.width,t.img.height,e,a,1*t.img.width,1*t.img.height);var o={oImgData:t,aPos:[e+1*t.img.width/2,a+1*t.img.height/2],scale:1,id:"none",noMove:!0};userInput.addHitArea("langSelect",butEventHandler,{lang:aLangs[h]},"image",o)}}function initLoadAssets(){loadAssets()}function loadAssets(){assetLib=new Utils.AssetLoader(curLang,[{id:"splashLogo",file:"images/splashLogo.png"},{id:"flare",file:"images/flare.png"},{id:"bg0",file:"images/bg0.jpg"},{id:"bg1",file:"images/bg1.jpg"},{id:"bg2",file:"images/bg2.jpg"},{id:"bg3",file:"images/bg3.jpg"},{id:"bg4",file:"images/bg4.jpg"},{id:"bg5",file:"images/bg5.jpg"},{id:"bg6",file:"images/bg6.jpg"},{id:"bg7",file:"images/bg7.jpg"},{id:"bg8",file:"images/bg8.jpg"},{id:"bg9",file:"images/bg9.jpg"},{id:"bg10",file:"images/bg10.jpg"},{id:"bg11",file:"images/bg11.jpg"},{id:"head0",file:"images/head0.png",oAtlasData:{id0:{x:0,y:764,width:478,height:380},id1:{x:480,y:382,width:370,height:463},id10:{x:480,y:0,width:478,height:380},id11:{x:852,y:382,width:369,height:463},id12:{x:1315,y:0,width:69,height:129},id13:{x:1202,y:1388,width:86,height:59},id14:{x:0,y:0,width:478,height:380},id15:{x:851,y:847,width:369,height:463},id16:{x:1319,y:325,width:69,height:129},id17:{x:1116,y:0,width:86,height:59},id18:{x:1386,y:61,width:59,height:59},id19:{x:1386,y:719,width:59,height:59},id2:{x:1319,y:587,width:69,height:130},id20:{x:1378,y:192,width:59,height:59},id21:{x:1378,y:253,width:59,height:59},id22:{x:1378,y:131,width:59,height:59},id23:{x:1222,y:1247,width:59,height:59},id24:{x:1386,y:0,width:59,height:59},id25:{x:960,y:350,width:102,height:27},id26:{x:1064,y:350,width:96,height:26},id27:{x:1098,y:250,width:80,height:23},id28:{x:960,y:300,width:117,height:48},id29:{x:1223,y:514,width:94,height:92},id3:{x:1388,y:780,width:58,height:59},id30:{x:1211,y:1312,width:98,height:74},id31:{x:853,y:1386,width:137,height:55},id32:{x:960,y:187,width:136,height:54},id33:{x:0,y:1312,width:156,height:62},id34:{x:474,y:1312,width:154,height:72},id35:{x:158,y:1310,width:156,height:80},id36:{x:1216,y:0,width:97,height:98},id37:{x:1098,y:124,width:116,height:48},id38:{x:1223,y:702,width:94,height:92},id39:{x:1111,y:1312,width:98,height:74},id4:{x:1111,y:1388,width:89,height:60},id40:{x:436,y:1394,width:137,height:55},id41:{x:960,y:74,width:136,height:54},id42:{x:316,y:1146,width:155,height:62},id43:{x:942,y:1312,width:154,height:72},id44:{x:158,y:1146,width:156,height:80},id45:{x:1222,y:1147,width:97,height:98},id46:{x:1098,y:74,width:116,height:48},id47:{x:1223,y:608,width:94,height:92},id48:{x:1098,y:174,width:98,height:74},id49:{x:575,y:1386,width:137,height:55},id5:{x:316,y:1274,width:119,height:31},id50:{x:714,y:1386,width:137,height:54},id51:{x:316,y:1210,width:155,height:62},id52:{x:786,y:1312,width:154,height:72},id53:{x:158,y:1228,width:156,height:80},id54:{x:1222,y:1047,width:97,height:98},id55:{x:992,y:1386,width:117,height:48},id56:{x:1223,y:420,width:94,height:92},id57:{x:1198,y:174,width:98,height:74},id58:{x:960,y:130,width:136,height:55},id59:{x:158,y:1392,width:137,height:54},id6:{x:0,y:382,width:478,height:380},id60:{x:0,y:1376,width:156,height:62},id61:{x:630,y:1312,width:154,height:72},id62:{x:316,y:1312,width:156,height:80},id63:{x:1222,y:947,width:97,height:98},id64:{x:1079,y:300,width:117,height:48},id65:{x:1223,y:326,width:94,height:92},id66:{x:1198,y:250,width:98,height:74},id67:{x:960,y:243,width:136,height:55},id68:{x:297,y:1394,width:137,height:56},id69:{x:0,y:1228,width:156,height:62},id7:{x:480,y:847,width:369,height:463},id70:{x:960,y:0,width:154,height:72},id71:{x:0,y:1146,width:156,height:80},id72:{x:1222,y:847,width:97,height:98},id73:{x:1321,y:1070,width:65,height:116},id74:{x:1298,y:243,width:78,height:80},id75:{x:1319,y:719,width:65,height:115},id76:{x:1311,y:1329,width:78,height:80},id77:{x:1321,y:836,width:65,height:115},id78:{x:1311,y:1247,width:78,height:80},id79:{x:1321,y:953,width:65,height:115},id8:{x:1319,y:456,width:69,height:129},id80:{x:1298,y:161,width:78,height:80},id9:{x:1216,y:100,width:86,height:59}}},{id:"head1",file:"images/head1.png",oAtlasData:{id0:{x:788,y:1451,width:105,height:69},id1:{x:923,y:541,width:106,height:70},id10:{x:1032,y:1308,width:106,height:70},id100:{x:0,y:1464,width:121,height:49},id101:{x:238,y:1490,width:27,height:22},id102:{x:267,y:1490,width:26,height:16},id103:{x:123,y:1464,width:113,height:43},id104:{x:124,y:1410,width:95,height:42},id11:{x:1032,y:375,width:106,height:70},id12:{x:1041,y:0,width:106,height:70},id13:{x:1139,y:447,width:106,height:70},id14:{x:1041,y:155,width:106,height:70},id15:{x:348,y:1410,width:108,height:77},id16:{x:535,y:0,width:108,height:78},id17:{x:238,y:1410,width:108,height:78},id18:{x:535,y:80,width:108,height:78},id19:{x:535,y:160,width:108,height:78},id2:{x:923,y:613,width:106,height:70},id20:{x:535,y:240,width:108,height:78},id21:{x:645,y:0,width:108,height:78},id22:{x:645,y:80,width:108,height:78},id23:{x:645,y:160,width:108,height:78},id24:{x:645,y:240,width:108,height:78},id25:{x:922,y:1092,width:108,height:77},id26:{x:922,y:1171,width:108,height:77},id27:{x:922,y:1250,width:108,height:77},id28:{x:922,y:1329,width:108,height:77},id29:{x:1247,y:380,width:95,height:67},id3:{x:1031,y:458,width:106,height:70},id30:{x:1164,y:906,width:99,height:74},id31:{x:1149,y:0,width:99,height:74},id32:{x:1241,y:1255,width:99,height:74},id33:{x:1164,y:982,width:99,height:74},id34:{x:1164,y:830,width:99,height:74},id35:{x:1241,y:304,width:99,height:74},id36:{x:1140,y:1255,width:99,height:74},id37:{x:1164,y:754,width:99,height:74},id38:{x:1140,y:310,width:99,height:74},id39:{x:1164,y:678,width:99,height:74},id4:{x:1031,y:530,width:106,height:70},id40:{x:1164,y:602,width:99,height:74},id41:{x:1149,y:228,width:99,height:74},id42:{x:1149,y:152,width:99,height:74},id43:{x:1149,y:76,width:99,height:74},id44:{x:922,y:1408,width:107,height:81},id45:{x:923,y:375,width:107,height:81},id46:{x:1041,y:227,width:106,height:81},id47:{x:1041,y:72,width:106,height:81},id48:{x:1140,y:1172,width:106,height:81},id49:{x:1140,y:1089,width:106,height:81},id5:{x:1031,y:602,width:106,height:70},id50:{x:1139,y:1380,width:106,height:81},id51:{x:1139,y:519,width:106,height:81},id52:{x:923,y:458,width:106,height:81},id53:{x:1056,y:1006,width:106,height:81},id54:{x:1056,y:923,width:106,height:81},id55:{x:1056,y:840,width:106,height:81},id56:{x:1056,y:757,width:106,height:81},id57:{x:1056,y:674,width:106,height:81},id58:{x:1357,y:968,width:87,height:82},id59:{x:1265,y:622,width:91,height:84},id6:{x:1031,y:1408,width:106,height:70},id60:{x:1250,y:86,width:91,height:84},id61:{x:1247,y:1331,width:91,height:84},id62:{x:1247,y:1417,width:91,height:84},id63:{x:1247,y:449,width:91,height:85},id64:{x:1343,y:0,width:90,height:84},id65:{x:1248,y:1058,width:91,height:84},id66:{x:1344,y:344,width:90,height:85},id67:{x:1248,y:1144,width:91,height:84},id68:{x:1250,y:0,width:91,height:84},id69:{x:1265,y:536,width:91,height:84},id7:{x:1032,y:1092,width:106,height:70},id70:{x:1265,y:708,width:91,height:84},id71:{x:1358,y:536,width:90,height:85},id72:{x:1250,y:172,width:91,height:84},id73:{x:1340,y:449,width:90,height:85},id74:{x:1340,y:1331,width:90,height:84},id75:{x:1265,y:794,width:90,height:84},id76:{x:1342,y:258,width:90,height:84},id77:{x:1343,y:86,width:90,height:84},id78:{x:1343,y:172,width:90,height:84},id79:{x:1357,y:794,width:90,height:85},id8:{x:1032,y:1164,width:106,height:70},id80:{x:1265,y:880,width:90,height:85},id81:{x:1357,y:881,width:90,height:85},id82:{x:1265,y:967,width:90,height:84},id83:{x:1341,y:1139,width:90,height:84},id84:{x:1342,y:1225,width:90,height:84},id85:{x:1340,y:1417,width:90,height:84},id86:{x:1341,y:1053,width:90,height:84},id87:{x:534,y:726,width:252,height:372},id88:{x:788,y:375,width:133,height:357},id89:{x:0,y:352,width:532,height:351},id9:{x:1032,y:1236,width:106,height:70},id90:{x:534,y:352,width:252,height:372},id91:{x:788,y:1092,width:132,height:357},id92:{x:0,y:705,width:532,height:351},id93:{x:534,y:1100,width:252,height:373},id94:{x:922,y:734,width:132,height:356},id95:{x:0,y:0,width:533,height:350},id96:{x:788,y:0,width:251,height:373},id97:{x:788,y:734,width:132,height:356},id98:{x:0,y:1058,width:532,height:350},id99:{x:0,y:1410,width:122,height:52}}},{id:"tools",file:"images/tools.png",oAtlasData:{id0:{x:710,y:1278,width:140,height:140},id1:{x:1456,y:142,width:140,height:140},id10:{x:1420,y:568,width:140,height:140},id100:{x:284,y:1420,width:140,height:140},id101:{x:284,y:1278,width:140,height:140},id102:{x:284,y:1136,width:140,height:140},id103:{x:284,y:994,width:140,height:140},id104:{x:284,y:852,width:140,height:140},id105:{x:284,y:710,width:140,height:140},id106:{x:284,y:568,width:140,height:140},id107:{x:284,y:426,width:140,height:140},id108:{x:284,y:284,width:140,height:140},id109:{x:178,y:142,width:140,height:140},id11:{x:1420,y:426,width:140,height:140},id110:{x:178,y:0,width:140,height:140},id111:{x:142,y:1492,width:140,height:140},id112:{x:142,y:1350,width:140,height:140},id113:{x:142,y:1208,width:140,height:140},id114:{x:142,y:1066,width:140,height:140},id115:{x:142,y:924,width:140,height:140},id116:{x:142,y:782,width:140,height:140},id117:{x:142,y:640,width:140,height:140},id118:{x:142,y:498,width:140,height:140},id119:{x:142,y:356,width:140,height:140},id12:{x:1420,y:284,width:140,height:140},id120:{x:0,y:1492,width:140,height:140},id121:{x:0,y:1350,width:140,height:140},id122:{x:0,y:1208,width:140,height:140},id123:{x:0,y:1066,width:140,height:140},id124:{x:0,y:924,width:140,height:140},id125:{x:0,y:782,width:140,height:140},id126:{x:0,y:640,width:140,height:140},id127:{x:0,y:498,width:140,height:140},id128:{x:0,y:0,width:176,height:176},id129:{x:0,y:178,width:176,height:176},id13:{x:1314,y:142,width:140,height:140},id130:{x:0,y:1634,width:54,height:49},id14:{x:1314,y:0,width:140,height:140},id15:{x:1278,y:1562,width:140,height:140},id16:{x:1278,y:1420,width:140,height:140},id17:{x:1278,y:1278,width:140,height:140},id18:{x:1278,y:1136,width:140,height:140},id19:{x:1278,y:994,width:140,height:140},id2:{x:1456,y:0,width:140,height:140},id20:{x:1278,y:852,width:140,height:140},id21:{x:1278,y:710,width:140,height:140},id22:{x:1278,y:568,width:140,height:140},id23:{x:1278,y:426,width:140,height:140},id24:{x:1278,y:284,width:140,height:140},id25:{x:1172,y:142,width:140,height:140},id26:{x:1172,y:0,width:140,height:140},id27:{x:1136,y:1562,width:140,height:140},id28:{x:1136,y:1420,width:140,height:140},id29:{x:1136,y:1278,width:140,height:140},id3:{x:1420,y:1562,width:140,height:140},id30:{x:1136,y:1136,width:140,height:140},id31:{x:1136,y:994,width:140,height:140},id32:{x:1136,y:852,width:140,height:140},id33:{x:1136,y:710,width:140,height:140},id34:{x:1136,y:568,width:140,height:140},id35:{x:1136,y:426,width:140,height:140},id36:{x:1136,y:284,width:140,height:140},id37:{x:1030,y:142,width:140,height:140},id38:{x:1030,y:0,width:140,height:140},id39:{x:994,y:1562,width:140,height:140},id4:{x:1420,y:1420,width:140,height:140},id40:{x:994,y:1420,width:140,height:140},id41:{x:994,y:1278,width:140,height:140},id42:{x:994,y:1136,width:140,height:140},id43:{x:994,y:994,width:140,height:140},id44:{x:994,y:852,width:140,height:140},id45:{x:994,y:710,width:140,height:140},id46:{x:994,y:568,width:140,height:140},id47:{x:994,y:426,width:140,height:140},id48:{x:994,y:284,width:140,height:140},id49:{x:888,y:142,width:140,height:140},id5:{x:1420,y:1278,width:140,height:140},id50:{x:888,y:0,width:140,height:140},id51:{x:852,y:1562,width:140,height:140},id52:{x:852,y:1420,width:140,height:140},id53:{x:852,y:1278,width:140,height:140},id54:{x:852,y:1136,width:140,height:140},id55:{x:852,y:994,width:140,height:140},id56:{x:852,y:852,width:140,height:140},id57:{x:852,y:710,width:140,height:140},id58:{x:852,y:568,width:140,height:140},id59:{x:852,y:426,width:140,height:140},id6:{x:1420,y:1136,width:140,height:140},id60:{x:852,y:284,width:140,height:140},id61:{x:746,y:142,width:140,height:140},id62:{x:746,y:0,width:140,height:140},id63:{x:710,y:1562,width:140,height:140},id64:{x:710,y:1420,width:140,height:140},id65:{x:0,y:356,width:140,height:140},id66:{x:710,y:1136,width:140,height:140},id67:{x:710,y:994,width:140,height:140},id68:{x:710,y:852,width:140,height:140},id69:{x:710,y:710,width:140,height:140},id7:{x:1420,y:994,width:140,height:140},id70:{x:710,y:568,width:140,height:140},id71:{x:710,y:426,width:140,height:140},id72:{x:710,y:284,width:140,height:140},id73:{x:604,y:142,width:140,height:140},id74:{x:604,y:0,width:140,height:140},id75:{x:568,y:1562,width:140,height:140},id76:{x:568,y:1420,width:140,height:140},id77:{x:568,y:1278,width:140,height:140},id78:{x:568,y:1136,width:140,height:140},id79:{x:568,y:994,width:140,height:140},id8:{x:1420,y:852,width:140,height:140},id80:{x:568,y:852,width:140,height:140},id81:{x:568,y:710,width:140,height:140},id82:{x:568,y:568,width:140,height:140},id83:{x:568,y:426,width:140,height:140},id84:{x:568,y:284,width:140,height:140},id85:{x:462,y:142,width:140,height:140},id86:{x:462,y:0,width:140,height:140},id87:{x:426,y:1562,width:140,height:140},id88:{x:426,y:1420,width:140,height:140},id89:{x:426,y:1278,width:140,height:140},id9:{x:1420,y:710,width:140,height:140},id90:{x:426,y:1136,width:140,height:140},id91:{x:426,y:994,width:140,height:140},id92:{x:426,y:852,width:140,height:140},id93:{x:426,y:710,width:140,height:140},id94:{x:426,y:568,width:140,height:140},id95:{x:426,y:426,width:140,height:140},id96:{x:426,y:284,width:140,height:140},id97:{x:320,y:142,width:140,height:140},id98:{x:320,y:0,width:140,height:140},id99:{x:284,y:1562,width:140,height:140}}},{id:"uiElements",file:"images/uiElements.png",oAtlasData:{id0:{x:331,y:521,width:83,height:94},id1:{x:364,y:248,width:83,height:94},id10:{x:139,y:484,width:94,height:83},id11:{x:206,y:698,width:94,height:83},id12:{x:182,y:363,width:94,height:83},id13:{x:223,y:152,width:94,height:83},id14:{x:495,y:454,width:32,height:31},id15:{x:319,y:281,width:32,height:31},id16:{x:448,y:382,width:32,height:31},id17:{x:448,y:349,width:32,height:31},id18:{x:319,y:248,width:32,height:31},id19:{x:223,y:322,width:32,height:31},id2:{x:404,y:152,width:83,height:94},id20:{x:0,y:0,width:804,height:150},id21:{x:182,y:448,width:32,height:31},id22:{x:0,y:484,width:137,height:213},id23:{x:235,y:608,width:83,height:71},id24:{x:523,y:487,width:26,height:100},id25:{x:235,y:533,width:94,height:73},id26:{x:0,y:699,width:107,height:52},id27:{x:416,y:425,width:77,height:72},id28:{x:471,y:713,width:55,height:82},id29:{x:387,y:713,width:82,height:81},id3:{x:387,y:617,width:83,height:94},id30:{x:472,y:608,width:46,height:78},id31:{x:320,y:617,width:51,height:50},id32:{x:520,y:600,width:28,height:101},id33:{x:449,y:248,width:57,height:99},id34:{x:278,y:322,width:84,height:101},id35:{x:538,y:332,width:26,height:105},id36:{x:139,y:654,width:94,height:42},id37:{x:508,y:232,width:38,height:98},id38:{x:109,y:699,width:95,height:74},id39:{x:0,y:753,width:107,height:51},id4:{x:331,y:425,width:83,height:94},id40:{x:475,y:499,width:46,height:99},id41:{x:364,y:344,width:82,height:79},id42:{x:489,y:152,width:44,height:78},id43:{x:416,y:499,width:57,height:107},id44:{x:495,y:349,width:41,height:103},id45:{x:0,y:152,width:221,height:209},id46:{x:0,y:363,width:180,height:119},id5:{x:302,y:681,width:83,height:94},id6:{x:319,y:152,width:83,height:94},id7:{x:235,y:448,width:94,height:83},id8:{x:223,y:237,width:94,height:83},id9:{x:139,y:569,width:94,height:83}}},{id:"clothes",file:"images/clothes.png",oAtlasData:{id0:{x:1105,y:0,width:330,height:145},id1:{x:1066,y:1404,width:510,height:177},id10:{x:585,y:0,width:518,height:218},id11:{x:1079,y:717,width:491,height:174},id12:{x:1440,y:166,width:300,height:169},id13:{x:1437,y:0,width:314,height:164},id14:{x:0,y:961,width:543,height:249},id15:{x:585,y:220,width:512,height:250},id16:{x:0,y:740,width:551,height:219},id17:{x:0,y:293,width:560,height:195},id18:{x:0,y:1441,width:531,height:242},id19:{x:545,y:961,width:525,height:240},id2:{x:1072,y:903,width:507,height:267},id20:{x:553,y:740,width:524,height:161},id21:{x:0,y:0,width:583,height:291},id22:{x:0,y:490,width:558,height:248},id23:{x:1099,y:220,width:339,height:182},id3:{x:1080,y:472,width:487,height:211},id4:{x:533,y:1441,width:531,height:200},id5:{x:0,y:1212,width:540,height:227},id6:{x:542,y:1212,width:528,height:190},id7:{x:1072,y:1172,width:507,height:225},id8:{x:560,y:490,width:518,height:225},id9:{x:1066,y:1583,width:486,height:132}}},{id:"items",file:"images/items.png",oAtlasData:{id0:{x:209,y:681,width:152,height:71},id1:{x:398,y:227,width:162,height:181},id10:{x:562,y:141,width:146,height:288},id11:{x:710,y:0,width:120,height:355},id12:{x:373,y:681,width:168,height:266},id13:{x:702,y:712,width:124,height:314},id14:{x:222,y:400,width:174,height:279},id15:{x:702,y:431,width:144,height:279},id16:{x:848,y:296,width:100,height:302},id17:{x:250,y:227,width:125,height:169},id18:{x:828,y:712,width:119,height:214},id19:{x:398,y:551,width:116,height:116},id2:{x:543,y:551,width:157,height:139},id20:{x:543,y:833,width:149,height:204},id21:{x:0,y:795,width:190,height:193},id22:{x:192,y:795,width:179,height:195},id23:{x:0,y:400,width:220,height:168},id24:{x:0,y:570,width:207,height:223},id25:{x:250,y:0,width:170,height:225},id26:{x:0,y:0,width:248,height:108},id3:{x:398,y:410,width:157,height:139},id4:{x:543,y:692,width:157,height:139},id5:{x:422,y:0,width:157,height:139},id6:{x:373,y:949,width:77,height:69},id7:{x:422,y:141,width:68,height:49},id8:{x:0,y:110,width:248,height:288},id9:{x:832,y:0,width:104,height:294}}},{id:"uiButs",file:"images/uiButs.png",oAtlasData:{id0:{x:0,y:190,width:94,height:93},id1:{x:96,y:95,width:94,height:93},id2:{x:96,y:190,width:65,height:64},id3:{x:96,y:0,width:94,height:93},id4:{x:0,y:95,width:94,height:93},id5:{x:0,y:0,width:94,height:93}}},{id:"jewellery",file:"images/jewellery.png",oAtlasData:{id0:{x:224,y:0,width:144,height:91},id1:{x:0,y:465,width:154,height:67},id10:{x:0,y:0,width:222,height:114},id11:{x:0,y:369,width:196,height:94},id12:{x:438,y:121,width:47,height:93},id13:{x:487,y:338,width:44,height:100},id14:{x:374,y:0,width:62,height:116},id15:{x:488,y:0,width:41,height:83},id16:{x:156,y:465,width:37,height:60},id17:{x:492,y:210,width:40,height:91},id18:{x:496,y:440,width:36,height:62},id19:{x:374,y:338,width:59,height:111},id2:{x:198,y:452,width:160,height:82},id20:{x:438,y:0,width:48,height:119},id21:{x:487,y:121,width:43,height:87},id22:{x:374,y:118,width:62,height:94},id23:{x:435,y:338,width:50,height:65},id3:{x:198,y:369,width:174,height:81},id4:{x:0,y:268,width:200,height:99},id5:{x:202,y:220,width:144,height:122},id6:{x:0,y:116,width:200,height:150},id7:{x:360,y:452,width:134,height:71},id8:{x:348,y:220,width:142,height:116},id9:{x:202,y:116,width:170,height:102}}},{id:"faceItems",file:"images/faceItems.png",oAtlasData:{id0:{x:432,y:761,width:344,height:121},id1:{x:0,y:1182,width:374,height:125},id10:{x:432,y:884,width:79,height:73},id11:{x:1194,y:325,width:130,height:132},id12:{x:462,y:225,width:390,height:264},id13:{x:437,y:503,width:406,height:256},id14:{x:840,y:1023,width:372,height:233},id15:{x:845,y:491,width:368,height:236},id16:{x:0,y:0,width:592,height:223},id17:{x:854,y:104,width:342,height:219},id18:{x:0,y:960,width:423,height:220},id19:{x:0,y:732,width:430,height:226},id2:{x:734,y:1258,width:342,height:97},id20:{x:0,y:503,width:435,height:227},id21:{x:0,y:225,width:460,height:276},id22:{x:425,y:960,width:413,height:244},id23:{x:840,y:761,width:382,height:260},id3:{x:854,y:325,width:338,height:121},id4:{x:376,y:1206,width:356,height:119},id5:{x:594,y:0,width:342,height:102},id6:{x:594,y:104,width:119,height:100},id7:{x:513,y:884,width:74,height:72},id8:{x:938,y:0,width:86,height:86},id9:{x:715,y:104,width:95,height:92}}},{id:"langText",file:"json/text.json"}],ctx,canvas.width,canvas.height),oImageIds.cTail=getAssetId(!0),oImageIds.cBody=getAssetId(),oImageIds.cHead0=getAssetId(),oImageIds.cHead1=getAssetId(),oImageIds.cHead2=getAssetId(),oImageIds.cHead3=getAssetId(),oImageIds.cEar0=getAssetId(),oImageIds.cEar1=getAssetId(),oImageIds.item00=getAssetId(),oImageIds.item01=getAssetId(),oImageIds.item02=getAssetId(),oImageIds.item03=getAssetId(),oImageIds.item04=getAssetId(),oImageIds.item05=getAssetId(),oImageIds.item06=getAssetId(),oImageIds.item07=getAssetId(),oImageIds.item08=getAssetId(),oImageIds.item10=getAssetId(),oImageIds.item11=getAssetId(),oImageIds.item12=getAssetId(),oImageIds.item13=getAssetId(),oImageIds.item14=getAssetId(),oImageIds.item15=getAssetId(),oImageIds.item16=getAssetId(),oImageIds.item17=getAssetId(),oImageIds.item18=getAssetId(),oImageIds.mirror0=getAssetId(),oImageIds.neck0=getAssetId(!0),oImageIds.head0=getAssetId(),oImageIds.ear0=getAssetId(),oImageIds.eye01=getAssetId(),oImageIds.nose00=getAssetId(),oImageIds.brow0=getAssetId(),oImageIds.neck1=getAssetId(),oImageIds.head1=getAssetId(),oImageIds.ear1=getAssetId(),oImageIds.nose10=getAssetId(),oImageIds.neck2=getAssetId(),oImageIds.head2=getAssetId(),oImageIds.ear2=getAssetId(),oImageIds.nose20=getAssetId(),oImageIds.neck3=getAssetId(),oImageIds.head3=getAssetId(),oImageIds.ear3=getAssetId(),oImageIds.nose30=getAssetId(),oImageIds.eye11=getAssetId(),oImageIds.eye21=getAssetId(),oImageIds.eye31=getAssetId(),oImageIds.eye41=getAssetId(),oImageIds.eye51=getAssetId(),oImageIds.eye61=getAssetId(),oImageIds.eye71=getAssetId(),oImageIds.brow3=getAssetId(),oImageIds.brow1=getAssetId(),oImageIds.brow2=getAssetId(),oImageIds.mouth00=getAssetId(),oImageIds.mouth10=getAssetId(),oImageIds.mouth20=getAssetId(),oImageIds.mouth30=getAssetId(),oImageIds.mouth40=getAssetId(),oImageIds.mouth50=getAssetId(),oImageIds.mouth60=getAssetId(),oImageIds.mouth70=getAssetId(),oImageIds.mouth80=getAssetId(),oImageIds.mouth01=getAssetId(),oImageIds.mouth11=getAssetId(),oImageIds.mouth21=getAssetId(),oImageIds.mouth31=getAssetId(),oImageIds.mouth41=getAssetId(),oImageIds.mouth51=getAssetId(),oImageIds.mouth61=getAssetId(),oImageIds.mouth71=getAssetId(),oImageIds.mouth81=getAssetId(),oImageIds.mouth02=getAssetId(),oImageIds.mouth12=getAssetId(),oImageIds.mouth22=getAssetId(),oImageIds.mouth32=getAssetId(),oImageIds.mouth42=getAssetId(),oImageIds.mouth52=getAssetId(),oImageIds.mouth62=getAssetId(),oImageIds.mouth72=getAssetId(),oImageIds.mouth82=getAssetId(),oImageIds.mouth03=getAssetId(),oImageIds.mouth13=getAssetId(),oImageIds.mouth23=getAssetId(),oImageIds.mouth33=getAssetId(),oImageIds.mouth43=getAssetId(),oImageIds.mouth53=getAssetId(),oImageIds.mouth63=getAssetId(),oImageIds.mouth73=getAssetId(),oImageIds.mouth83=getAssetId(),oImageIds.mouth04=getAssetId(),oImageIds.mouth14=getAssetId(),oImageIds.mouth24=getAssetId(),oImageIds.mouth34=getAssetId(),oImageIds.mouth44=getAssetId(),oImageIds.mouth54=getAssetId(),oImageIds.mouth64=getAssetId(),oImageIds.mouth74=getAssetId(),oImageIds.mouth84=getAssetId(),oImageIds.nose01=getAssetId(),oImageIds.nose02=getAssetId(),oImageIds.nose11=getAssetId(),oImageIds.nose12=getAssetId(),oImageIds.nose21=getAssetId(),oImageIds.nose22=getAssetId(),oImageIds.nose31=getAssetId(),oImageIds.nose32=getAssetId(),oImageIds.eye10=getAssetId(!0),oImageIds.eye102=getAssetId(),oImageIds.eye112=getAssetId(),oImageIds.eye122=getAssetId(),oImageIds.eye132=getAssetId(),oImageIds.eye142=getAssetId(),oImageIds.eye152=getAssetId(),oImageIds.eye162=getAssetId(),oImageIds.eye172=getAssetId(),oImageIds.eye182=getAssetId(),oImageIds.eye192=getAssetId(),oImageIds.eye1102=getAssetId(),oImageIds.eye1112=getAssetId(),oImageIds.eye1122=getAssetId(),oImageIds.eye1132=getAssetId(),oImageIds.eye143=getAssetId(),oImageIds.eye153=getAssetId(),oImageIds.eye163=getAssetId(),oImageIds.eye173=getAssetId(),oImageIds.eye183=getAssetId(),oImageIds.eye193=getAssetId(),oImageIds.eye1103=getAssetId(),oImageIds.eye1113=getAssetId(),oImageIds.eye1123=getAssetId(),oImageIds.eye1133=getAssetId(),oImageIds.eye103=getAssetId(),oImageIds.eye113=getAssetId(),oImageIds.eye123=getAssetId(),oImageIds.eye133=getAssetId(),oImageIds.eye20=getAssetId(),oImageIds.eye202=getAssetId(),oImageIds.eye212=getAssetId(),oImageIds.eye222=getAssetId(),oImageIds.eye232=getAssetId(),oImageIds.eye242=getAssetId(),oImageIds.eye252=getAssetId(),oImageIds.eye262=getAssetId(),oImageIds.eye272=getAssetId(),oImageIds.eye282=getAssetId(),oImageIds.eye292=getAssetId(),oImageIds.eye2102=getAssetId(),oImageIds.eye2112=getAssetId(),oImageIds.eye2122=getAssetId(),oImageIds.eye2132=getAssetId(),oImageIds.eye243=getAssetId(),oImageIds.eye253=getAssetId(),oImageIds.eye263=getAssetId(),oImageIds.eye273=getAssetId(),oImageIds.eye283=getAssetId(),oImageIds.eye293=getAssetId(),oImageIds.eye2103=getAssetId(),oImageIds.eye2113=getAssetId(),oImageIds.eye2123=getAssetId(),oImageIds.eye2133=getAssetId(),oImageIds.eye203=getAssetId(),oImageIds.eye213=getAssetId(),oImageIds.eye223=getAssetId(),oImageIds.eye233=getAssetId(),oImageIds.eye00=getAssetId(),oImageIds.eye002=getAssetId(),oImageIds.eye012=getAssetId(),oImageIds.eye022=getAssetId(),oImageIds.eye032=getAssetId(),oImageIds.eye042=getAssetId(),oImageIds.eye052=getAssetId(),oImageIds.eye062=getAssetId(),oImageIds.eye072=getAssetId(),oImageIds.eye082=getAssetId(),oImageIds.eye092=getAssetId(),oImageIds.eye0102=getAssetId(),oImageIds.eye0112=getAssetId(),oImageIds.eye0122=getAssetId(),oImageIds.eye0132=getAssetId(),oImageIds.eye043=getAssetId(),oImageIds.eye053=getAssetId(),oImageIds.eye063=getAssetId(),oImageIds.eye073=getAssetId(),oImageIds.eye083=getAssetId(),oImageIds.eye093=getAssetId(),oImageIds.eye0103=getAssetId(),oImageIds.eye0113=getAssetId(),oImageIds.eye0123=getAssetId(),oImageIds.eye0133=getAssetId(),oImageIds.eye003=getAssetId(),oImageIds.eye013=getAssetId(),oImageIds.eye023=getAssetId(),oImageIds.eye033=getAssetId(),oImageIds.hand00=getAssetId(),oImageIds.hand01=getAssetId(),oImageIds.hand02=getAssetId(),oImageIds.hand10=getAssetId(),oImageIds.hand11=getAssetId(),oImageIds.hand12=getAssetId(),oImageIds.hand20=getAssetId(),oImageIds.hand21=getAssetId(),oImageIds.hand22=getAssetId(),oImageIds.hand30=getAssetId(),oImageIds.hand31=getAssetId(),oImageIds.hand32=getAssetId(),oImageIds.lash00=getAssetId(),oImageIds.lash10=getAssetId(),oImageIds.lash01=getAssetId(),oImageIds.lash11=getAssetId(),oImageIds.lash02=getAssetId(),oImageIds.lash12=getAssetId(),oImageIds.cloth0=getAssetId(!0);for(var t=1;t<aToolCount[3];t++)oImageIds["cloth"+t]=getAssetId();oImageIds.jewel0=getAssetId(!0);for(t=1;t<aToolCount[4];t++)t<=11?oImageIds["jewel"+t]=getAssetId():oImageIds["earring"+(t-12)]=getAssetId();oImageIds.glasses0=getAssetId(!0),oImageIds.glasses1=getAssetId(),oImageIds.glasses2=getAssetId(),oImageIds.glasses3=getAssetId(),oImageIds.glasses4=getAssetId(),oImageIds.glasses5=getAssetId(),oImageIds.flower0=getAssetId(),oImageIds.flower1=getAssetId(),oImageIds.flower2=getAssetId(),oImageIds.flower3=getAssetId(),oImageIds.flower4=getAssetId(),oImageIds.flower5=getAssetId(),oImageIds.hat6=getAssetId(),oImageIds.hat7=getAssetId(),oImageIds.hat8=getAssetId(),oImageIds.hat9=getAssetId(),oImageIds.hat10=getAssetId(),oImageIds.hat11=getAssetId(),oImageIds.hat0=getAssetId(),oImageIds.hat1=getAssetId(),oImageIds.hat2=getAssetId(),oImageIds.hat3=getAssetId(),oImageIds.hat4=getAssetId(),oImageIds.hat5=getAssetId(),oImageIds.resetBut=getAssetId(!0),oImageIds.downloadBut=getAssetId(),oImageIds.infoBut=getAssetId(),oImageIds.muteBut0=getAssetId(),oImageIds.muteBut1=getAssetId(),oImageIds.backBut=getAssetId(),oImageIds.tool00=getAssetId(!0);for(t=1;t<aToolCount[0];t++)oImageIds["tool0"+t]=getAssetId();for(t=0;t<aToolCount[1];t++)oImageIds["tool1"+t]=getAssetId();for(t=0;t<aToolCount[2];t++)oImageIds["tool2"+t]=getAssetId();for(t=0;t<aToolCount[4];t++)oImageIds["tool4"+t]=getAssetId();for(t=0;t<aToolCount[3];t++)oImageIds["tool3"+t]=getAssetId();for(t=0;t<aToolCount[5];t++)oImageIds["tool5"+t]=getAssetId();for(t=0;t<aToolCount[6];t++)oImageIds["tool6"+t]=getAssetId();oImageIds.toolHighlight0=getAssetId(),oImageIds.toolHighlight1=getAssetId(),oImageIds.rewardIcon=getAssetId(),oImageIds.tab00=getAssetId(!0),oImageIds.tab01=getAssetId(),oImageIds.tab02=getAssetId(),oImageIds.tab04=getAssetId(),oImageIds.tab03=getAssetId(),oImageIds.tab06=getAssetId(),oImageIds.tab05=getAssetId(),oImageIds.tab10=getAssetId(),oImageIds.tab11=getAssetId(),oImageIds.tab12=getAssetId(),oImageIds.tab14=getAssetId(),oImageIds.tab13=getAssetId(),oImageIds.tab16=getAssetId(),oImageIds.tab15=getAssetId(),oImageIds.tick1=getAssetId(),oImageIds.tick2=getAssetId(),oImageIds.tick4=getAssetId(),oImageIds.tick3=getAssetId(),oImageIds.tick5=getAssetId(),oImageIds.tick6=getAssetId(),oImageIds.table=getAssetId(),oImageIds.tickPalette=getAssetId(),oImageIds.finger=getAssetId(),oImageIds.emoji0=getAssetId(),oImageIds.cursor00=getAssetId(),oImageIds.cursor10=getAssetId(),oImageIds.cursor11=getAssetId(),oImageIds.cursor20=getAssetId(),oImageIds.cursor30=getAssetId(),oImageIds.cursor40=getAssetId(),oImageIds.cursor60=getAssetId(),oImageIds.cursor50=getAssetId(),oImageIds.cursor90=getAssetId(),oImageIds.cursor100=getAssetId(),oImageIds.cursor140=getAssetId(),oImageIds.cursor141=getAssetId(),oImageIds.cursor80=getAssetId(),oImageIds.cursor160=getAssetId(),oImageIds.cursor170=getAssetId(),oImageIds.cursor171=getAssetId(),oImageIds.cursor150=getAssetId(),oImageIds.cursor110=getAssetId(),oImageIds.cursor70=getAssetId(),oImageIds.cursor130=getAssetId(),oImageIds.cursor120=getAssetId(),oImageIds.bubble0=getAssetId(),oImageIds.watermark=getAssetId(),assetLib.onReady(initSplash),gameState="loading",previousTime=(new Date).getTime(),updateLoaderEvent()}function getAssetId(t){return void 0===t&&(t=!1),t&&(assetIdInc=0),"id"+assetIdInc++}function resizeCanvas(){var t,e,a,i=window.innerWidth,s=window.innerHeight;if(canvas.height=s,canvas.width=i,canvas.style.width=i+"px",canvas.style.height=s+"px",canvasScale=1,i<s?(t=maxWidth,maxHeight,e=minWidth,a=minHeight):(t=maxHeight,maxWidth,e=minHeight,a=minWidth),canvas.width/canvas.height<e/a?(canvas.width=t,canvas.height=t*(s/i),canvasScale=t/i):(canvas.height=a,canvas.width=a*(i/s),canvasScale=a/s),"game"===gameState)updateGameButs(),updateGameTouch();this.prevCanvasWidth=i,this.prevCanvasHeight=s,window.scrollTo(0,0)}function playSound(t,e){if(void 0===e&&(e=1),1==audioType){var a=sound.play(t);sound.volume(e,a)}}function loopSound(t,e){void 0===e&&(e=1),1==audioType&&(sound.loop(!0,t),curSoundLoop=sound.play(t),sound.loop(!0,curSoundLoop),sound.volume(e,curSoundLoop))}function stopLoopSound(){curSoundLoop&&(sound.stop(curSoundLoop),curSoundLoop=null)}function toggleMute(){muted=!muted,1==audioType?muted?(Howler.mute(!0),music.pause()):(Howler.mute(!1),playMusic(),music.volume(.25)):2==audioType&&(muted?music.pause():playMusic())}console.log("hair count",aHairData[0].length);